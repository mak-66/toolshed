import{$ as z,$a as R_,$b as Si,A as Pt,Aa as __,Ab as Ai,B as La,Ba as Ho,Bb as id,Bc as ev,C as Qu,Ca as v_,Cb as we,Cc as tv,D as Ua,Da as vn,Db as et,E as i_,Ea as Ko,Eb as Bt,Ec as ld,F as wt,Fa as Qo,Fb as Re,Fc as nv,G as Wn,Ga as y_,Gb as Ci,Gc as rv,H as Pr,Ha as b_,Hb as bn,I as o_,Ia as Yo,Ib as zt,J as Yu,Ja as yi,Jb as je,K as Jt,Ka as bi,Kb as Be,L as s_,La as w_,Lb as O_,M as Mr,Ma as I_,Mb as F_,N as Hn,Na as E_,Nb as od,O as Ju,Oa as T_,Ob as O,P as a_,Pa as A_,Pb as wn,Q as Xu,Qa as C_,Qb as ze,R as Zu,Ra as S_,Rb as Ge,S as c_,Sa as Et,Sb as We,T as l_,Ta as wi,Tb as He,U as u_,Ua as x_,Ub as Xt,V as kr,Va as Jo,Vb as V_,W as Mt,Wa as U,Wb as Wa,X as gn,Xa as be,Xb as Ha,Y as Ee,Ya as nd,Yb as L_,Z as me,Za as Ba,Zb as U_,_ as vi,_a as Xo,_b as j_,a as V,aa as Te,ab as Ii,ac as B_,b as ie,ba as d_,bb as D_,bc as sd,ca as Q,cb as P_,cc as z_,d as $n,da as ed,db as M_,dc as Yn,e as g,ea as ne,eb as le,ec as $_,f as _i,fa as D,fb as Ae,fc as $t,g as zu,ga as pt,gb as ce,gc as Jn,h as Yt,ha as Ut,hb as yn,hc as Xn,i as $u,ia as h_,ib as Vr,ic as q_,j as qu,ja as Wo,jb as Me,jc as xi,k as Xe,ka as _n,kb as za,kc as G_,l as Dt,la as Nr,lb as $a,lc as W_,m as e_,ma as Kn,mb as k_,mc as De,n as t_,na as Qn,nb as rd,nc as ad,o as qn,oa as Or,ob as jt,oc as Ka,p as Gu,pa as f_,pb as xe,pc as H_,q as Wu,qa as It,qb as Ze,qc as Qa,r as Hu,ra as td,rb as qa,rc as K_,s as mt,sa as m_,sb as ke,sc as Q_,t as q,ta as p_,tb as N_,tc as Y_,u as Dr,ua as g_,ub as Ga,uc as Zo,v as n_,va as gt,vb as Ei,vc as J_,w as r_,wa as _e,wb as Ti,wc as X_,x as Ku,xa as Fr,xb as R,xc as cd,y as G,ya as ja,yb as x,yc as Z_,z as Gn,za as st,zb as pe}from"./chunk-RQYLDCWA.js";var dd=class{};var Ri=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var hd=class{encodeKey(e){return iv(e)}encodeValue(e){return iv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function b0(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,c]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(c),t.set(s,l)}),t}var w0=/%(\d[a-f0-9])/gi,I0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iv(n){return encodeURIComponent(n).replace(w0,(e,t)=>I0[t]??e)}function Ya(n){return`${n}`}var Zn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new hd,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=b0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ya):[Ya(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ya(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ya(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var fd=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function E0(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ov(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sv(n){return typeof Blob<"u"&&n instanceof Blob}function av(n){return typeof FormData<"u"&&n instanceof FormData}function T0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var es=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(E0(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ri,this.context??=new fd,!this.params)this.params=new Zn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ov(this.body)||sv(this.body)||av(this.body)||T0(this.body)?this.body:this.body instanceof Zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||av(this.body)?null:sv(this.body)?this.body.type||null:ov(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((b,S)=>b.set(S,e.setHeaders[S]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((b,S)=>b.set(S,e.setParams[S]),f)),new n(t,r,s,{params:f,headers:d,context:p,reportProgress:l,responseType:i,withCredentials:c,transferCache:o})}},cv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(cv||{}),md=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ri,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var pd=class n extends md{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=cv.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function ud(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var lv=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof es)o=t;else{let l;i.headers instanceof Ri?l=i.headers:l=new Ri(i.headers);let d;i.params&&(i.params instanceof Zn?d=i.params:d=new Zn({fromObject:i.params})),o=new es(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=q(o).pipe(Pr(l=>this.handler.handle(l)));if(t instanceof es||i.observe==="events")return s;let c=s.pipe(wt(l=>l instanceof pd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(G(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(G(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Zn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ud(i,r))}post(t,r,i={}){return this.request("POST",t,ud(i,r))}put(t,r,i={}){return this.request("PUT",t,ud(i,r))}static \u0275fac=function(r){return new(r||n)(ne(dd))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();var _d=class extends W_{supportsDOMEvents=!0},vd=class n extends _d{static makeCurrent(){G_(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S0();return t==null?null:x0(t)}resetBaseElement(){ts=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return H_(document.cookie,e)}},ts=null;function S0(){return ts=ts||document.querySelector("base"),ts?ts.getAttribute("href"):null}function x0(n){return new URL(n,document.baseURI).pathname}var R0=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),yd=new Q(""),mv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new me(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ne(yd),ne(_e))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),Ja=class{_doc;constructor(e){this._doc=e}manager},bd="ng-app-id";function uv(n){for(let e of n)e.remove()}function dv(n,e){let t=e.createElement("style");return t.textContent=n,t}function D0(n,e,t){let r=n.head?.querySelectorAll(`style[${bd}="${e}"]`);if(r)for(let i of r)i.textContent&&(i.removeAttribute(bd),t.set(i.textContent,{usage:0,elements:[i]}))}function wd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var pv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=cd(o),D0(t,r,this.inline),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,dv);r?.forEach(i=>this.addUsage(i,this.external,wd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(uv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])uv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,dv(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,wd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(bd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ne(De),ne(Ho),ne(Qo,8),ne(vn))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),gd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ed=/%COMP%/g,gv="%COMP%",P0=`_nghost-${gv}`,M0=`_ngcontent-${gv}`,k0=!0,N0=new Q("",{providedIn:"root",factory:()=>k0});function O0(n){return M0.replace(Ed,n)}function F0(n){return P0.replace(Ed,n)}function _v(n,e){return e.map(t=>t.replace(Ed,n))}var Xa=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,l,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=d,this.platformIsServer=cd(c),this.defaultRenderer=new ns(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yo.ShadowDom&&(r=ie(V({},r),{encapsulation:Yo.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Za?i.applyToHost(t):i instanceof rs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Yo.Emulated:o=new Za(l,d,r,this.appId,f,s,c,p);break;case Yo.ShadowDom:return new Id(l,d,t,r,s,c,this.nonce,p);default:o=new rs(l,d,r,f,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||n)(ne(mv),ne(pv),ne(Ho),ne(N0),ne(De),ne(vn),ne(_e),ne(Qo))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),ns=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(gd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hv(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hv(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new me(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=gd[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Jo.DashCase|Jo.Important)?e.style.setProperty(t,r,i&Jo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function hv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Id=class extends ns{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=_v(i.id,i.styles);for(let p of d){let b=document.createElement("style");c&&b.setAttribute("nonce",c),b.textContent=p,this.shadowRoot.appendChild(b)}let f=i.getExternalStyles?.();if(f)for(let p of f){let b=wd(p,o);c&&b.setAttribute("nonce",c),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rs=class extends ns{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?_v(l,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Za=class extends rs{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,l){let d=i+"-"+r.id;super(e,t,r,o,s,c,l,d),this.contentAttr=O0(d),this.hostAttr=F0(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},V0=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||n)(ne(De))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),fv=["alt","control","meta","shift"],L0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},j0=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),fv.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=L0[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fv.forEach(s=>{if(s!==i){let c=U0[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ne(De))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function vv(n,e){return $_(V({rootComponent:n},B0(e)))}function B0(n){return{appProviders:[...W0,...n?.providers??[]],platformProviders:G0}}function z0(){vd.makeCurrent()}function $0(){return new Fr}function q0(){return __(document),document}var G0=[{provide:vn,useValue:J_},{provide:v_,useValue:z0,multi:!0},{provide:De,useFactory:q0,deps:[]}];var W0=[{provide:h_,useValue:"root"},{provide:Fr,useFactory:$0,deps:[]},{provide:yd,useClass:V0,multi:!0,deps:[De,_e,vn]},{provide:yd,useClass:j0,multi:!0,deps:[De]},Xa,pv,mv,{provide:Ba,useExisting:Xa},{provide:Z_,useClass:R0,deps:[]},[]];var yv=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ne(De))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Td=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ne(H0),i},providedIn:"root"})}return n})(),H0=(()=>{class n extends Td{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Et.NONE:return r;case Et.HTML:return bi(r,"HTML")?yi(r):S_(this._doc,String(r)).toString();case Et.STYLE:return bi(r,"Style")?yi(r):r;case Et.SCRIPT:if(bi(r,"Script"))return yi(r);throw new me(5200,!1);case Et.URL:return bi(r,"URL")?yi(r):C_(String(r));case Et.RESOURCE_URL:if(bi(r,"ResourceURL"))return yi(r);throw new me(5201,!1);default:throw new me(5202,!1)}}bypassSecurityTrustHtml(t){return w_(t)}bypassSecurityTrustStyle(t){return I_(t)}bypassSecurityTrustScript(t){return E_(t)}bypassSecurityTrustUrl(t){return T_(t)}bypassSecurityTrustResourceUrl(t){return A_(t)}static \u0275fac=function(r){return new(r||n)(ne(De))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",ys=Symbol("RouteTitle"),Rd=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new Rd(n)}function Y0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function J0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zt(n[t],e[t]))return!1;return!0}function Zt(n,e){let t=n?Dd(n):void 0,r=e?Dd(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Dv(n[i],e[i]))return!1;return!0}function Dd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Dv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Pv(n){return n.length>0?n[n.length-1]:null}function tr(n){return n_(n)?n:$a(n)?mt(Promise.resolve(n)):q(n)}var X0={exact:kv,subset:Nv},Mv={exact:Z0,subset:eT,ignored:()=>!0};function wv(n,e,t){return X0[t.paths](n.root,e.root,t.matrixParams)&&Mv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Z0(n,e){return Zt(n,e)}function kv(n,e,t){if(!Ur(n.segments,e.segments)||!nc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kv(n.children[r],e.children[r],t))return!1;return!0}function eT(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dv(n[t],e[t]))}function Nv(n,e,t){return Ov(n,e,e.segments,t)}function Ov(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ur(i,t)||e.hasChildren()||!nc(i,t,r))}else if(n.segments.length===t.length){if(!Ur(n.segments,t)||!nc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Nv(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ur(n.segments,i)||!nc(n.segments,i,r)||!n.children[X]?!1:Ov(n.children[X],e,o,r)}}function nc(n,e,t){return e.every((r,i)=>Mv[t](n[i].parameters,r.parameters))}var En=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return rT.serialize(this)}},ue=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rc(this)}},Lr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return Vv(this)}};function tT(n,e){return Ur(n,e)&&n.every((t,r)=>Zt(t.parameters,e[r].parameters))}function Ur(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nT(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var nh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>new us,providedIn:"root"})}return n})(),us=class{parse(e){let t=new Md(e);return new En(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${is(e.root,!0)}`,r=sT(e.queryParams),i=typeof e.fragment=="string"?`#${iT(e.fragment)}`:"";return`${t}${r}${i}`}},rT=new us;function rc(n){return n.segments.map(e=>Vv(e)).join("/")}function is(n,e){if(!n.hasChildren())return rc(n);if(e){let t=n.children[X]?is(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${is(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nT(n,(r,i)=>i===X?[is(n.children[X],!1)]:[`${i}:${is(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${rc(n)}/${t[0]}`:`${rc(n)}/(${t.join("//")})`}}function Fv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ec(n){return Fv(n).replace(/%3B/gi,";")}function iT(n){return encodeURI(n)}function Pd(n){return Fv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ic(n){return decodeURIComponent(n)}function Iv(n){return ic(n.replace(/\+/g,"%20"))}function Vv(n){return`${Pd(n.path)}${oT(n.parameters)}`}function oT(n){return Object.entries(n).map(([e,t])=>`;${Pd(e)}=${Pd(t)}`).join("")}function sT(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ec(t)}=${ec(i)}`).join("&"):`${ec(t)}=${ec(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var aT=/^[^\/()?;#]+/;function Ad(n){let e=n.match(aT);return e?e[0]:""}var cT=/^[^\/()?;=#]+/;function lT(n){let e=n.match(cT);return e?e[0]:""}var uT=/^[^=?&#]+/;function dT(n){let e=n.match(uT);return e?e[0]:""}var hT=/^[^&#]+/;function fT(n){let e=n.match(hT);return e?e[0]:""}var Md=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ue(e,t)),r}parseSegment(){let e=Ad(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new me(4009,!1);return this.capture(e),new Lr(ic(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=lT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ad(this.remaining);i&&(r=i,this.capture(r))}e[ic(t)]=ic(r)}parseQueryParam(e){let t=dT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=fT(this.remaining);s&&(r=s,this.capture(r))}let i=Iv(t),o=Iv(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ad(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new me(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[X]:new ue([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new me(4011,!1)}};function Lv(n){return n.segments.length>0?new ue([],{[X]:n}):n}function Uv(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Uv(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ue(n.segments,e);return mT(t)}function mT(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ue(n.segments.concat(e.segments),e.children)}return n}function jr(n){return n instanceof En}function pT(n,e,t=null,r=null){let i=jv(n);return Bv(i,e,t,r)}function jv(n){let e;function t(o){let s={};for(let l of o.children){let d=t(l);s[l.outlet]=d}let c=new ue(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=Lv(r);return e??i}function Bv(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Cd(i,i,i,t,r);let o=gT(e);if(o.toRoot())return Cd(i,i,new ue([],{}),t,r);let s=_T(o,i,n),c=s.processChildren?as(s.segmentGroup,s.index,o.commands):$v(s.segmentGroup,s.index,o.commands);return Cd(i,s.segmentGroup,c,t,r)}function oc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ds(n){return typeof n=="object"&&n!=null&&n.outlets}function Cd(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let s;n===e?s=t:s=zv(n,e,t);let c=Lv(Uv(s));return new En(c,o,i)}function zv(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=zv(o,e,t)}),new ue(n.segments,r)}var sc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oc(r[0]))throw new me(4003,!1);let i=r.find(ds);if(i&&i!==Pv(r))throw new me(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sc(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new sc(t,e,r)}var Mi=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _T(n,e,t){if(n.isAbsolute)return new Mi(e,!0,0);if(!t)return new Mi(e,!1,NaN);if(t.parent===null)return new Mi(t,!0,0);let r=oc(n.commands[0])?0:1,i=t.segments.length-1+r;return vT(t,i,n.numberOfDoubleDots)}function vT(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new me(4005,!1);i=r.segments.length}return new Mi(r,!1,i-o)}function yT(n){return ds(n[0])?n[0].outlets:{[X]:n}}function $v(n,e,t){if(n??=new ue([],{}),n.segments.length===0&&n.hasChildren())return as(n,e,t);let r=bT(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ue(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new ue(n.segments.slice(r.pathIndex),n.children),as(o,0,i)}else return r.match&&i.length===0?new ue(n.segments,{}):r.match&&!n.hasChildren()?kd(n,e,t):r.match?as(n,0,i):kd(n,e,t)}function as(n,e,t){if(t.length===0)return new ue(n.segments,{});{let r=yT(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=as(n.children[X],e,t);return new ue(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$v(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ue(n.segments,i)}}function bT(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(ds(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Tv(l,d,s))return o;r+=2}else{if(!Tv(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kd(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ds(o)){let l=wT(o.outlets);return new ue(r,l)}if(i===0&&oc(t[0])){let l=n.segments[e];r.push(new Lr(l.path,Ev(t[0]))),i++;continue}let s=ds(o)?o.outlets[X]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&oc(c)?(r.push(new Lr(s,Ev(c))),i+=2):(r.push(new Lr(s,{})),i++)}return new ue(r,{})}function wT(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=kd(new ue([],{}),0,r))}),e}function Ev(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Tv(n,e,t){return n==t.path&&Zt(e,t.parameters)}var cs="imperative",tt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(tt||{}),kt=class{id;url;constructor(e,t){this.id=e,this.url=t}},hs=class extends kt{type=tt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},er=class extends kt{urlAfterRedirects;type=tt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(At||{}),Nd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Nd||{}),In=class extends kt{reason;code;type=tt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends kt{reason;code;type=tt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},fs=class extends kt{error;target;type=tt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ac=class extends kt{urlAfterRedirects;state;type=tt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class extends kt{urlAfterRedirects;state;type=tt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fd=class extends kt{urlAfterRedirects;state;shouldActivate;type=tt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vd=class extends kt{urlAfterRedirects;state;type=tt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class extends kt{urlAfterRedirects;state;type=tt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class{route;type=tt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jd=class{route;type=tt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bd=class{snapshot;type=tt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{snapshot;type=tt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$d=class{snapshot;type=tt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{snapshot;type=tt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ms=class{},Fi=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function IT(n,e){return n.providers&&!n._injector&&(n._injector=M_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qt(n){return n.outlet||X}function ET(n,e){let t=n.filter(r=>qt(r)===e);return t.push(...n.filter(r=>qt(r)!==e)),t}function bs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return bs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new mc(this.rootInjector)}},mc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ne(Wo))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Wd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Wd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hd(e,this._root).map(t=>t.value)}};function Wd(n,e){if(n===e.value)return e;for(let t of e.children){let r=Wd(n,t);if(r)return r}return null}function Hd(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hd(n,t);if(r.length)return r.unshift(e),r}return[]}var Tt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Pi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var lc=class extends cc{snapshot;constructor(e,t){super(e),this.snapshot=t,rh(this,e)}toString(){return this.snapshot.toString()}};function qv(n){let e=TT(n),t=new Dt([new Lr("",{})]),r=new Dt({}),i=new Dt({}),o=new Dt({}),s=new Dt(""),c=new zr(t,r,o,s,i,X,n,e.root);return c.snapshot=e.root,new lc(new Tt(c,[]),e)}function TT(n){let e={},t={},r={},i="",o=new ki([],e,r,i,t,X,n,null,{});return new dc("",new Tt(o,[]))}var zr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(G(d=>d[ys]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&Wv(i)&&(r.resolve[ys]=i.title),r}var ki=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ys]}constructor(e,t,r,i,o,s,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dc=class extends cc{url;constructor(e,t){super(t),this.url=e,rh(this,t)}toString(){return Gv(this._root)}};function rh(n,e){e.value._routerState=n,e.children.forEach(t=>rh(n,t))}function Gv(n){let e=n.children.length>0?` { ${n.children.map(Gv).join(", ")} } `:"";return`${n.value}${e}`}function Sd(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zt(e.params,t.params)||n.paramsSubject.next(t.params),J0(e.url,t.url)||n.urlSubject.next(t.url),Zt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Kd(n,e){let t=Zt(n.params,e.params)&&tT(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Kd(n.parent,e.parent))}function Wv(n){return typeof n.title=="string"||n.title===null}var AT=new Q(""),ws=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=ja(void 0);parentContexts=D(mc);location=D(R_);changeDetector=D(Yn);inputBinder=D(pc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new me(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new me(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Qd(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Nr]})}return n})(),Qd=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===zr?this.route:e===mc?this.childContexts:e===AT?this.outletData:this.parent.get(e,t)}},pc=new Q(""),Av=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Gn([r.queryParams,r.params,r.data]).pipe(Mt(([o,s,c],l)=>(c=V(V(V({},o),s),c),l===0?q(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=q_(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of s.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function CT(n,e,t){let r=ps(n,e._root,t?t._root:void 0);return new lc(r,e)}function ps(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ST(n,e,t);return new Tt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>ps(n,c)),s}}let r=xT(e.value),i=e.children.map(o=>ps(n,o));return new Tt(r,i)}}function ST(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ps(n,r,i);return ps(n,r)})}function xT(n){return new zr(new Dt(n.url),new Dt(n.params),new Dt(n.queryParams),new Dt(n.fragment),new Dt(n.data),n.outlet,n.component,n)}var gs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Hv="ngNavigationCancelingError";function hc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=jr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Kv(!1,At.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Kv(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Hv]=!0,t.cancellationCode=e,t}function RT(n){return Qv(n)&&jr(n.url)}function Qv(n){return!!n&&n[Hv]}var DT=(n,e,t,r)=>G(i=>(new Yd(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Yd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Pi(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Pi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Pi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Pi(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Sd(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Sd(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ni=class{component;route;constructor(e,t){this.component=e,this.route=t}};function PT(n,e,t){let r=n._root,i=e?e._root:null;return os(r,i,t,[r.value])}function MT(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Li(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!d_(n)?n:e.get(n):r}function os(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Pi(e);return n.children.forEach(s=>{kT(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>ls(c,t.getContext(s),i)),i}function kT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=NT(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new fc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?os(n,e,c?c.children:null,r,i):os(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ni(c.outlet.component,s))}else s&&ls(e,c,i),i.canActivateChecks.push(new fc(r)),o.component?os(n,null,c?c.children:null,r,i):os(n,null,t,r,i);return i}function NT(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ur(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ur(n.url,e.url)||!Zt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kd(n,e)||!Zt(n.queryParams,e.queryParams);case"paramsChange":default:return!Kd(n,e)}}function ls(n,e,t){let r=Pi(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ls(s,e.children.getContext(o),t):ls(s,null,t):ls(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ni(e.outlet.component,i)):t.canDeactivateChecks.push(new Ni(null,i)):t.canDeactivateChecks.push(new Ni(null,i))}function Is(n){return typeof n=="function"}function OT(n){return typeof n=="boolean"}function FT(n){return n&&Is(n.canLoad)}function VT(n){return n&&Is(n.canActivate)}function LT(n){return n&&Is(n.canActivateChild)}function UT(n){return n&&Is(n.canDeactivate)}function jT(n){return n&&Is(n.canMatch)}function Yv(n){return n instanceof r_||n?.name==="EmptyError"}var tc=Symbol("INITIAL_VALUE");function Vi(){return Mt(n=>Gn(n.map(e=>e.pipe(Jt(1),kr(tc)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===tc)return tc;if(t===!1||BT(t))return t}return!0}),wt(e=>e!==tc),Jt(1)))}function BT(n){return jr(n)||n instanceof gs}function zT(n,e){return Pt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?q(ie(V({},t),{guardsResult:!0})):$T(s,r,i,n).pipe(Pt(c=>c&&OT(c)?qT(r,o,n,e):q(c)),G(c=>ie(V({},t),{guardsResult:c})))})}function $T(n,e,t,r){return mt(n).pipe(Pt(i=>QT(i.component,i.route,t,e,r)),Hn(i=>i!==!0,!0))}function qT(n,e,t,r){return mt(e).pipe(Pr(i=>La(WT(i.route.parent,r),GT(i.route,r),KT(n,i.path,t),HT(n,i.route,t))),Hn(i=>i!==!0,!0))}function GT(n,e){return n!==null&&e&&e(new $d(n)),q(!0)}function WT(n,e){return n!==null&&e&&e(new Bd(n)),q(!0)}function HT(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>Qu(()=>{let s=bs(e)??t,c=Li(o,s),l=VT(c)?c.canActivate(e,n):_n(s,()=>c(e,n));return tr(l).pipe(Hn())}));return q(i).pipe(Vi())}function KT(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>MT(s)).filter(s=>s!==null).map(s=>Qu(()=>{let c=s.guards.map(l=>{let d=bs(s.node)??t,f=Li(l,d),p=LT(f)?f.canActivateChild(r,n):_n(d,()=>f(r,n));return tr(p).pipe(Hn())});return q(c).pipe(Vi())}));return q(o).pipe(Vi())}function QT(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(c=>{let l=bs(e)??i,d=Li(c,l),f=UT(d)?d.canDeactivate(n,e,t,r):_n(l,()=>d(n,e,t,r));return tr(f).pipe(Hn())});return q(s).pipe(Vi())}function YT(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let c=Li(s,n),l=FT(c)?c.canLoad(e,t):_n(n,()=>c(e,t));return tr(l)});return q(o).pipe(Vi(),Jv(r))}function Jv(n){return zu(Ee(e=>{if(typeof e!="boolean")throw hc(n,e)}),G(e=>e===!0))}function JT(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let c=Li(s,n),l=jT(c)?c.canMatch(e,t):_n(n,()=>c(e,t));return tr(l)});return q(o).pipe(Vi(),Jv(r))}var _s=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},vs=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Di(n){return Dr(new _s(n))}function XT(n){return Dr(new me(4e3,!1))}function ZT(n){return Dr(Kv(!1,At.GuardRejected))}var Jd=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[X])return XT(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:l,fragment:d,routeConfig:f,url:p,outlet:b,params:S,data:k,title:L}=i,N=_n(o,()=>c({params:S,data:k,queryParams:l,fragment:d,routeConfig:f,url:p,outlet:b,title:L}));if(N instanceof En)throw new vs(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new vs(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new En(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,r,i)}),new ue(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new me(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Xd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eA(n,e,t,r,i){let o=Xv(n,e,t);return o.matched?(r=IT(e,r),JT(r,e,t,i).pipe(G(s=>s===!0?o:V({},Xd)))):q(o)}function Xv(n,e,t){if(e.path==="**")return tA(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Xd):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Y0)(t,n,e);if(!i)return V({},Xd);let o={};Object.entries(i.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tA(n){return{matched:!0,parameters:n.length>0?Pv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Cv(n,e,t,r){return t.length>0&&iA(n,t,r)?{segmentGroup:new ue(e,rA(r,new ue(t,n.children))),slicedSegments:[]}:t.length===0&&oA(n,t,r)?{segmentGroup:new ue(n.segments,nA(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ue(n.segments,n.children),slicedSegments:t}}function nA(n,e,t,r){let i={};for(let o of t)if(gc(n,e,o)&&!r[qt(o)]){let s=new ue([],{});i[qt(o)]=s}return V(V({},r),i)}function rA(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&qt(r)!==X){let i=new ue([],{});t[qt(r)]=i}return t}function iA(n,e,t){return t.some(r=>gc(n,e,r)&&qt(r)!==X)}function oA(n,e,t){return t.some(r=>gc(n,e,r))}function gc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sA(n,e,t){return e.length===0&&!n.children[t]}var Zd=class{};function aA(n,e,t,r,i,o,s="emptyOnly"){return new eh(n,e,t,r,i,s,o).recognize()}var cA=31,eh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Jd(this.urlSerializer,this.urlTree)}noMatchError(e){return new me(4002,`'${e.segmentGroup}'`)}recognize(){let e=Cv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Tt(r,t),o=new dc("",i),s=pT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ki([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(G(r=>({children:r,rootSnapshot:t})),Wn(r=>{if(r instanceof vs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _s?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Tt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return mt(o).pipe(Pr(s=>{let c=r.children[s],l=ET(t,s);return this.processSegmentGroup(e,l,c,s,i)}),Zu((s,c)=>(s.push(...c),s)),Yu(null),a_(),Pt(s=>{if(s===null)return Di(r);let c=Zv(s);return lA(c),q(c)}))}processSegment(e,t,r,i,o,s,c){return mt(t).pipe(Pr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,c).pipe(Wn(d=>{if(d instanceof _s)return q(null);throw d}))),Hn(l=>!!l),Wn(l=>{if(Yv(l))return sA(r,i,o)?q(new Zd):Di(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,l){return qt(r)!==s&&(s===X||!gc(i,o,r))?Di(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Di(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:l,parameters:d,consumedSegments:f,positionalParamSegments:p,remainingSegments:b}=Xv(t,i,o);if(!l)return Di(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cA&&(this.allowRedirects=!1));let S=new ki(o,d,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Sv(i),qt(i),i.component??i._loadedComponent??null,i,xv(i)),k=uc(S,c,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let L=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,S,e);return this.applyRedirects.lineralizeSegments(i,L).pipe(Pt(N=>this.processSegment(e,r,t,N.concat(b),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=eA(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Mt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mt(({routes:d})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:b,remainingSegments:S}=l,k=new ki(b,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Sv(r),qt(r),r.component??r._loadedComponent??null,r,xv(r)),L=uc(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(L.params),k.data=Object.freeze(L.data);let{segmentGroup:N,slicedSegments:K}=Cv(t,b,S,d);if(K.length===0&&N.hasChildren())return this.processChildren(f,d,N,k).pipe(G(Z=>new Tt(k,Z)));if(d.length===0&&K.length===0)return q(new Tt(k,[]));let ee=qt(r)===o;return this.processSegment(f,d,N,K,ee?X:o,!0,k).pipe(G(Z=>new Tt(k,Z instanceof Tt?[Z]:[])))}))):Di(t)))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):YT(e,t,r,this.urlSerializer).pipe(Pt(i=>i?this.configLoader.loadChildren(e,t).pipe(Ee(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ZT(t))):q({routes:[],injector:e})}};function lA(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function uA(n){let e=n.value.routeConfig;return e&&e.path===""}function Zv(n){let e=[],t=new Set;for(let r of n){if(!uA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Zv(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!t.has(r))}function Sv(n){return n.data||{}}function xv(n){return n.resolve||{}}function dA(n,e,t,r,i,o){return Pt(s=>aA(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:c,tree:l})=>ie(V({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function hA(n,e){return Pt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let d of ey(l))s.add(d);let c=0;return mt(s).pipe(Pr(l=>o.has(l)?fA(l,r,n,e):(l.data=uc(l,l.parent,n).resolve,q(void 0))),Ee(()=>c++),Ju(1),Pt(l=>c===s.size?q(t):qn))})}function ey(n){let e=n.children.map(t=>ey(t)).flat();return[n,...e]}function fA(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Wv(i)&&(o[ys]=i.title),mA(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=uc(n,n.parent,t).resolve,null)))}function mA(n,e,t,r){let i=Dd(n);if(i.length===0)return q({});let o={};return mt(i).pipe(Pt(s=>pA(n[s],e,t,r).pipe(Hn(),Ee(c=>{if(c instanceof gs)throw hc(new us,c);o[s]=c}))),Ju(1),s_(o),Wn(s=>Yv(s)?qn:Dr(s)))}function pA(n,e,t,r){let i=bs(e)??r,o=Li(n,i),s=o.resolve?o.resolve(e,t):_n(i,()=>o(e,t));return tr(s)}function xd(n){return Mt(e=>{let t=n(e);return t?mt(t).pipe(G(()=>e)):q(e)})}var ty=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[ys]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>D(gA),providedIn:"root"})}return n})(),gA=(()=>{class n extends ty{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ne(yv))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ih=new Q("",{providedIn:"root",factory:()=>({})}),_A=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&pe(0,"router-outlet")},dependencies:[ws],encapsulation:2})}return n})();function oh(n){let e=n.children&&n.children.map(oh),t=e?ie(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=_A),t}var sh=new Q(""),vA=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(sd);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=tr(t.loadComponent()).pipe(G(ny),Ee(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Mr(()=>{this.componentLoaders.delete(t)})),i=new qu(r,()=>new Xe).pipe($u());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yA(r,this.compiler,t,this.onLoadEndListener).pipe(Mr(()=>{this.childrenLoaders.delete(r)})),s=new qu(o,()=>new Xe).pipe($u());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yA(n,e,t,r){return tr(n.loadChildren()).pipe(G(ny),Pt(i=>i instanceof P_||Array.isArray(i)?q(i):mt(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(sh,[],{optional:!0,self:!0}).flat()),{routes:s.map(oh),injector:o}}))}function bA(n){return n&&typeof n=="object"&&"default"in n}function ny(n){return bA(n)?n.default:n}var ah=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>D(wA),providedIn:"root"})}return n})(),wA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IA=new Q("");var EA=new Q(""),TA=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Xe;transitionAbortSubject=new Xe;configLoader=D(vA);environmentInjector=D(Wo);urlSerializer=D(nh);rootContexts=D(mc);location=D(Ka);inputBindingEnabled=D(pc,{optional:!0})!==null;titleStrategy=D(ty);options=D(ih,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(ah);createViewTransition=D(IA,{optional:!0});navigationErrorHandler=D(EA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new Ud(i)),r=i=>this.events.next(new jd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ie(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cs,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(o=>o.id!==0),G(o=>ie(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Mt(o=>{let s=!1,c=!1;return q(o).pipe(Mt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),qn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ie(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let p="";return this.events.next(new Br(l.id,this.urlSerializer.serialize(l.rawUrl),p,Nd.IgnoredSameUrlNavigation)),l.resolve(!1),qn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return q(l).pipe(Mt(p=>{let b=this.transitions?.getValue();return this.events.next(new hs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),b!==this.transitions?.getValue()?qn:Promise.resolve(p)}),dA(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ee(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ie(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let b=new ac(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(b)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:b,source:S,restoredState:k,extras:L}=l,N=new hs(p,this.urlSerializer.serialize(b),S,k);this.events.next(N);let K=qv(this.rootComponentType).snapshot;return this.currentTransition=o=ie(V({},l),{targetSnapshot:K,urlAfterRedirects:b,extras:ie(V({},L),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,q(o)}else{let p="";return this.events.next(new Br(l.id,this.urlSerializer.serialize(l.extractedUrl),p,Nd.IgnoredByUrlHandlingStrategy)),l.resolve(!1),qn}}),Ee(l=>{let d=new Od(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),G(l=>(this.currentTransition=o=ie(V({},l),{guards:PT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),zT(this.environmentInjector,l=>this.events.next(l)),Ee(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw hc(this.urlSerializer,l.guardsResult);let d=new Fd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),wt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",At.GuardRejected),!1)),xd(l=>{if(l.guards.canActivateChecks.length)return q(l).pipe(Ee(d=>{let f=new Vd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Mt(d=>{let f=!1;return q(d).pipe(hA(this.paramsInheritanceStrategy,this.environmentInjector),Ee({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",At.NoDataFromResolver)}}))}),Ee(d=>{let f=new Ld(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),xd(l=>{let d=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ee(b=>{f.component=b}),G(()=>{})));for(let b of f.children)p.push(...d(b));return p};return Gn(d(l.targetSnapshot.root)).pipe(Yu(null),Jt(1))}),xd(()=>this.afterPreactivation()),Mt(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?mt(f).pipe(G(()=>o)):q(o)}),G(l=>{let d=CT(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ie(V({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Ee(()=>{this.events.next(new ms)}),DT(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Jt(1),Ee({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new er(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),gn(this.transitionAbortSubject.pipe(Ee(l=>{throw l}))),Mr(()=>{!s&&!c&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wn(l=>{if(c=!0,Qv(l))this.events.next(new In(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),RT(l)?this.events.next(new Fi(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new fs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=_n(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof gs){let{message:p,cancellationCode:b}=hc(this.urlSerializer,f);this.events.next(new In(o.id,this.urlSerializer.serialize(o.extractedUrl),p,b)),this.events.next(new Fi(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(d),l}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return qn}))}))}cancelNavigationTransition(t,r,i){let o=new In(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AA(n){return n!==cs}var CA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>D(SA),providedIn:"root"})}return n})(),th=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},SA=(()=>{class n extends th{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})();static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ry=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>D(xA),providedIn:"root"})}return n})(),xA=(()=>{class n extends ry{location=D(Ka);urlSerializer=D(nh);options=D(ih,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=D(ah);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new En;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=qv(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof hs)this.stateMemento=this.createStateMemento();else if(t instanceof Br)this.rawUrlTree=r.initialUrl;else if(t instanceof ac){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ms?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof In&&(t.code===At.GuardRejected||t.code===At.NoDataFromResolver)?this.restoreHistory(r):t instanceof fs?this.restoreHistory(r,!0):t instanceof er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof En?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})();static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ss=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ss||{});function RA(n,e){n.events.pipe(wt(t=>t instanceof er||t instanceof In||t instanceof fs||t instanceof Br),G(t=>t instanceof er||t instanceof Br?ss.COMPLETE:(t instanceof In?t.code===At.Redirect||t.code===At.SupersededByNewNavigation:!1)?ss.REDIRECTING:ss.FAILED),wt(t=>t!==ss.REDIRECTING),Jt(1)).subscribe(()=>{e()})}var DA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ct=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(za);stateManager=D(ry);options=D(ih,{optional:!0})||{};pendingTasks=D(p_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(TA);urlSerializer=D(nh);location=D(Ka);urlHandlingStrategy=D(ah);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(CA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(sh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(pc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _i;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof In&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof er)this.navigated=!0;else if(r instanceof Fi){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||AA(i.source)},s);this.scheduleNavigation(c,cs,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}kA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=V({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let b=i?i.snapshot:this.routerState.snapshot.root;p=jv(b)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Bv(p,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=jr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cs,null,r)}navigate(t,r={skipLocationChange:!1}){return MA(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},DA):r===!1?i=V({},PA):i=r,jr(t))return wv(this.currentUrlTree,t,i);let o=this.parseUrl(t);return wv(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,d;s?(c=s.resolve,l=s.reject,d=s.promise):d=new Promise((p,b)=>{c=p,l=b});let f=this.pendingTasks.add();return RA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MA(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new me(4008,!1)}function kA(n){return!(n instanceof ms)&&!(n instanceof Fi)}var nr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Xe;constructor(t,r,i,o,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof er&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(jr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:x_(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:jr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(be(Ct),be(zr),f_("tabindex"),be(Xo),be(st),be(ad))};static \u0275dir=ce({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&we("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&jt("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",$t],skipLocationChange:[2,"skipLocationChange","skipLocationChange",$t],replaceUrl:[2,"replaceUrl","replaceUrl",$t],routerLink:"routerLink"},features:[Vr,Nr]})}return n})();var NA=new Q("");function iy(n,...e){return Ut([{provide:sh,multi:!0,useValue:n},[],{provide:zr,useFactory:OA,deps:[Ct]},{provide:k_,multi:!0,useFactory:VA},e.map(t=>t.\u0275providers)])}function OA(n){return n.routerState.root}function FA(n,e){return{\u0275kind:n,\u0275providers:e}}function VA(){let n=D(It);return e=>{let t=n.get(rd);if(e!==t.components[0])return;let r=n.get(Ct),i=n.get(LA);n.get(UA)===1&&r.initialNavigation(),n.get(jA,null,ed.Optional)?.setUpPreloading(),n.get(NA,null,ed.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var LA=new Q("",{factory:()=>new Xe}),UA=new Q("",{providedIn:"root",factory:()=>1});var jA=new Q("");function oy(){return FA(8,[Av,{provide:pc,useExisting:Av}])}var ay=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zA=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,b=(c&15)<<2|d>>6,S=d&63;l||(S=64,s||(b=64)),r.push(t[f],t[p],t[b],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ay(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||p==null)throw new lh;let b=o<<2|c>>4;if(r.push(b),d!==64){let S=c<<4&240|d>>2;if(r.push(S),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},lh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$A=function(n){let e=ay(n);return cy.encodeByteArray(e,!0)},Es=function(n){return $A(n).replace(/\./g,"")},dh=function(n){try{return cy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GA=()=>qA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&dh(n[1]);return e&&JSON.parse(e)},vc=()=>{try{return GA()||WA()||HA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hh=n=>{var e,t;return(t=(e=vc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ly=n=>{let e=hh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fh=()=>{var n;return(n=vc())===null||n===void 0?void 0:n.config},mh=n=>{var e;return(e=vc())===null||e===void 0?void 0:e[`_${n}`]};var _c=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function uy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Es(JSON.stringify(t)),Es(JSON.stringify(s)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function KA(){var n;let e=(n=vc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function my(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function py(){let n=Ke();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gy(){return!KA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ph(){try{return typeof indexedDB=="object"}catch{return!1}}function _y(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var QA="FirebaseError",St=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=QA,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}},Tn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YA(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new St(i,c,r)}};function YA(n,e){return n.replace(JA,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var JA=/\{\$([^}]+)}/g;function vy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $r(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(sy(o)&&sy(s)){if(!$r(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function sy(n){return n!==null&&typeof n=="object"}function Ts(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ui(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ji(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yy(n,e){let t=new uh(n,e);return t.subscribe.bind(t)}var uh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ch),i.error===void 0&&(i.error=ch),i.complete===void 0&&(i.complete=ch);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function XA(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ch(){}var BN=4*60*60*1e3;function Ne(n){return n&&n._delegate?n._delegate:n}var Nt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qr="[DEFAULT]";var gh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new _c;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZA(n){return n===qr?void 0:n}function eC(n){return n.instantiationMode==="EAGER"}var yc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new gh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tC=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),nC={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},rC=te.INFO,iC={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},oC=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iC[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},rr=class{constructor(e){this.name=e,this._logLevel=rC,this._logHandler=oC,this._userLogHandler=null,tC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var sC=(n,e)=>e.some(t=>n instanceof t),by,wy;function aC(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cC(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Iy=new WeakMap,vh=new WeakMap,Ey=new WeakMap,_h=new WeakMap,bh=new WeakMap;function lC(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(en(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Iy.set(t,n)}).catch(()=>{}),bh.set(e,n),e}function uC(n){if(vh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});vh.set(n,e)}var yh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ey.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return en(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ty(n){yh=n(yh)}function dC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(bc(this),e,...t);return Ey.set(r,e.sort?e.sort():[e]),en(r)}:cC().includes(n)?function(...e){return n.apply(bc(this),e),en(Iy.get(this))}:function(...e){return en(n.apply(bc(this),e))}}function hC(n){return typeof n=="function"?dC(n):(n instanceof IDBTransaction&&uC(n),sC(n,aC())?new Proxy(n,yh):n)}function en(n){if(n instanceof IDBRequest)return lC(n);if(_h.has(n))return _h.get(n);let e=hC(n);return e!==n&&(_h.set(n,e),bh.set(e,n)),e}var bc=n=>bh.get(n);function Cy(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=en(s);return r&&s.addEventListener("upgradeneeded",l=>{r(en(s.result),l.oldVersion,l.newVersion,en(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var fC=["get","getKey","getAll","getAllKeys","count"],mC=["put","add","delete","clear"],wh=new Map;function Ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wh.get(e))return wh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=mC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fC.includes(t)))return;let o=function(s,...c){return g(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return wh.set(e,o),o}Ty(n=>ie(V({},n),{get:(e,t,r)=>Ay(e,t)||n.get(e,t,r),has:(e,t)=>!!Ay(e,t)||n.has(e,t)}));var Eh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pC(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function pC(n){let e=n.getComponent();return e?.type==="VERSION"}var Th="@firebase/app",Sy="0.10.16";var An=new rr("@firebase/app"),gC="@firebase/app-compat",_C="@firebase/analytics-compat",vC="@firebase/analytics",yC="@firebase/app-check-compat",bC="@firebase/app-check",wC="@firebase/auth",IC="@firebase/auth-compat",EC="@firebase/database",TC="@firebase/data-connect",AC="@firebase/database-compat",CC="@firebase/functions",SC="@firebase/functions-compat",xC="@firebase/installations",RC="@firebase/installations-compat",DC="@firebase/messaging",PC="@firebase/messaging-compat",MC="@firebase/performance",kC="@firebase/performance-compat",NC="@firebase/remote-config",OC="@firebase/remote-config-compat",FC="@firebase/storage",VC="@firebase/storage-compat",LC="@firebase/firestore",UC="@firebase/vertexai",jC="@firebase/firestore-compat",BC="firebase",zC="11.0.2";var Ah="[DEFAULT]",$C={[Th]:"fire-core",[gC]:"fire-core-compat",[vC]:"fire-analytics",[_C]:"fire-analytics-compat",[bC]:"fire-app-check",[yC]:"fire-app-check-compat",[wC]:"fire-auth",[IC]:"fire-auth-compat",[EC]:"fire-rtdb",[TC]:"fire-data-connect",[AC]:"fire-rtdb-compat",[CC]:"fire-fn",[SC]:"fire-fn-compat",[xC]:"fire-iid",[RC]:"fire-iid-compat",[DC]:"fire-fcm",[PC]:"fire-fcm-compat",[MC]:"fire-perf",[kC]:"fire-perf-compat",[NC]:"fire-rc",[OC]:"fire-rc-compat",[FC]:"fire-gcs",[VC]:"fire-gcs-compat",[LC]:"fire-fst",[jC]:"fire-fst-compat",[UC]:"fire-vertex","fire-js":"fire-js",[BC]:"fire-js-all"};var As=new Map,qC=new Map,Ch=new Map;function xy(n,e){try{n.container.addComponent(e)}catch(t){An.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function or(n){let e=n.name;if(Ch.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Ch.set(e,n);for(let t of As.values())xy(t,n);for(let t of qC.values())xy(t,n);return!0}function Ss(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gt(n){return n.settings!==void 0}var GC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Tn("app","Firebase",GC);var Sh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}};var sr=zC;function Dh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ah,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ir.create("bad-app-name",{appName:String(i)});if(t||(t=fh()),!t)throw ir.create("no-options");let o=As.get(i);if(o){if($r(t,o.options)&&$r(r,o.config))return o;throw ir.create("duplicate-app",{appName:i})}let s=new yc(i);for(let l of Ch.values())s.addComponent(l);let c=new Sh(t,r,s);return As.set(i,c),c}function Bi(n=Ah){let e=As.get(n);if(!e&&n===Ah&&fh())return Dh();if(!e)throw ir.create("no-app",{appName:n});return e}function wc(){return Array.from(As.values())}function $e(n,e,t){var r;let i=(r=$C[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(c.join(" "));return}or(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var WC="firebase-heartbeat-database",HC=1,Cs="firebase-heartbeat-store",Ih=null;function My(){return Ih||(Ih=Cy(WC,HC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cs)}catch(t){console.warn(t)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),Ih}function KC(n){return g(this,null,function*(){try{let t=(yield My()).transaction(Cs),r=yield t.objectStore(Cs).get(ky(n));return yield t.done,r}catch(e){if(e instanceof St)An.warn(e.message);else{let t=ir.create("idb-get",{originalErrorMessage:e?.message});An.warn(t.message)}}})}function Ry(n,e){return g(this,null,function*(){try{let r=(yield My()).transaction(Cs,"readwrite");yield r.objectStore(Cs).put(e,ky(n)),yield r.done}catch(t){if(t instanceof St)An.warn(t.message);else{let r=ir.create("idb-set",{originalErrorMessage:t?.message});An.warn(r.message)}}})}function ky(n){return`${n.name}!${n.options.appId}`}var QC=1024,YC=30*24*60*60*1e3,xh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Rh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Dy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=YC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){An.warn(r)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Dy(),{heartbeatsToSend:r,unsentEntries:i}=JC(this._heartbeatsCache.heartbeats),o=Es(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return An.warn(t),""}})}};function Dy(){return new Date().toISOString().substring(0,10)}function JC(n,e=QC){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Py(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Py(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Rh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return ph()?_y().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield KC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ry(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ry(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Py(n){return Es(JSON.stringify({version:2,heartbeats:n})).length}function XC(n){or(new Nt("platform-logger",e=>new Eh(e),"PRIVATE")),or(new Nt("heartbeat",e=>new xh(e),"PRIVATE")),$e(Th,Sy,n),$e(Th,Sy,"esm2017"),$e("fire-js","")}XC("");var ZC="firebase",eS="11.0.2";$e(ZC,eS,"app");var Wr=new Si("ANGULARFIRE2_VERSION");function Ec(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Rs=(n,e)=>{let t=e?[e]:wc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zi=class{constructor(){return Rs(tS)}},tS="app-check",Ic=class{zone;delegate;constructor(e,t=t_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ph=class{zone;pendingTasks;constructor(e,t){this.zone=e,this.pendingTasks=t}call(e,t){let r=this.zone.run(()=>this.pendingTasks.add()),i=()=>setTimeout(r,10);return t.pipe(Ee({next:i,complete:i,error:i})).subscribe(e).add(i)}},$i=(()=>{class n{ngZone;pendingTasks;outsideAngular;insideAngular;constructor(t,r){this.ngZone=t,this.pendingTasks=r,this.outsideAngular=t.runOutsideAngular(()=>new Ic(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ic(typeof Zone>"u"?void 0:Zone.current,e_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ne(_e),ne(g_))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xs(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function nS(n){return xs().ngZone.runOutsideAngular(()=>n())}function Gr(n){return xs().ngZone.run(()=>n())}function rS(n){return iS(xs())(n)}function iS(n){return function(t){return t=t.lift(new Ph(n.ngZone,n.pendingTasks)),t.pipe(Hu(n.outsideAngular),Wu(n.insideAngular))}}var oS=(n,e)=>(...t)=>(e&&setTimeout(e,10),Gr(()=>n.apply(void 0,t))),Oe=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Gr(()=>xs().pendingTasks.add())),r[o]=oS(r[o],t));let i=nS(()=>n.apply(this,r));if(!e)if(i instanceof Yt){let o=xs();return i.pipe(Hu(o.outsideAngular),Wu(o.insideAngular))}else return Gr(()=>i);return i instanceof Yt?i.pipe(rS):i instanceof Promise?Gr(()=>new Promise((o,s)=>{i.then(c=>Gr(()=>o(c)),c=>Gr(()=>s(c)))})):typeof i=="function"&&t?function(){return setTimeout(t,10),i.apply(this,arguments)}:Gr(()=>i)};var Cn=class{constructor(e){return e}},Hr=class{constructor(){return wc()}};function sS(n){return n&&n.length===1?n[0]:new Cn(Bi())}var Mh=new Q("angularfire2._apps"),aS={provide:Cn,useFactory:sS,deps:[[new pt,Mh]]},cS={provide:Hr,deps:[[new pt,Mh]]};function lS(n){return(e,t)=>{let r=t.get(vn);$e("angularfire",Wr.full,"core"),$e("angularfire",Wr.full,"app"),$e("angular",B_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Cn(i)}}function Ny(n,...e){return Ut([aS,cS,{provide:Mh,useFactory:lS(n),multi:!0,deps:[_e,It,$i,...e]}])}var Oy=Oe(Dh,!0);function Jy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Xy=Jy,Zy=new Tn("auth","Firebase",Jy());var Rc=new rr("@firebase/auth");function uS(n,...e){Rc.logLevel<=te.WARN&&Rc.warn(`Auth (${sr}): ${n}`,...e)}function Ac(n,...e){Rc.logLevel<=te.ERROR&&Rc.error(`Auth (${sr}): ${n}`,...e)}function nn(n,...e){throw rf(n,...e)}function Kr(n,...e){return rf(n,...e)}function eb(n,e,t){let r=Object.assign(Object.assign({},Xy()),{[e]:t});return new Tn("auth","Firebase",r).create(e,{appName:n.name})}function Rn(n){return eb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rf(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Zy.create(n,...e)}function H(n,e,...t){if(!n)throw rf(e,...t)}function Sn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ac(e),new Error(e)}function cr(n,e){n||Sn(e)}function Fh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dS(){return Fy()==="http:"||Fy()==="https:"}function Fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function hS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dS()||fy()||"connection"in navigator)?navigator.onLine:!0}function fS(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Qr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,cr(t>e,"Short delay should be less than long delay!"),this.isMobile=dy()||my()}get(){return hS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function of(n,e){cr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Dc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var pS=new Qr(3e4,6e4);function lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ur(o,s,c,l){return g(this,arguments,function*(n,e,t,r,i={}){return tb(n,i,()=>g(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let p=Ts(Object.assign({key:n.config.apiKey},f)).slice(1),b=yield n._getAdditionalHeaders();b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:b},d);return hy()||(S.referrerPolicy="no-referrer"),Dc.fetch()(nb(n,n.config.apiHost,t,p),S)}))})}function tb(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},mS),e);try{let i=new Vh(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Tc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Tc(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Tc(n,"user-disabled",s);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw eb(n,f,d);nn(n,f)}}catch(i){if(i instanceof St)throw i;nn(n,"network-request-failed",{message:String(i)})}})}function Ls(o,s,c,l){return g(this,arguments,function*(n,e,t,r,i={}){let d=yield ur(n,e,t,r,i);return"mfaPendingCredential"in d&&nn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function nb(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?of(n.config,i):`${n.config.apiScheme}://${i}`}function gS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Vh=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),pS.get())})}};function Tc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Kr(n,e,r);return i.customData._tokenResponse=t,i}function Vy(n){return n!==void 0&&n.enterprise!==void 0}var Lh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function _S(n,e){return g(this,null,function*(){return ur(n,"GET","/v2/recaptchaConfig",lr(n,e))})}function vS(n,e){return g(this,null,function*(){return ur(n,"POST","/v1/accounts:delete",e)})}function rb(n,e){return g(this,null,function*(){return ur(n,"POST","/v1/accounts:lookup",e)})}function Ps(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sf(n,e=!1){return g(this,null,function*(){let t=Ne(n),r=yield t.getIdToken(e),i=af(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ps(kh(i.auth_time)),issuedAtTime:Ps(kh(i.iat)),expirationTime:Ps(kh(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function kh(n){return Number(n)*1e3}function af(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ac("JWT malformed, contained fewer than 3 sections"),null;try{let i=dh(t);return i?JSON.parse(i):(Ac("Failed to decode base64 JWT payload"),null)}catch(i){return Ac("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ly(n){let e=af(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ks(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof St&&yS(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function yS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Uh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ns=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ps(this.lastLoginAt),this.creationTime=Ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Pc(n){return g(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ks(n,rb(t,{idToken:r}));H(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ib(o.providerUserInfo):[],c=bS(n.providerData,s),l=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!c?.length,f=l?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ns(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function cf(n){return g(this,null,function*(){let e=Ne(n);yield Pc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function bS(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ib(n){return n.map(e=>{var{providerId:t}=e,r=Gu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wS(n,e){return g(this,null,function*(){let t=yield tb(n,{},()=>g(this,null,function*(){let r=Ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=nb(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Dc.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function IS(n,e){return g(this,null,function*(){return ur(n,"POST","/v2/accounts:revokeToken",lr(n,e))})}var Ms=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=Ly(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield wS(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(H(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Sn("not implemented")}};function ar(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var qi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Gu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ns(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield ks(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return sf(this,e)}reload(){return cf(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Pc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Gt(this.auth.app))return Promise.reject(Rn(this.auth));let e=yield this.getIdToken();return yield ks(this,vS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,l,d,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(i=t.email)!==null&&i!==void 0?i:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,L=(c=t.tenantId)!==null&&c!==void 0?c:void 0,N=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,K=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ee=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Z,emailVerified:ve,isAnonymous:dt,providerData:he,stsTokenManager:I}=t;H(Z&&I,e,"internal-error");let _=Ms.fromJSON(this.name,I);H(typeof Z=="string",e,"internal-error"),ar(p,e.name),ar(b,e.name),H(typeof ve=="boolean",e,"internal-error"),H(typeof dt=="boolean",e,"internal-error"),ar(S,e.name),ar(k,e.name),ar(L,e.name),ar(N,e.name),ar(K,e.name),ar(ee,e.name);let y=new n({uid:Z,auth:e,email:b,emailVerified:ve,displayName:p,isAnonymous:dt,photoURL:k,phoneNumber:S,tenantId:L,stsTokenManager:_,createdAt:K,lastLoginAt:ee});return he&&Array.isArray(he)&&(y.providerData=he.map(w=>Object.assign({},w))),N&&(y._redirectEventId=N),y}static _fromIdTokenResponse(e,t,r=!1){return g(this,null,function*(){let i=new Ms;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Pc(o),o})}static _fromGetAccountInfoResponse(e,t,r){return g(this,null,function*(){let i=t.users[0];H(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?ib(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Ms;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ns(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,d),l})}};var Uy=new Map;function xn(n){cr(n instanceof Function,"Expected a class definition");let e=Uy.get(n);return e?(cr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Uy.set(n,e),e)}var ES=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(t,r){return g(this,null,function*(){this.storage[t]=r})}_get(t){return g(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return g(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),jh=ES;function Cc(n,e,t){return`firebase:${n}:${e}:${t}`}var Mc=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Cc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Cc("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?qi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(this,null,function*(){if(!t.length)return new n(xn(jh),e,r);let i=(yield Promise.all(t.map(d=>g(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||xn(jh),s=Cc(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(s);if(f){let p=qi._fromJSON(e,f);d!==o&&(c=p),o=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(d=>g(this,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function jy(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ub(e))return"Blackberry";if(db(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(lb(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ob(n=Ke()){return/firefox\//i.test(n)}function sb(n=Ke()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(n=Ke()){return/crios\//i.test(n)}function cb(n=Ke()){return/iemobile/i.test(n)}function lb(n=Ke()){return/android/i.test(n)}function ub(n=Ke()){return/blackberry/i.test(n)}function db(n=Ke()){return/webos/i.test(n)}function lf(n=Ke()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function TS(n=Ke()){var e;return lf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AS(){return py()&&document.documentMode===10}function hb(n=Ke()){return lf(n)||lb(n)||db(n)||ub(n)||/windows phone/i.test(n)||cb(n)}function fb(n,e=[]){let t;switch(n){case"Browser":t=jy(Ke());break;case"Worker":t=`${jy(Ke())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sr}/${r}`}var Bh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let l=e(o);s(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function CS(t){return g(this,arguments,function*(n,e={}){return ur(n,"GET","/v2/passwordPolicy",lr(n,e))})}var SS=6,zh=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:SS,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var $h=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kc(this),this.idTokenSubscription=new kc(this),this.beforeStateQueue=new Bh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xn(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Mc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield rb(this,{idToken:e}),r=yield qi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var t;if(Gt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===c)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Pc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fS()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Gt(this.app))return Promise.reject(Rn(this));let t=e?Ne(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Gt(this.app)?Promise.reject(Rn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Gt(this.app)?Promise.reject(Rn(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield CS(this),t=new zh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield IS(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&xn(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=yield Mc.create(this,[xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return g(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&uS(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Jr(n){return Ne(n)}var kc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yy(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jc={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xS(n){jc=n}function mb(n){return jc.loadJS(n)}function RS(){return jc.recaptchaEnterpriseScript}function DS(){return jc.gapiScript}function pb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var qh=class{constructor(){this.enterprise=new Gh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Gh=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var PS="recaptcha-enterprise",gb="NO_RECAPTCHA",Wh=class{constructor(e){this.type=PS,this.auth=Jr(e)}verify(e="verify",t=!1){return g(this,null,function*(){function r(o){return g(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>g(this,null,function*(){_S(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new Lh(l);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(l=>{c(l)})}))})}function i(o,s,c){let l=window.grecaptcha;Vy(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(gb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qh().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!t&&Vy(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RS();l.length!==0&&(l+=c),mb(l).then(()=>{i(c,o,s)}).catch(d=>{s(d)})}}).catch(c=>{s(c)})})})}};function Ds(n,e,t,r=!1,i=!1){return g(this,null,function*(){let o=new Wh(n),s;if(i)s=gb;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let l=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Hh(n,e,t,r,i){return g(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Ds(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(c=>g(this,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=yield Ds(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let c=yield Ds(n,e,t);return r(n,c).catch(l=>g(this,null,function*(){var d;if(((d=n._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let f=yield Ds(n,e,t,!1,!0);return r(n,f)}return Promise.reject(l)}))}else{let c=yield Ds(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(i+" provider is not supported.")})}function uf(n,e){let t=Ss(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if($r(o,e??{}))return i;nn(i,"already-initialized")}return t.initialize({options:e})}function MS(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function df(n,e,t){let r=Jr(n);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=_b(e),{host:s,port:c}=kS(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||NS()}function _b(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kS(n){let e=_b(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:By(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:By(s)}}}function By(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function NS(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Os=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,t){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}};function OS(n,e){return g(this,null,function*(){return ur(n,"POST","/v1/accounts:signUp",e)})}function FS(n,e){return g(this,null,function*(){return Ls(n,"POST","/v1/accounts:signInWithPassword",lr(n,e))})}function VS(n,e){return g(this,null,function*(){return Ls(n,"POST","/v1/accounts:signInWithEmailLink",lr(n,e))})}function LS(n,e){return g(this,null,function*(){return Ls(n,"POST","/v1/accounts:signInWithEmailLink",lr(n,e))})}var Fs=class n extends Os{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return g(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,t,"signInWithPassword",FS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return VS(e,{email:this._email,oobCode:this._password});default:nn(e,"internal-error")}})}_linkToIdToken(e,t){return g(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,r,"signUpPassword",OS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LS(e,{idToken:t,email:this._email,oobCode:this._password});default:nn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Nh(n,e){return g(this,null,function*(){return Ls(n,"POST","/v1/accounts:signInWithIdp",lr(n,e))})}function US(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jS(n){let e=Ui(ji(n)).link,t=e?Ui(ji(e)).deep_link_id:null,r=Ui(ji(n)).deep_link_id;return(r?Ui(ji(r)).link:null)||r||t||e||n}var Nc=class n{constructor(e){var t,r,i,o,s,c;let l=Ui(ji(e)),d=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,p=US((i=l.mode)!==null&&i!==void 0?i:null);H(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=jS(e);try{return new n(t)}catch{return null}}};var vb=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Fs._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Nc.parseLink(r);return H(i,"argument-error"),Fs._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Oc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Kh=class extends Oc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function BS(n,e){return g(this,null,function*(){return Ls(n,"POST","/v1/accounts:signUp",lr(n,e))})}var Gi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(this,null,function*(){let o=yield qi._fromIdTokenResponse(e,r,i),s=zy(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return g(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=zy(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function zy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Qh=class n extends St{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function yb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(n,o,e,r):o})}function zS(n,e,t=!1){return g(this,null,function*(){let r=yield ks(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Gi._forOperation(n,"link",r)})}function $S(n,e,t=!1){return g(this,null,function*(){let{auth:r}=n;if(Gt(r.app))return Promise.reject(Rn(r));let i="reauthenticate";try{let o=yield ks(n,yb(r,i,e,n),t);H(o.idToken,r,"internal-error");let s=af(o.idToken);H(s,r,"internal-error");let{sub:c}=s;return H(n.uid===c,r,"user-mismatch"),Gi._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&nn(r,"user-mismatch"),o}})}function bb(n,e,t=!1){return g(this,null,function*(){if(Gt(n.app))return Promise.reject(Rn(n));let r="signIn",i=yield yb(n,r,e),o=yield Gi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function hf(n,e){return g(this,null,function*(){return bb(Jr(n),e)})}function wb(n){return g(this,null,function*(){let e=Jr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ff(n,e,t){return g(this,null,function*(){if(Gt(n.app))return Promise.reject(Rn(n));let r=Jr(n),s=yield Hh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BS,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wb(n),l}),c=yield Gi._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function mf(n,e,t){return Gt(n.app)?Promise.reject(Rn(n)):hf(Ne(n),vb.credential(e,t)).catch(r=>g(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&wb(n),r}))}function pf(n,e,t,r){return Ne(n).onIdTokenChanged(e,t,r)}function gf(n,e,t){return Ne(n).beforeAuthStateChanged(e,t)}function _f(n,e,t,r){return Ne(n).onAuthStateChanged(e,t,r)}function vf(n){return Ne(n).signOut()}var Fc="__sak";var Vc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qS=1e3,GS=10,WS=(()=>{class n extends Vc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);AS()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,GS):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},qS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return g(this,null,function*(){yield $n(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return g(this,null,function*(){let r=yield $n(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return g(this,null,function*(){yield $n(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Ib=WS;var HS=(()=>{class n extends Vc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),yf=HS;function KS(n){return Promise.all(n.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var QS=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return g(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(c).map(f=>g(this,null,function*(){return f(r.origin,s)})),d=yield KS(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Eb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Yh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return g(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,l)=>{let d=Eb("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let b=p;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(b.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function tn(){return window}function YS(n){tn().location.href=n}function Tb(){return typeof tn().WorkerGlobalScope<"u"&&typeof tn().importScripts=="function"}function JS(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function XS(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZS(){return Tb()?self:null}var Ab="firebaseLocalStorageDb",ex=1,Lc="firebaseLocalStorage",Cb="fbase_key",Yr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Bc(n,e){return n.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function tx(){let n=indexedDB.deleteDatabase(Ab);return new Yr(n).toPromise()}function Jh(){let n=indexedDB.open(Ab,ex);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Lc,{keyPath:Cb})}catch(i){t(i)}}),n.addEventListener("success",()=>g(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),yield tx(),e(yield Jh()))}))})}function $y(n,e,t){return g(this,null,function*(){let r=Bc(n,!0).put({[Cb]:e,value:t});return new Yr(r).toPromise()})}function nx(n,e){return g(this,null,function*(){let t=Bc(n,!1).get(e),r=yield new Yr(t).toPromise();return r===void 0?null:r.value})}function qy(n,e){let t=Bc(n,!0).delete(e);return new Yr(t).toPromise()}var rx=800,ix=3,ox=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield Jh(),this.db)})}_withRetries(t){return g(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>ix)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return Tb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=QS._getInstance(ZS()),this.receiver._subscribe("keyChanged",(t,r)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var t,r;if(this.activeServiceWorker=yield JS(),!this.activeServiceWorker)return;this.sender=new Yh(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||XS()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Jh();return yield $y(t,Fc,"1"),yield qy(t,Fc),!0}catch{}return!1})}_withPendingWrite(t){return g(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>$y(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return g(this,null,function*(){let r=yield this._withRetries(i=>nx(i,t));return this.localCache[t]=r,r})}_remove(t){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>qy(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return g(this,null,function*(){let t=yield this._withRetries(o=>{let s=Bc(o,!1).getAll();return new Yr(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Sb=ox;var NO=pb("rcb"),OO=new Qr(3e4,6e4);function sx(n,e){return e?xn(e):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vs=class extends Os{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nh(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ax(n){return bb(n.auth,new Vs(n),n.bypassAuthState)}function cx(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),$S(t,new Vs(n),n.bypassAuthState)}function lx(n){return g(this,null,function*(){let{auth:e,user:t}=n;return H(t,e,"internal-error"),zS(t,new Vs(n),n.bypassAuthState)})}var Xh=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ax;case"linkViaPopup":case"linkViaRedirect":return lx;case"reauthViaPopup":case"reauthViaRedirect":return cx;default:nn(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var FO=new Qr(2e3,1e4);var ux="pendingRedirect",Sc=new Map,Zh=class n extends Xh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return g(this,null,function*(){let e=Sc.get(this.auth._key());if(!e){try{let r=(yield dx(this.resolver,this.auth))?yield $n(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Sc.set(this.auth._key(),e)}return this.bypassAuthState||Sc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return $n(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,$n(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function dx(n,e){return g(this,null,function*(){let t=mx(e),r=fx(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function hx(n,e){Sc.set(n._key(),e)}function fx(n){return xn(n._redirectPersistence)}function mx(n){return Cc(ux,n.config.apiKey,n.name)}function px(n,e,t=!1){return g(this,null,function*(){if(Gt(n.app))return Promise.reject(Rn(n));let r=Jr(n),i=sx(r,e),s=yield new Zh(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var gx=10*60*1e3,ef=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_x(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}};function Gy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _x(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(n);default:return!1}}function vx(t){return g(this,arguments,function*(n,e={}){return ur(n,"GET","/v1/projects",e)})}var yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bx=/^https?/;function wx(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield vx(n);for(let t of e)try{if(Ix(t))return}catch{}nn(n,"unauthorized-domain")})}function Ix(n){let e=Fh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!bx.test(t))return!1;if(yx.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Ex=new Qr(3e4,6e4);function Wy(){let n=tn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tx(n){return new Promise((e,t)=>{var r,i,o;function s(){Wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wy(),t(Kr(n,"network-request-failed"))},timeout:Ex.get()})}if(!((i=(r=tn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=tn().gapi)===null||o===void 0)&&o.load)s();else{let c=pb("iframefcb");return tn()[c]=()=>{gapi.load?s():t(Kr(n,"network-request-failed"))},mb(`${DS()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw xc=null,e})}var xc=null;function Ax(n){return xc=xc||Tx(n),xc}var Cx=new Qr(5e3,15e3),Sx="__/auth/iframe",xx="emulator/auth/iframe",Rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Px(n){let e=n.config;H(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?of(e,xx):`https://${n.config.authDomain}/${Sx}`,r={apiKey:e.apiKey,appName:n.name,v:sr},i=Dx.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ts(r).slice(1)}`}function Mx(n){return g(this,null,function*(){let e=yield Ax(n),t=tn().gapi;return H(t,n,"internal-error"),e.open({where:document.body,url:Px(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rx,dontclear:!0},r=>new Promise((i,o)=>g(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Kr(n,"network-request-failed"),c=tn().setTimeout(()=>{o(s)},Cx.get());function l(){tn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}var kx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nx=500,Ox=600,Fx="_blank",Vx="http://localhost",Uc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Lx(n,e,t,r=Nx,i=Ox){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},kx),{width:r.toString(),height:i.toString(),top:o,left:s}),d=Ke().toLowerCase();t&&(c=ab(d)?Fx:t),ob(d)&&(e=e||Vx,l.scrollbars="yes");let f=Object.entries(l).reduce((b,[S,k])=>`${b}${S}=${k},`,"");if(TS(d)&&c!=="_self")return Ux(e||"",c),new Uc(null);let p=window.open(e||"",c,f);H(p,n,"popup-blocked");try{p.focus()}catch{}return new Uc(p)}function Ux(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var jx="__/auth/handler",Bx="emulator/auth/handler",zx=encodeURIComponent("fac");function Hy(n,e,t,r,i,o){return g(this,null,function*(){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sr,eventId:i};if(e instanceof Oc){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",vy(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof Kh){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?`#${zx}=${encodeURIComponent(l)}`:"";return`${$x(n)}?${Ts(c).slice(1)}${d}`})}function $x({config:n}){return n.emulator?of(n,Bx):`https://${n.authDomain}/${jx}`}var Oh="webStorageSupport",tf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yf,this._completeRedirectFn=px,this._overrideRedirectResult=hx}_openPopup(e,t,r,i){return g(this,null,function*(){var o;cr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Hy(e,t,r,Fh(),i);return Lx(e,s,Eb())})}_openRedirect(e,t,r,i){return g(this,null,function*(){yield this._originValidation(e);let o=yield Hy(e,t,r,Fh(),i);return YS(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(cr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return g(this,null,function*(){let t=yield Mx(e),r=new ef(e);return t.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oh,{type:Oh},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Oh];s!==void 0&&t(!!s),nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hb()||sb()||lf()}},Rb=tf;var Ky="@firebase/auth",Qy="1.8.1";var nf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gx(n){or(new Nt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(n)},d=new $h(r,i,o,l);return MS(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),or(new Nt("auth-internal",e=>{let t=Jr(e.getProvider("auth").getImmediate());return(r=>new nf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(Ky,Qy,qx(n)),$e(Ky,Qy,"esm2017")}var Wx=5*60,Hx=mh("authIdTokenMaxAge")||Wx,Yy=null,Kx=n=>e=>g(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Hx)return;let i=t?.token;Yy!==i&&(Yy=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function bf(n=Bi()){let e=Ss(n,"auth");if(e.isInitialized())return e.getImmediate();let t=uf(n,{popupRedirectResolver:Rb,persistence:[Sb,Ib,yf]}),r=mh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Kx(o.toString());gf(t,s,()=>s(t.currentUser)),pf(t,c=>s(c))}}let i=hh("auth");return i&&df(t,`http://${i}`),t}function Qx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xS({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Kr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Qx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gx("Browser");var Db="auth",Us=class{constructor(e){return e}},js=class{constructor(){return Rs(Db)}};var wf=new Q("angularfire2.auth-instances");function LR(n,e){let t=Ec(Db,n,e);return t&&new Us(t)}function UR(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Us(r)}}var jR={provide:js,deps:[[new pt,wf]]},BR={provide:Us,useFactory:LR,deps:[[new pt,wf],Cn]};function Pb(n,...e){return $e("angularfire",Wr.full,"auth"),Ut([BR,jR,{provide:wf,useFactory:UR(n),multi:!0,deps:[_e,It,$i,Hr,[new pt,zi],...e]}])}var Mb=Oe(ff,!0);var zc=Oe(bf,!0);var kb=Oe(_f,!0);var Nb=Oe(mf,!0);var Ob=Oe(vf,!0);var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vb={};var dr,If;(function(){var n;function e(I,_){function y(){}y.prototype=_.prototype,I.D=_.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(w,E,A){for(var v=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)v[fn-2]=arguments[fn];return _.prototype[E].apply(w,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var E=0;16>E;++E)w[E]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(E=0;16>E;++E)w[E]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=I.g[0],y=I.g[1],E=I.g[2];var A=I.g[3],v=_+(A^y&(E^A))+w[0]+3614090360&4294967295;_=y+(v<<7&4294967295|v>>>25),v=A+(E^_&(y^E))+w[1]+3905402710&4294967295,A=_+(v<<12&4294967295|v>>>20),v=E+(y^A&(_^y))+w[2]+606105819&4294967295,E=A+(v<<17&4294967295|v>>>15),v=y+(_^E&(A^_))+w[3]+3250441966&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(A^y&(E^A))+w[4]+4118548399&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(E^_&(y^E))+w[5]+1200080426&4294967295,A=_+(v<<12&4294967295|v>>>20),v=E+(y^A&(_^y))+w[6]+2821735955&4294967295,E=A+(v<<17&4294967295|v>>>15),v=y+(_^E&(A^_))+w[7]+4249261313&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(A^y&(E^A))+w[8]+1770035416&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(E^_&(y^E))+w[9]+2336552879&4294967295,A=_+(v<<12&4294967295|v>>>20),v=E+(y^A&(_^y))+w[10]+4294925233&4294967295,E=A+(v<<17&4294967295|v>>>15),v=y+(_^E&(A^_))+w[11]+2304563134&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(A^y&(E^A))+w[12]+1804603682&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(E^_&(y^E))+w[13]+4254626195&4294967295,A=_+(v<<12&4294967295|v>>>20),v=E+(y^A&(_^y))+w[14]+2792965006&4294967295,E=A+(v<<17&4294967295|v>>>15),v=y+(_^E&(A^_))+w[15]+1236535329&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(E^A&(y^E))+w[1]+4129170786&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^E&(_^y))+w[6]+3225465664&4294967295,A=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(A^_))+w[11]+643717713&4294967295,E=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(E^A))+w[0]+3921069994&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^A&(y^E))+w[5]+3593408605&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^E&(_^y))+w[10]+38016083&4294967295,A=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(A^_))+w[15]+3634488961&4294967295,E=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(E^A))+w[4]+3889429448&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^A&(y^E))+w[9]+568446438&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^E&(_^y))+w[14]+3275163606&4294967295,A=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(A^_))+w[3]+4107603335&4294967295,E=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(E^A))+w[8]+1163531501&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^A&(y^E))+w[13]+2850285829&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^E&(_^y))+w[2]+4243563512&4294967295,A=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(A^_))+w[7]+1735328473&4294967295,E=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(E^A))+w[12]+2368359562&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(y^E^A)+w[5]+4294588738&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^E)+w[8]+2272392833&4294967295,A=_+(v<<11&4294967295|v>>>21),v=E+(A^_^y)+w[11]+1839030562&4294967295,E=A+(v<<16&4294967295|v>>>16),v=y+(E^A^_)+w[14]+4259657740&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^A)+w[1]+2763975236&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^E)+w[4]+1272893353&4294967295,A=_+(v<<11&4294967295|v>>>21),v=E+(A^_^y)+w[7]+4139469664&4294967295,E=A+(v<<16&4294967295|v>>>16),v=y+(E^A^_)+w[10]+3200236656&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^A)+w[13]+681279174&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^E)+w[0]+3936430074&4294967295,A=_+(v<<11&4294967295|v>>>21),v=E+(A^_^y)+w[3]+3572445317&4294967295,E=A+(v<<16&4294967295|v>>>16),v=y+(E^A^_)+w[6]+76029189&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^A)+w[9]+3654602809&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^E)+w[12]+3873151461&4294967295,A=_+(v<<11&4294967295|v>>>21),v=E+(A^_^y)+w[15]+530742520&4294967295,E=A+(v<<16&4294967295|v>>>16),v=y+(E^A^_)+w[2]+3299628645&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(E^(y|~A))+w[0]+4096336452&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~E))+w[7]+1126891415&4294967295,A=_+(v<<10&4294967295|v>>>22),v=E+(_^(A|~y))+w[14]+2878612391&4294967295,E=A+(v<<15&4294967295|v>>>17),v=y+(A^(E|~_))+w[5]+4237533241&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~A))+w[12]+1700485571&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~E))+w[3]+2399980690&4294967295,A=_+(v<<10&4294967295|v>>>22),v=E+(_^(A|~y))+w[10]+4293915773&4294967295,E=A+(v<<15&4294967295|v>>>17),v=y+(A^(E|~_))+w[1]+2240044497&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~A))+w[8]+1873313359&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~E))+w[15]+4264355552&4294967295,A=_+(v<<10&4294967295|v>>>22),v=E+(_^(A|~y))+w[6]+2734768916&4294967295,E=A+(v<<15&4294967295|v>>>17),v=y+(A^(E|~_))+w[13]+1309151649&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~A))+w[4]+4149444226&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~E))+w[11]+3174756917&4294967295,A=_+(v<<10&4294967295|v>>>22),v=E+(_^(A|~y))+w[2]+718787259&4294967295,E=A+(v<<15&4294967295|v>>>17),v=y+(A^(E|~_))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var y=_-this.blockSize,w=this.B,E=this.h,A=0;A<_;){if(E==0)for(;A<=y;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(w[E++]=I.charCodeAt(A++),E==this.blockSize){i(this,w),E=0;break}}else for(;A<_;)if(w[E++]=I[A++],E==this.blockSize){i(this,w),E=0;break}}this.h=E,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var y=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=y&255,y/=256;for(this.u(I),I=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)I[y++]=this.g[_]>>>w&255;return I};function o(I,_){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=_(I)}function s(I,_){this.h=_;for(var y=[],w=!0,E=I.length-1;0<=E;E--){var A=I[E]|0;w&&A==_||(y[E]=A,w=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?o(I,function(_){return new s([_|0],0>_?-1:0)}):new s([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(d(-I));for(var _=[],y=1,w=0;I>=y;w++)_[w]=I/y|0,y*=4294967296;return new s(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return N(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(_,8)),w=p,E=0;E<I.length;E+=8){var A=Math.min(8,I.length-E),v=parseInt(I.substring(E,E+A),_);8>A?(A=d(Math.pow(_,A)),w=w.j(A).add(d(v))):(w=w.j(y),w=w.add(d(v)))}return w}var p=l(0),b=l(1),S=l(16777216);n=s.prototype,n.m=function(){if(L(this))return-N(this).m();for(var I=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);I+=(0<=w?w:4294967296+w)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(L(this))return"-"+N(this).toString(I);for(var _=d(Math.pow(I,6)),y=this,w="";;){var E=ve(y,_).g;y=K(y,E.j(_));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,k(y))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function L(I){return I.h==-1}n.l=function(I){return I=K(this,I),L(I)?-1:k(I)?0:1};function N(I){for(var _=I.g.length,y=[],w=0;w<_;w++)y[w]=~I.g[w];return new s(y,~I.h).add(b)}n.abs=function(){return L(this)?N(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0,E=0;E<=_;E++){var A=w+(this.i(E)&65535)+(I.i(E)&65535),v=(A>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=v>>>16,A&=65535,v&=65535,y[E]=v<<16|A}return new s(y,y[y.length-1]&-2147483648?-1:0)};function K(I,_){return I.add(N(_))}n.j=function(I){if(k(this)||k(I))return p;if(L(this))return L(I)?N(this).j(N(I)):N(N(this).j(I));if(L(I))return N(this.j(N(I)));if(0>this.l(S)&&0>I.l(S))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var A=this.i(w)>>>16,v=this.i(w)&65535,fn=I.i(E)>>>16,So=I.i(E)&65535;y[2*w+2*E]+=v*So,ee(y,2*w+2*E),y[2*w+2*E+1]+=A*So,ee(y,2*w+2*E+1),y[2*w+2*E+1]+=v*fn,ee(y,2*w+2*E+1),y[2*w+2*E+2]+=A*fn,ee(y,2*w+2*E+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new s(y,0)};function ee(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function Z(I,_){this.g=I,this.h=_}function ve(I,_){if(k(_))throw Error("division by zero");if(k(I))return new Z(p,p);if(L(I))return _=ve(N(I),_),new Z(N(_.g),N(_.h));if(L(_))return _=ve(I,N(_)),new Z(N(_.g),_.h);if(30<I.g.length){if(L(I)||L(_))throw Error("slowDivide_ only works with positive integers.");for(var y=b,w=_;0>=w.l(I);)y=dt(y),w=dt(w);var E=he(y,1),A=he(w,1);for(w=he(w,2),y=he(y,2);!k(w);){var v=A.add(w);0>=v.l(I)&&(E=E.add(y),A=v),w=he(w,1),y=he(y,1)}return _=K(I,E.j(_)),new Z(E,_)}for(E=p;0<=I.l(_);){for(y=Math.max(1,Math.floor(I.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=d(y),v=A.j(_);L(v)||0<v.l(I);)y-=w,A=d(y),v=A.j(_);k(A)&&(A=b),E=E.add(A),I=K(I,v)}return new Z(E,I)}n.A=function(I){return ve(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&I.i(w);return new s(y,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|I.i(w);return new s(y,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^I.i(w);return new s(y,this.h^I.h)};function dt(I){for(var _=I.g.length+1,y=[],w=0;w<_;w++)y[w]=I.i(w)<<1|I.i(w-1)>>>31;return new s(y,I.h)}function he(I,_){var y=_>>5;_%=32;for(var w=I.g.length-y,E=[],A=0;A<w;A++)E[A]=0<_?I.i(A+y)>>>_|I.i(A+y+1)<<32-_:I.i(A+y);return new s(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,If=Vb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,dr=Vb.Integer=s}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dn={};var Ef,zR,Wi,Tf,Bs,qc,Af,Cf,Sf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break e;h=h[T]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function o(a,u){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var C=h++;return{value:u(C,a[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return o(this,function(u,h){return h})}});var s=s||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function p(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(u,T)}}return function(){return a.apply(u,arguments)}}function b(a,u,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,b.apply(null,arguments)}function S(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function k(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,C){for(var F=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)F[fe-2]=arguments[fe];return u.prototype[T].apply(m,F)}}function L(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function N(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let T=a.length||0,C=m.length||0;a.length=T+C;for(let F=0;F<C;F++)a[T+F]=m[F]}else a.push(m)}}class K{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ee(a){return/^[\s\xa0]*$/.test(a)}function Z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ve(a){return ve[" "](a),a}ve[" "]=function(){};var dt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function he(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function I(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function _(a){let u={};for(let h in a)u[h]=a[h];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let C=0;C<y.length;C++)h=y[C],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function A(a){c.setTimeout(()=>{throw a},0)}function v(){var a=_u;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class fn{constructor(){this.h=this.g=null}add(u,h){let m=So.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var So=new K(()=>new jE,a=>a.reset());class jE{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let xo,Ro=!1,_u=new fn,Zp=()=>{let a=c.Promise.resolve(void 0);xo=()=>{a.then(BE)}};var BE=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){A(h)}var u=So;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Ro=!1};function Un(){this.s=this.s,this.C=this.C}Un.prototype.s=!1,Un.prototype.ma=function(){this.s||(this.s=!0,this.N())},Un.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var zE=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Do(a,u){if(nt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(dt){e:{try{ve(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:$E[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Do.aa.h.call(this)}}k(Do,nt);var $E={2:"touch",3:"pen",4:"mouse"};Do.prototype.h=function(){Do.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Po="closure_listenable_"+(1e6*Math.random()|0),qE=0;function GE(a,u,h,m,T){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=T,this.key=++qE,this.da=this.fa=!1}function wa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ia(a){this.src=a,this.g={},this.h=0}Ia.prototype.add=function(a,u,h,m,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var F=yu(a,u,m,T);return-1<F?(u=a[F],h||(u.fa=!1)):(u=new GE(u,this.src,C,!!m,T),u.fa=h,a.push(u)),u};function vu(a,u){var h=u.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=T)&&Array.prototype.splice.call(m,T,1),C&&(wa(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function yu(a,u,h,m){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==m)return T}return-1}var bu="closure_lm_"+(1e6*Math.random()|0),wu={};function eg(a,u,h,m,T){if(m&&m.once)return ng(a,u,h,m,T);if(Array.isArray(u)){for(var C=0;C<u.length;C++)eg(a,u[C],h,m,T);return null}return h=Au(h),a&&a[Po]?a.K(u,h,d(m)?!!m.capture:!!m,T):tg(a,u,h,!1,m,T)}function tg(a,u,h,m,T,C){if(!u)throw Error("Invalid event type");var F=d(T)?!!T.capture:!!T,fe=Eu(a);if(fe||(a[bu]=fe=new Ia(a)),h=fe.add(u,h,m,F,C),h.proxy)return h;if(m=WE(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)zE||(T=F),T===void 0&&(T=!1),a.addEventListener(u.toString(),m,T);else if(a.attachEvent)a.attachEvent(ig(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function WE(){function a(h){return u.call(a.src,a.listener,h)}let u=HE;return a}function ng(a,u,h,m,T){if(Array.isArray(u)){for(var C=0;C<u.length;C++)ng(a,u[C],h,m,T);return null}return h=Au(h),a&&a[Po]?a.L(u,h,d(m)?!!m.capture:!!m,T):tg(a,u,h,!0,m,T)}function rg(a,u,h,m,T){if(Array.isArray(u))for(var C=0;C<u.length;C++)rg(a,u[C],h,m,T);else m=d(m)?!!m.capture:!!m,h=Au(h),a&&a[Po]?(a=a.i,u=String(u).toString(),u in a.g&&(C=a.g[u],h=yu(C,h,m,T),-1<h&&(wa(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[u],a.h--)))):a&&(a=Eu(a))&&(u=a.g[u.toString()],a=-1,u&&(a=yu(u,h,m,T)),(h=-1<a?u[a]:null)&&Iu(h))}function Iu(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Po])vu(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(ig(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=Eu(u))?(vu(h,a),h.h==0&&(h.src=null,u[bu]=null)):wa(a)}}}function ig(a){return a in wu?wu[a]:wu[a]="on"+a}function HE(a,u){if(a.da)a=!0;else{u=new Do(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&Iu(a),a=h.call(m,u)}return a}function Eu(a){return a=a[bu],a instanceof Ia?a:null}var Tu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Au(a){return typeof a=="function"?a:(a[Tu]||(a[Tu]=function(u){return a.handleEvent(u)}),a[Tu])}function rt(){Un.call(this),this.i=new Ia(this),this.M=this,this.F=null}k(rt,Un),rt.prototype[Po]=!0,rt.prototype.removeEventListener=function(a,u,h,m){rg(this,a,u,h,m)};function ht(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new nt(u,a);else if(u instanceof nt)u.target=u.target||a;else{var T=u;u=new nt(m,a),w(u,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var F=u.g=h[C];T=Ea(F,m,!0,u)&&T}if(F=u.g=a,T=Ea(F,m,!0,u)&&T,T=Ea(F,m,!1,u)&&T,h)for(C=0;C<h.length;C++)F=u.g=h[C],T=Ea(F,m,!1,u)&&T}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)wa(h[m]);delete a.g[u],a.h--}}this.F=null},rt.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},rt.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function Ea(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,C=0;C<u.length;++C){var F=u[C];if(F&&!F.da&&F.capture==h){var fe=F.listener,Je=F.ha||F.src;F.fa&&vu(a.i,F),T=fe.call(Je,m)!==!1&&T}}return T&&!m.defaultPrevented}function og(a,u,h){if(typeof a=="function")h&&(a=b(a,h));else if(a&&typeof a.handleEvent=="function")a=b(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function sg(a){a.g=og(()=>{a.g=null,a.i&&(a.i=!1,sg(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class KE extends Un{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:sg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(a){Un.call(this),this.h=a,this.g={}}k(Mo,Un);var ag=[];function cg(a){he(a.g,function(u,h){this.g.hasOwnProperty(h)&&Iu(u)},a),a.g={}}Mo.prototype.N=function(){Mo.aa.N.call(this),cg(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cu=c.JSON.stringify,QE=c.JSON.parse,YE=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Su(){}Su.prototype.h=null;function lg(a){return a.h||(a.h=a.i())}function ug(){}var ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xu(){nt.call(this,"d")}k(xu,nt);function Ru(){nt.call(this,"c")}k(Ru,nt);var Cr={},dg=null;function Ta(){return dg=dg||new rt}Cr.La="serverreachability";function hg(a){nt.call(this,Cr.La,a)}k(hg,nt);function No(a){let u=Ta();ht(u,new hg(u))}Cr.STAT_EVENT="statevent";function fg(a,u){nt.call(this,Cr.STAT_EVENT,a),this.stat=u}k(fg,nt);function ft(a){let u=Ta();ht(u,new fg(u,a))}Cr.Ma="timingevent";function mg(a,u){nt.call(this,Cr.Ma,a),this.size=u}k(mg,nt);function Oo(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function JE(a,u,h,m,T,C){a.info(function(){if(a.g)if(C)for(var F="",fe=C.split("&"),Je=0;Je<fe.length;Je++){var ae=fe[Je].split("=");if(1<ae.length){var it=ae[0];ae=ae[1];var ot=it.split("_");F=2<=ot.length&&ot[1]=="type"?F+(it+"="+ae+"&"):F+(it+"=redacted&")}}else F=null;else F=C;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+u+`
`+h+`
`+F})}function XE(a,u,h,m,T,C,F){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+u+`
`+h+`
`+C+" "+F})}function fi(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+e0(a,h)+(m?" "+m:"")})}function ZE(a,u){a.info(function(){return"TIMEOUT: "+u})}Fo.prototype.info=function(){};function e0(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var F=1;F<T.length;F++)T[F]=""}}}}return Cu(h)}catch{return u}}var Aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Du;function Ca(){}k(Ca,Su),Ca.prototype.g=function(){return new XMLHttpRequest},Ca.prototype.i=function(){return{}},Du=new Ca;function jn(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new Mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var _g={},Pu={};function Mu(a,u,h){a.L=1,a.v=Da(mn(u)),a.m=h,a.P=!0,vg(a,null)}function vg(a,u){a.F=Date.now(),Sa(a),a.A=mn(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Mg(h.i,"t",m),a.C=0,h=a.j.J,a.h=new gg,a.g=Yg(a.j,h?u:null,!a.m),0<a.O&&(a.M=new KE(b(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(ag[0]=T.toString()),T=ag);for(var C=0;C<T.length;C++){var F=eg(h,T[C],m||u.handleEvent,!1,u.h||u);if(!F)break;u.g[F.key]=F}u=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),No(),JE(a.i,a.u,a.A,a.l,a.R,a.m)}jn.prototype.ca=function(a){a=a.target;let u=this.M;u&&pn(a)==3?u.j():this.Y(a)},jn.prototype.Y=function(a){try{if(a==this.g)e:{let ot=pn(this.g);var u=this.g.Ba();let gi=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||ot!=4||u==7||(u==8||0>=gi?No(3):No(2)),ku(this);var h=this.g.Z();this.X=h;t:if(yg(this)){var m=Ug(this.g);a="";var T=m.length,C=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),Vo(this);var F="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(C&&u==T-1)});m.length=0,this.h.g+=a,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=h==200,XE(this.i,this.u,this.A,this.l,this.R,ot,h),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Je=this.g;if((fe=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(fe)){var ae=fe;break t}}ae=null}if(h=ae)fi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nu(this,h);else{this.o=!1,this.s=3,ft(12),Sr(this),Vo(this);break e}}if(this.P){h=!0;let Lt;for(;!this.J&&this.C<F.length;)if(Lt=t0(this,F),Lt==Pu){ot==4&&(this.s=4,ft(14),h=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==_g){this.s=4,ft(15),fi(this.i,this.l,F,"[Invalid Chunk]"),h=!1;break}else fi(this.i,this.l,Lt,null),Nu(this,Lt);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||F.length!=0||this.h.h||(this.s=1,ft(16),h=!1),this.o=this.o&&h,!h)fi(this.i,this.l,F,"[Invalid Chunked Response]"),Sr(this),Vo(this);else if(0<F.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),ju(it),it.M=!0,ft(11))}}else fi(this.i,this.l,F,null),Nu(this,F);ot==4&&Sr(this),this.o&&!this.J&&(ot==4?Wg(this.j,this):(this.o=!1,Sa(this)))}else v0(this.g),h==400&&0<F.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Sr(this),Vo(this)}}}catch{}finally{}};function yg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function t0(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?Pu:(h=Number(u.substring(h,m)),isNaN(h)?_g:(m+=1,m+h>u.length?Pu:(u=u.slice(m,m+h),a.C=m+h,u)))}jn.prototype.cancel=function(){this.J=!0,Sr(this)};function Sa(a){a.S=Date.now()+a.I,bg(a,a.I)}function bg(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Oo(b(a.ba,a),u)}function ku(a){a.B&&(c.clearTimeout(a.B),a.B=null)}jn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(ZE(this.i,this.A),this.L!=2&&(No(),ft(17)),Sr(this),this.s=2,Vo(this)):bg(this,this.S-a)};function Vo(a){a.j.G==0||a.J||Wg(a.j,a)}function Sr(a){ku(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,cg(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Nu(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||Ou(h.h,a))){if(!a.K&&Ou(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Oa(h),ka(h);else break e;Uu(h),ft(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Oo(b(h.Za,h),6e3));if(1>=Eg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Rr(h,11)}else if((a.K||h.g==a)&&Oa(h),!ee(u))for(T=h.Da.g.parse(u),u=0;u<T.length;u++){let ae=T[u];if(h.T=ae[0],ae=ae[1],h.G==2)if(ae[0]=="c"){h.K=ae[1],h.ia=ae[2];let it=ae[3];it!=null&&(h.la=it,h.j.info("VER="+h.la));let ot=ae[4];ot!=null&&(h.Aa=ot,h.j.info("SVER="+h.Aa));let gi=ae[5];gi!=null&&typeof gi=="number"&&0<gi&&(m=1.5*gi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Lt=a.g;if(Lt){let Va=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var C=m.h;C.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Fu(C,C.h),C.h=null))}if(m.D){let Bu=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Bu&&(m.ya=Bu,ye(m.I,m.D,Bu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var F=a;if(m.qa=Qg(m,m.J?m.ia:null,m.W),F.K){Tg(m.h,F);var fe=F,Je=m.L;Je&&(fe.I=Je),fe.B&&(ku(fe),Sa(fe)),m.g=F}else qg(m);0<h.i.length&&Na(h)}else ae[0]!="stop"&&ae[0]!="close"||Rr(h,7);else h.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Rr(h,7):Lu(h):ae[0]!="noop"&&h.l&&h.l.ta(ae),h.v=0)}}No(4)}catch{}}var n0=class{constructor(a,u){this.g=a,this.map=u}};function wg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ig(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Eg(a){return a.h?1:a.g?a.g.size:0}function Ou(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Fu(a,u){a.g?a.g.add(u):a.h=u}function Tg(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}wg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Ag(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return L(a.i)}function r0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function i0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function Cg(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=i0(a),m=r0(a),T=m.length,C=0;C<T;C++)u.call(void 0,m[C],h&&h[C],a)}var Sg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function o0(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var C=a[h].substring(0,m);T=a[h].substring(m+1)}else C=a[h];u(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function xr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof xr){this.h=a.h,xa(this,a.j),this.o=a.o,this.g=a.g,Ra(this,a.s),this.l=a.l;var u=a.i,h=new jo;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),xg(this,h),this.m=a.m}else a&&(u=String(a).match(Sg))?(this.h=!1,xa(this,u[1]||"",!0),this.o=Lo(u[2]||""),this.g=Lo(u[3]||"",!0),Ra(this,u[4]),this.l=Lo(u[5]||"",!0),xg(this,u[6]||"",!0),this.m=Lo(u[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}xr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Uo(u,Rg,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Uo(u,Rg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Uo(h,h.charAt(0)=="/"?c0:a0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Uo(h,u0)),a.join("")};function mn(a){return new xr(a)}function xa(a,u,h){a.j=h?Lo(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Ra(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function xg(a,u,h){u instanceof jo?(a.i=u,d0(a.i,a.h)):(h||(u=Uo(u,l0)),a.i=new jo(u,a.h))}function ye(a,u,h){a.i.set(u,h)}function Da(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Lo(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Uo(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,s0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function s0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rg=/[#\/\?@]/g,a0=/[#\?:]/g,c0=/[#\?]/g,l0=/[#\?@]/g,u0=/#/g;function jo(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Bn(a){a.g||(a.g=new Map,a.h=0,a.i&&o0(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=jo.prototype,n.add=function(a,u){Bn(this),this.i=null,a=mi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function Dg(a,u){Bn(a),u=mi(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Pg(a,u){return Bn(a),u=mi(a,u),a.g.has(u)}n.forEach=function(a,u){Bn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(u,T,m,this)},this)},this)},n.na=function(){Bn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let T=a[m];for(let C=0;C<T.length;C++)h.push(u[m])}return h},n.V=function(a){Bn(this);let u=[];if(typeof a=="string")Pg(this,a)&&(u=u.concat(this.g.get(mi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return Bn(this),this.i=null,a=mi(this,a),Pg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Mg(a,u,h){Dg(a,u),0<h.length&&(a.i=null,a.g.set(mi(a,u),L(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let C=encodeURIComponent(String(m)),F=this.V(m);for(m=0;m<F.length;m++){var T=C;F[m]!==""&&(T+="="+encodeURIComponent(String(F[m]))),a.push(T)}}return this.i=a.join("&")};function mi(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function d0(a,u){u&&!a.j&&(Bn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(Dg(this,m),Mg(this,T,h))},a)),a.j=u}function h0(a,u){let h=new Fo;if(c.Image){let m=new Image;m.onload=S(zn,h,"TestLoadImage: loaded",!0,u,m),m.onerror=S(zn,h,"TestLoadImage: error",!1,u,m),m.onabort=S(zn,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=S(zn,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function f0(a,u){let h=new Fo,m=new AbortController,T=setTimeout(()=>{m.abort(),zn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(C=>{clearTimeout(T),C.ok?zn(h,"TestPingServer: ok",!0,u):zn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),zn(h,"TestPingServer: error",!1,u)})}function zn(a,u,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function m0(){this.g=new YE}function p0(a,u,h){let m=h||"";try{Cg(a,function(T,C){let F=T;d(T)&&(F=Cu(T)),u.push(m+C+"="+encodeURIComponent(F))})}catch(T){throw u.push(m+"type="+encodeURIComponent("_badmap")),T}}function Bo(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Bo,Su),Bo.prototype.g=function(){return new Pa(this.l,this.j)},Bo.prototype.i=function(a){return function(){return a}}({});function Pa(a,u){rt.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Pa,rt),n=Pa.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,$o(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function kg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?zo(this):$o(this),this.readyState==3&&kg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,zo(this))},n.Qa=function(a){this.g&&(this.response=a,zo(this))},n.ga=function(){this.g&&zo(this)};function zo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,$o(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function $o(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ng(a){let u="";return he(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function Vu(a,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=Ng(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ye(a,u,h))}function Se(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Se,rt);var g0=/^https?$/i,_0=["POST","PUT"];n=Se.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Du.g(),this.v=this.o?lg(this.o):lg(Du),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(C){Og(this,C);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let C of m.keys())h.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_0,u,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,F]of h)this.g.setRequestHeader(C,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Og(this,C)}};function Og(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Fg(a),Ma(a)}function Fg(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ht(this,"complete"),ht(this,"abort"),Ma(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),Se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},n.bb=function(){Vg(this)};function Vg(a){if(a.h&&typeof s<"u"&&(!a.v[1]||pn(a)!=4||a.Z()!=2)){if(a.u&&pn(a)==4)og(a.Ea,0,a);else if(ht(a,"readystatechange"),pn(a)==4){a.h=!1;try{let F=a.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=F===0){var T=String(a.D).match(Sg)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!g0.test(T?T.toLowerCase():"")}h=m}if(h)ht(a,"complete"),ht(a,"success");else{a.m=6;try{var C=2<pn(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Fg(a)}}finally{Ma(a)}}}}function Ma(a,u){if(a.g){Lg(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ht(a,"ready");try{h.onreadystatechange=m}catch{}}}function Lg(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function pn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),QE(u)}};function Ug(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function v0(a){let u={};a=(a.g&&2<=pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(ee(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=u[T]||[];u[T]=C,C.push(h)}I(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function jg(a){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,a),this.cb=qo("retryDelaySeedMs",1e4,a),this.Wa=qo("forwardChannelMaxRetries",2,a),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new wg(a&&a.concurrentRequestLimit),this.Da=new m0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jg.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,m){ft(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Qg(this,null,this.W),Na(this)};function Lu(a){if(Bg(a),a.G==3){var u=a.U++,h=mn(a.I);if(ye(h,"SID",a.K),ye(h,"RID",u),ye(h,"TYPE","terminate"),Go(a,h),u=new jn(a,a.j,u),u.L=2,u.v=Da(mn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=Yg(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Sa(u)}Kg(a)}function ka(a){a.g&&(ju(a),a.g.cancel(),a.g=null)}function Bg(a){ka(a),a.u&&(c.clearTimeout(a.u),a.u=null),Oa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Na(a){if(!Ig(a.h)&&!a.s){a.s=!0;var u=a.Ga;xo||Zp(),Ro||(xo(),Ro=!0),_u.add(u,a),a.B=0}}function y0(a,u){return Eg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Oo(b(a.Ga,a,u),Hg(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new jn(this,this.j,a),C=this.o;if(this.S&&(C?(C=_(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=$g(this,T,u),h=mn(this.I),ye(h,"RID",a),ye(h,"CVER",22),this.D&&ye(h,"X-HTTP-Session-Id",this.D),Go(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(Ng(C)))+"&"+u:this.m&&Vu(h,this.m,C)),Fu(this.h,T),this.Ua&&ye(h,"TYPE","init"),this.P?(ye(h,"$req",u),ye(h,"SID","null"),T.T=!0,Mu(T,h,null)):Mu(T,h,u),this.G=2}}else this.G==3&&(a?zg(this,a):this.i.length==0||Ig(this.h)||zg(this))};function zg(a,u){var h;u?h=u.l:h=a.U++;let m=mn(a.I);ye(m,"SID",a.K),ye(m,"RID",h),ye(m,"AID",a.T),Go(a,m),a.m&&a.o&&Vu(m,a.m,a.o),h=new jn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=$g(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Fu(a.h,h),Mu(h,m,u)}function Go(a,u){a.H&&he(a.H,function(h,m){ye(u,m,h)}),a.l&&Cg({},function(h,m){ye(u,m,h)})}function $g(a,u,h){h=Math.min(a.i.length,h);var m=a.l?b(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let F=["count="+h];C==-1?0<h?(C=T[0].g,F.push("ofs="+C)):C=0:F.push("ofs="+C);let fe=!0;for(let Je=0;Je<h;Je++){let ae=T[Je].g,it=T[Je].map;if(ae-=C,0>ae)C=Math.max(0,T[Je].g-100),fe=!1;else try{p0(it,F,"req"+ae+"_")}catch{m&&m(it)}}if(fe){m=F.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,m}function qg(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;xo||Zp(),Ro||(xo(),Ro=!0),_u.add(u,a),a.v=0}}function Uu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Oo(b(a.Fa,a),Hg(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Oo(b(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ka(this),Gg(this))};function ju(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Gg(a){a.g=new jn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=mn(a.qa);ye(u,"RID","rpc"),ye(u,"SID",a.K),ye(u,"AID",a.T),ye(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(u,"TO",a.ja),ye(u,"TYPE","xmlhttp"),Go(a,u),a.m&&a.o&&Vu(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Da(mn(u)),h.m=null,h.P=!0,vg(h,a)}n.Za=function(){this.C!=null&&(this.C=null,ka(this),Uu(this),ft(19))};function Oa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Wg(a,u){var h=null;if(a.g==u){Oa(a),ju(a),a.g=null;var m=2}else if(Ou(a.h,u))h=u.D,Tg(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var T=a.B;m=Ta(),ht(m,new mg(m,h)),Na(a)}else qg(a);else if(T=u.s,T==3||T==0&&0<u.X||!(m==1&&y0(a,u)||m==2&&Uu(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),T){case 1:Rr(a,5);break;case 4:Rr(a,10);break;case 3:Rr(a,6);break;default:Rr(a,2)}}}function Hg(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Rr(a,u){if(a.j.info("Error code "+u),u==2){var h=b(a.fb,a),m=a.Xa;let T=!m;m=new xr(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xa(m,"https"),Da(m),T?h0(m.toString(),h):f0(m.toString(),h)}else ft(2);a.G=0,a.l&&a.l.sa(u),Kg(a),Bg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Kg(a){if(a.G=0,a.ka=[],a.l){let u=Ag(a.h);(u.length!=0||a.i.length!=0)&&(N(a.ka,u),N(a.ka,a.i),a.h.i.length=0,L(a.i),a.i.length=0),a.l.ra()}}function Qg(a,u,h){var m=h instanceof xr?mn(h):new xr(h);if(m.g!="")u&&(m.g=u+"."+m.g),Ra(m,m.s);else{var T=c.location;m=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var C=new xr(null);m&&xa(C,m),u&&(C.g=u),T&&Ra(C,T),h&&(C.l=h),m=C}return h=a.D,u=a.ya,h&&u&&ye(m,h,u),ye(m,"VER",a.la),Go(a,m),m}function Yg(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Se(new Bo({eb:h})):new Se(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jg(){}n=Jg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fa(){}Fa.prototype.g=function(a,u){return new bt(a,u)};function bt(a,u){rt.call(this),this.g=new jg(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!ee(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ee(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new pi(this)}k(bt,rt),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Lu(this.g)},bt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Cu(a),a=h);u.i.push(new n0(u.Ya++,a)),u.G==3&&Na(u)},bt.prototype.N=function(){this.g.l=null,delete this.j,Lu(this.g),delete this.g,bt.aa.N.call(this)};function Xg(a){xu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}k(Xg,xu);function Zg(){Ru.call(this),this.status=1}k(Zg,Ru);function pi(a){this.g=a}k(pi,Jg),pi.prototype.ua=function(){ht(this.g,"a")},pi.prototype.ta=function(a){ht(this.g,new Xg(a))},pi.prototype.sa=function(a){ht(this.g,new Zg)},pi.prototype.ra=function(){ht(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Sf=Dn.createWebChannelTransport=function(){return new Fa},Cf=Dn.getStatEventTarget=function(){return Ta()},Af=Dn.Event=Cr,qc=Dn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,Bs=Dn.ErrorCode=Aa,pg.COMPLETE="complete",Tf=Dn.EventType=pg,ug.EventType=ko,ko.OPEN="a",ko.CLOSE="b",ko.ERROR="c",ko.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Wi=Dn.WebChannel=ug,zR=Dn.FetchXmlHttpFactory=Bo,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Ef=Dn.XhrIo=Se}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});var Lb="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var mo="11.0.2";var ti=new rr("@firebase/firestore");function Hi(){return ti.logLevel}function j(n,...e){if(ti.logLevel<=te.DEBUG){let t=e.map(hp);ti.debug(`Firestore (${mo}): ${n}`,...t)}}function Pn(n,...e){if(ti.logLevel<=te.ERROR){let t=e.map(hp);ti.error(`Firestore (${mo}): ${n}`,...t)}}function eo(n,...e){if(ti.logLevel<=te.WARN){let t=e.map(hp);ti.warn(`Firestore (${mo}): ${n}`,...t)}}function hp(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function W(n="Unexpected state"){let e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+n;throw Pn(e),new Error(e)}function de(n,e){n||W()}function Y(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends St{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Jc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},kf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nf=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>g(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new Jc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Qe(e)}},Of=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Ff=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Of(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Vf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Lf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){de(this.o===void 0);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(de(typeof t.token=="string"),this.R=t.token,new Vf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function $R(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=$R(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function to(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(),r===void 0?r=e.length-t:r>e.length-t&&W(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ce=class n extends Zc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},qR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rt=class n extends Zc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return qR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new B(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new B(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};var Uf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Uf.UNKNOWN_ID=-1;function GR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new ni(i,$.empty(),e)}function WR(n){return new ni(n.readTime,n.key,-1)}var ni=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function HR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var KR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function po(n){return g(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==KR)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let d=l;t(e[d]).next(f=>{s[d]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function QR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function go(n){return n.name==="IndexedDbTransactionError"}var fp=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pl(n){return n==null}function Hs(n){return n===0&&1/n==-1/0}function YR(n){return typeof n=="number"&&Number.isInteger(n)&&!Hs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function JR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ub(e)),e=XR(n.get(t),e);return Ub(e)}function XR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Ub(n){return n+""}var ZR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M1=[...ZR,"documentOverlays"],eD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tD=eD,nD=[...tD,"indexConfiguration","indexState","indexEntries"];var k1=[...nD,"globals"];function jb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ji(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ji(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ji(this.root,e,this.comparator,!0)}},Ji=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,t,r,i,o){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new el(this.data.getIterator())}getIteratorFrom(e){return new el(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},el=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class n{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ye(Rt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var tl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var rD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mn(n){if(de(!!n),typeof n=="string"){let e=0,t=rD.exec(n);if(de(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kn(n){return typeof n=="string"?lt.fromBase64String(n):lt.fromUint8Array(n)}function mp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ml(n){let e=n.mapValue.fields.__previous_value__;return mp(e)?Ml(e):e}function Ks(n){let e=Mn(n.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var Bf=class{constructor(e,t,r,i,o,s,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},nl=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mp(n)?4:Iw(n)?9007199254740991:ww(n)?10:11:W()}function cn(n,e){if(n===e)return!0;let t=fr(n);if(t!==fr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ks(n).isEqual(Ks(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Mn(i.timestampValue),c=Mn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return kn(i.bytesValue).isEqual(kn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ie(i.geoPointValue.latitude)===Ie(o.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ie(i.integerValue)===Ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ie(i.doubleValue),c=Ie(o.doubleValue);return s===c?Hs(s)===Hs(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return to(n.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(jb(s)!==jb(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!cn(s[l],c[l])))return!1;return!0}(n,e);default:return W()}}function Qs(n,e){return(n.values||[]).find(t=>cn(t,e))!==void 0}function no(n,e){if(n===e)return 0;let t=fr(n),r=fr(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ie(o.integerValue||o.doubleValue),l=Ie(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Bb(n.timestampValue,e.timestampValue);case 4:return Bb(Ks(n),Ks(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let c=kn(o),l=kn(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=oe(c[d],l[d]);if(f!==0)return f}return oe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=oe(Ie(o.latitude),Ie(s.latitude));return c!==0?c:oe(Ie(o.longitude),Ie(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return zb(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,l,d,f;let p=o.fields||{},b=s.fields||{},S=(c=p.value)===null||c===void 0?void 0:c.arrayValue,k=(l=b.value)===null||l===void 0?void 0:l.arrayValue,L=oe(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((f=k?.values)===null||f===void 0?void 0:f.length)||0);return L!==0?L:zb(S,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Gc.mapValue&&s===Gc.mapValue)return 0;if(o===Gc.mapValue)return 1;if(s===Gc.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),d=s.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let b=oe(l[p],f[p]);if(b!==0)return b;let S=no(c[l[p]],d[f[p]]);if(S!==0)return S}return oe(l.length,f.length)}(n.mapValue,e.mapValue);default:throw W()}}function Bb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=Mn(n),r=Mn(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function zb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=no(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function ro(n){return zf(n)}function zf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return kn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=zf(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${zf(t.fields[s])}`;return i+"}"}(n.mapValue):W()}function Kc(n){switch(fr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ml(n);return e?16+Kc(e):16;case 5:return 2*n.stringValue.length;case 6:return kn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Kc(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return pr(r.fields,(o,s)=>{i+=o.length+Kc(s)}),i}(n.mapValue);default:throw W()}}function $b(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $f(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function qb(n){return!!n&&"nullValue"in n}function Gb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qc(n){return!!n&&"mapValue"in n}function ww(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function $s(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$s(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$s(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Iw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var xt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$s(t)}setAll(e){let t=Rt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=$s(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n($s(this.value))}};function Ew(n){let e=[];return pr(n.fields,(t,r)=>{let i=new Rt([t]);if(Qc(r)){let o=Ew(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ft(e)}var Ht=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),xt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),xt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var io=class{constructor(e,t){this.position=e,this.inclusive=t}};function Wb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=no(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cn(n.position[t],e.position[t]))return!1;return!0}var oo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var rl=class{},Le=class n extends rl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Gf(e,t,r):t==="array-contains"?new Kf(e,r):t==="in"?new Qf(e,r):t==="not-in"?new Yf(e,r):t==="array-contains-any"?new Jf(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Wf(e,r):new Hf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(no(t,this.value)):t!==null&&fr(this.value)===fr(t)&&this.matchesComparison(no(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class n extends rl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Tw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Tw(n){return n.op==="and"}function Aw(n){return oD(n)&&Tw(n)}function oD(n){for(let e of n.filters)if(e instanceof Kt)return!1;return!0}function qf(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+ro(n.value);if(Aw(n))return n.filters.map(e=>qf(e)).join(",");{let e=n.filters.map(t=>qf(t)).join(",");return`${n.op}(${e})`}}function Cw(n,e){return n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&cn(r.value,i.value)}(n,e):n instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&Cw(s,i.filters[c]),!0):!1}(n,e):void W()}function Sw(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${ro(t.value)}`}(n):n instanceof Kt?function(t){return t.op.toString()+" {"+t.getFilters().map(Sw).join(" ,")+"}"}(n):"Filter"}var Gf=class extends Le{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Wf=class extends Le{constructor(e,t){super(e,"in",t),this.keys=xw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Hf=class extends Le{constructor(e,t){super(e,"not-in",t),this.keys=xw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Kf=class extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return pp(t)&&Qs(t.arrayValue,this.value)}},Qf=class extends Le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qs(this.value.arrayValue,t)}},Yf=class extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Qs(this.value.arrayValue,t)}},Jf=class extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qs(this.value.arrayValue,r))}};var Xf=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function Kb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Xf(n,e,t,r,i,o,s)}function gp(n){let e=Y(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=t}return e.ue}function _p(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Cw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hb(n.startAt,e.startAt)&&Hb(n.endAt,e.endAt)}function Zf(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ri=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sD(n,e,t,r,i,o,s,c){return new ri(n,e,t,r,i,o,s,c)}function kl(n){return new ri(n)}function Qb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rw(n){return n.collectionGroup!==null}function qs(n){let e=Y(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Ye(Rt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new oo(o,r))}),t.has(Rt.keyField().canonicalString())||e.ce.push(new oo(Rt.keyField(),r))}return e.ce}function on(n){let e=Y(n);return e.le||(e.le=aD(e,qs(n))),e.le}function aD(n,e){if(n.limitType==="F")return Kb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new oo(i.field,o)});let t=n.endAt?new io(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new io(n.startAt.position,n.startAt.inclusive):null;return Kb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function em(n,e){let t=n.filters.concat([e]);return new ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tm(n,e,t){return new ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nl(n,e){return _p(on(n),on(e))&&n.limitType===e.limitType}function Dw(n){return`${gp(on(n))}|lt:${n.limitType}`}function Ki(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Sw(i)).join(", ")}]`),Pl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ro(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(on(n))}; limitType=${n.limitType})`}function Ol(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of qs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let d=Wb(s,c,l);return s.inclusive?d<=0:d<0}(r.startAt,qs(r),i)||r.endAt&&!function(s,c,l){let d=Wb(s,c,l);return s.inclusive?d>=0:d>0}(r.endAt,qs(r),i))}(n,e)}function cD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pw(n){return(e,t)=>{let r=!1;for(let i of qs(n)){let o=lD(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function lD(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),d=c.data.field(o);return l!==null&&d!==null?no(l,d):W()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var Nn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return bw(this.inner)}size(){return this.innerSize}};var uD=new Pe($.comparator);function On(){return uD}var Mw=new Pe($.comparator);function zs(...n){let e=Mw;for(let t of n)e=e.insert(t.key,t);return e}function kw(n){let e=Mw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xr(){return Gs()}function Nw(){return Gs()}function Gs(){return new Nn(n=>n.toString(),(n,e)=>n.isEqual(e))}var dD=new Pe($.comparator),hD=new Ye($.comparator);function re(...n){let e=hD;for(let t of n)e=e.add(t);return e}var fD=new Ye(oe);function mD(){return fD}function vp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(e)?"-0":e}}function Ow(n){return{integerValue:""+n}}function pD(n,e){return YR(e)?Ow(e):vp(n,e)}var so=class{constructor(){this._=void 0}};function gD(n,e,t){return n instanceof ao?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mp(o)&&(o=Ml(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ii?Vw(n,e):n instanceof oi?Lw(n,e):function(i,o){let s=Fw(i,o),c=Yb(s)+Yb(i.Pe);return $f(s)&&$f(i.Pe)?Ow(c):vp(i.serializer,c)}(n,e)}function _D(n,e,t){return n instanceof ii?Vw(n,e):n instanceof oi?Lw(n,e):t}function Fw(n,e){return n instanceof co?function(r){return $f(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ao=class extends so{},ii=class extends so{constructor(e){super(),this.elements=e}};function Vw(n,e){let t=Uw(e);for(let r of n.elements)t.some(i=>cn(i,r))||t.push(r);return{arrayValue:{values:t}}}var oi=class extends so{constructor(e){super(),this.elements=e}};function Lw(n,e){let t=Uw(e);for(let r of n.elements)t=t.filter(i=>!cn(i,r));return{arrayValue:{values:t}}}var co=class extends so{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Yb(n){return Ie(n.integerValue||n.doubleValue)}function Uw(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ii&&i instanceof ii||r instanceof oi&&i instanceof oi?to(r.elements,i.elements,cn):r instanceof co&&i instanceof co?cn(r.Pe,i.Pe):r instanceof ao&&i instanceof ao}(n.transform,e.transform)}var nm=class{constructor(e,t){this.version=e,this.transformResults=t}},sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var lo=class{};function jw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ys(n.key,sn.none()):new si(n.key,n.data,sn.none());{let t=n.data,r=xt.empty(),i=new Ye(Rt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ln(n.key,r,new Ft(i.toArray()),sn.none())}}function yD(n,e,t){n instanceof si?function(i,o,s){let c=i.value.clone(),l=Xb(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ln?function(i,o,s){if(!Yc(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=Xb(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Bw(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ws(n,e,t,r){return n instanceof si?function(o,s,c,l){if(!Yc(o.precondition,s))return c;let d=o.value.clone(),f=Zb(o.fieldTransforms,l,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof ln?function(o,s,c,l){if(!Yc(o.precondition,s))return c;let d=Zb(o.fieldTransforms,l,s),f=s.data;return f.setAll(Bw(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,c){return Yc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function bD(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Fw(r.transform,i||null);o!=null&&(t===null&&(t=xt.empty()),t.set(r.field,o))}return t||null}function Jb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&to(r,i,(o,s)=>vD(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var si=class extends lo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ln=class extends lo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Bw(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Xb(n,e,t){let r=new Map;de(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,_D(s,c,t[i]))}return r}function Zb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,gD(o,s,e))}return r}var Ys=class extends lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},rm=class extends lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var im=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yD(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ws(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ws(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Nw();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=jw(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(t,r)=>Jb(t,r))&&to(this.baseMutations,e.baseMutations,(t,r)=>Jb(t,r))}},om=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){de(e.mutations.length===r.length);let i=function(){return dD}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var sm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var am=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Fe,se;function wD(n){switch(n){default:return W();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function zw(n){if(n===void 0)return Pn("GRPC error has no .code"),P.UNKNOWN;switch(n){case Fe.OK:return P.OK;case Fe.CANCELLED:return P.CANCELLED;case Fe.UNKNOWN:return P.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return P.INTERNAL;case Fe.UNAVAILABLE:return P.UNAVAILABLE;case Fe.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Fe.NOT_FOUND:return P.NOT_FOUND;case Fe.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Fe.ABORTED:return P.ABORTED;case Fe.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Fe.DATA_LOSS:return P.DATA_LOSS;default:return W()}}(se=Fe||(Fe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var ew=null;function ID(){return new TextEncoder}var ED=new dr([4294967295,4294967295],0);function tw(n){let e=ID().encode(n),t=new If;return t.update(e),new Uint8Array(t.digest())}function nw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new dr([t,r],0),new dr([i,o],0)]}var cm=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zr(`Invalid padding: ${t}`);if(r<0)throw new Zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zr(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=dr.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(dr.fromNumber(r)));return i.compare(ED)===1&&(i=new dr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=tw(e),[r,i]=nw(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.Te===0)return;let t=tw(e),[r,i]=nw(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var il=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Js.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Pe(oe),On(),re())}},Js=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,re(),re(),re())}};var Xi=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ol=class{constructor(e,t){this.targetId=e,this.me=t}},sl=class{constructor(e,t,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},al=class{constructor(){this.fe=0,this.ge=rw(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),t=re(),r=re();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Js(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=On(),this.qe=Wc(),this.Qe=Wc(),this.Ke=new Pe(oe)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(Zf(o))if(r===0){let s=new $(o.path);this.We(t,s,Ht.newNoDocument(s,J.min()))}else de(r===1);else{let s=this.Ze(t);if(s!==r){let c=this.Xe(e),l=c?this.et(c,e,s):1;if(l!==0){this.He(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}ew?.tt(function(f,p,b,S,k){var L,N,K,ee,Z,ve;let dt={localCacheCount:f,existenceFilterCount:p.count,databaseId:b.database,projectId:b.projectId},he=p.unchangedNames;return he&&(dt.bloomFilter={applied:k===0,hashCount:(L=he?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(ee=(K=(N=he?.bits)===null||N===void 0?void 0:N.bitmap)===null||K===void 0?void 0:K.length)!==null&&ee!==void 0?ee:0,padding:(ve=(Z=he?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ve!==void 0?ve:0,mightContain:I=>{var _;return(_=S?.mightContain(I))!==null&&_!==void 0&&_}}),dt}(s,e.me,this.Le.nt(),c,l))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=kn(r).toUint8Array()}catch(l){if(l instanceof tl)return eo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new cm(s,i,o)}catch(l){return eo(l instanceof Zr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Te===0?null:c}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.nt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Be.forEach((o,s)=>{let c=this.Ye(s);if(c){if(o.current&&Zf(c.target)){let l=new $(c.target.path);this.st(l).has(s)||this.ot(s,l)||this.We(s,l,Ht.newNoDocument(l,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=re();this.Qe.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let d=this.Ye(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new il(e,t,this.Ke,this.ke,r);return this.ke=On(),this.qe=Wc(),this.Qe=Wc(),this.Ke=new Pe(oe),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new al,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ye(oe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ye(oe),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new al),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Wc(){return new Pe($.comparator)}function rw(){return new Pe($.comparator)}var TD={asc:"ASCENDING",desc:"DESCENDING"},AD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CD={and:"AND",or:"OR"},um=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function dm(n,e){return n.useProto3Json||Pl(e)?e:{value:e}}function cl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $w(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SD(n,e){return cl(n,e.toTimestamp())}function an(n){return de(!!n),J.fromTimestamp(function(t){let r=Mn(t);return new qe(r.seconds,r.nanos)}(n))}function yp(n,e){return hm(n,e).canonicalString()}function hm(n,e){let t=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qw(n){let e=Ce.fromString(n);return de(Qw(e)),e}function fm(n,e){return yp(n.databaseId,e.path)}function xf(n,e){let t=qw(e);if(t.get(1)!==n.databaseId.projectId)throw new B(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(Ww(t))}function Gw(n,e){return yp(n.databaseId,e)}function xD(n){let e=qw(n);return e.length===4?Ce.emptyPath():Ww(e)}function mm(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ww(n){return de(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iw(n,e,t){return{name:fm(n,e),fields:t.value.mapValue.fields}}function RD(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string"),lt.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),lt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(d){let f=d.code===void 0?P.UNKNOWN:zw(d.code);return new B(f,d.message||"")}(s);t=new sl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xf(n,r.document.name),o=an(r.document.updateTime),s=r.document.createTime?an(r.document.createTime):J.min(),c=new xt({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(i,o,s,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Xi(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xf(n,r.document),o=r.readTime?an(r.readTime):J.min(),s=Ht.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Xi([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xf(n,r.document),o=r.removedTargetIds||[];t=new Xi([],o,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new am(i,o),c=r.targetId;t=new ol(c,s)}}return t}function DD(n,e){let t;if(e instanceof si)t={update:iw(n,e.key,e.value)};else if(e instanceof Ys)t={delete:fm(n,e.key)};else if(e instanceof ln)t={update:iw(n,e.key,e.data),updateMask:UD(e.fieldMask)};else{if(!(e instanceof rm))return W();t={verify:fm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof ao)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ii)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof oi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof co)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw W()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:SD(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W()}(n,e.precondition)),t}function PD(n,e){return n&&n.length>0?(de(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?an(i.updateTime):an(o);return s.isEqual(J.min())&&(s=an(o)),new nm(s,i.transformResults||[])}(t,e))):[]}function MD(n,e){return{documents:[Gw(n,e.path)]}}function kD(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gw(n,i);let o=function(d){if(d.length!==0)return Kw(Kt.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(f=>function(b){return{field:Qi(b.field),direction:FD(b.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=dm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:t,parent:i}}function ND(n){let e=xD(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){de(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let b=Hw(p);return b instanceof Kt&&Aw(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(b=>function(k){return new oo(Yi(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(p){let b;return b=typeof p=="object"?p.value:p,Pl(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(p){let b=!!p.before,S=p.values||[];return new io(S,b)}(t.startAt));let d=null;return t.endAt&&(d=function(p){let b=!p.before,S=p.values||[];return new io(S,b)}(t.endAt)),sD(e,i,s,o,c,"F",l,d)}function OD(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Yi(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yi(t.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Yi(t.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Yi(t.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(n):n.fieldFilter!==void 0?function(t){return Le.create(Yi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Kt.create(t.compositeFilter.filters.map(r=>Hw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(t.compositeFilter.op))}(n):W()}function FD(n){return TD[n]}function VD(n){return AD[n]}function LD(n){return CD[n]}function Qi(n){return{fieldPath:n.canonicalString()}}function Yi(n){return Rt.fromServerFormat(n.fieldPath)}function Kw(n){return n instanceof Le?function(t){if(t.op==="=="){if(Gb(t.value))return{unaryFilter:{field:Qi(t.field),op:"IS_NAN"}};if(qb(t.value))return{unaryFilter:{field:Qi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gb(t.value))return{unaryFilter:{field:Qi(t.field),op:"IS_NOT_NAN"}};if(qb(t.value))return{unaryFilter:{field:Qi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(t.field),op:VD(t.op),value:t.value}}}(n):n instanceof Kt?function(t){let r=t.getFilters().map(i=>Kw(i));return r.length===1?r[0]:{compositeFilter:{op:LD(t.op),filters:r}}}(n):W()}function UD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xs=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),c=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pm=class{constructor(e){this.ht=e}};function jD(n){let e=ND({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tm(e,e.limit,"L"):e}var ll=class{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),Hs(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Mn(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(kn(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?Iw(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):ww(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):W()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(Ie(c)),this.gt(s,t),this.dt(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),$.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};ll.Ft=new ll;var gm=class{constructor(){this.ln=new _m}addToCollectionParentIndex(e,t){return this.ln.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(ni.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},_m=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(Ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ce.comparator)).toArray()}};var O1=new Uint8Array(0);var ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(41943040,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);var Zs=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function sw([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var vm=class{constructor(e){this.Gn=e,this.buffer=new Ye(sw),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();sw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ym=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>g(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){go(t)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield po(t)}yield this.Yn(3e5)}))}},bm=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(fp.oe);let r=new vm(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(ow)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ow):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,c,l,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Hi()<=te.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(d-l)+`ms
Total Duration: ${d-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function BD(n,e){return new bm(n,e)}var wm=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Im=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Em=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ws(r.mutation,i,Ft.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){let i=Xr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=zs();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Xr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=On(),s=Gs(),c=function(){return Gs()}();return t.forEach((l,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof ln)?o=o.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Ws(f.mutation,d,f.mutation.getFieldMask(),qe.now())):s.set(d.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var p;return c.set(d,new Im(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Gs(),i=new Pe((s,c)=>s-c),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let f=r.get(l)||Ft.empty();f=c.applyToLocalView(d,f),r.set(l,f);let p=(i.get(c.batchId)||re()).add(l);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,p=Nw();f.forEach(b=>{if(!o.has(b)){let S=jw(t.get(b),r.get(b));S!==null&&p.set(b,S),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Xr()),c=-1,l=o;return s.next(d=>M.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(b=>{l=l.insert(f,b)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,re())).next(f=>({batchId:c,changes:kw(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=zs();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,l=>{let d=function(p,b){return new ri(b,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,b)=>{s=s.insert(p,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,d)=>{let f=d.getKey();s.get(f)===null&&(s=s.insert(f,Ht.newInvalidDocument(f)))});let c=zs();return s.forEach((l,d)=>{let f=o.get(l);f!==void 0&&Ws(f.mutation,d,Ft.empty(),qe.now()),Ol(t,d)&&(c=c.insert(l,d))}),c})}};var Tm=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return M.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:jD(i.bundledQuery),readTime:an(i.readTime)}}(t)),M.resolve()}};var Am=class{constructor(){this.overlays=new Pe($.comparator),this.Er=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Xr(),o=t.length+1,s=new $(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((d,f)=>d-f),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=Xr(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Xr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sm(t,r));let o=this.Er.get(t);o===void 0&&(o=re(),this.Er.set(t,o)),this.Er.set(t,o.add(r.key))}};var Cm=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var ea=class{constructor(){this.dr=new Ye(Ve.Ar),this.Rr=new Ye(Ve.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){let r=new Ve(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ve(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new $(new Ce([])),r=new Ve(t,e),i=new Ve(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new $(new Ce([])),r=new Ve(t,e),i=new Ve(t,e+1),o=re();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ve(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return $.comparator(e.key,t.key)||oe(e.br,t.br)}static Vr(e,t){return oe(e.br,t.br)||$.comparator(e.key,t.key)}};var Sm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ye(Ve.Ar)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new im(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.vr=this.vr.add(new Ve(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ve(t,0),i=new Ve(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let c=this.Cr(s.br);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(oe);return t.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],c=>{r=r.add(c.br)})}),M.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new $(o),0),c=new Ye(oe);return this.vr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.br)),!0)},s),M.resolve(this.Mr(c))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){de(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return M.forEach(t.mutations,i=>{let o=new Ve(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){let r=new Ve(t,0),i=this.vr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xm=class{constructor(e){this.Nr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let r=On();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ht.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=On(),s=t.path,c=new $(s.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||HR(WR(f),r)<=0||(i.has(f.key)||Ol(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W()}Lr(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rm(this)}getSize(e){return M.resolve(this.size)}},Rm=class extends wm{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var Dm=class{constructor(e){this.persistence=e,this.Br=new Nn(t=>gp(t),_p),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.kr=0,this.qr=new ea,this.targetCount=0,this.Qr=Zs.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),M.resolve()}Un(e){this.Br.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Un(t),M.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Br.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Br.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.qr.containsKey(t))}};var ul=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new fp(0),this.Ur=!1,this.Ur=!0,this.Wr=new Cm,this.referenceDelegate=e(this),this.Gr=new Dm(this),this.indexManager=new gm,this.remoteDocumentCache=function(i){return new xm(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new pm(t),this.jr=new Tm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Am,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new Sm(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Pm(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return M.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},Pm=class extends jf{constructor(e){super(),this.currentSequenceNumber=e}},Mm=class n{constructor(e){this.persistence=e,this.Zr=new ea,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw W()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),M.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.ti,r=>{let i=$.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return M.or([()=>M.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},dl=class n{constructor(e,t){this.persistence=e,this.ri=new Nn(r=>JR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BD(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return M.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,t).next(c=>{c||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),M.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kc(e.data.value)),t}ir(e,t,r){return M.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var km=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=re(),i=re();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Nm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Om=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return gy()?8:QR(Ke())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Nm;return this.ts(e,t,s).next(c=>{if(o.result=c,this.Hi)return this.ns(e,t,s,c.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Hi()<=te.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Ki(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),M.resolve()):(Hi()<=te.DEBUG&&j("QueryEngine","Query:",Ki(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Hi()<=te.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Ki(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(t))):M.resolve())}Xi(e,t){if(Qb(t))return M.resolve(null);let r=on(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tm(t,null,"F"),r=on(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=re(...o);return this.Zi.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.rs(t,c);return this.ss(t,d,s,l.readTime)?this.Xi(e,tm(t,null,"F")):this.os(e,d,t,l)}))})))}es(e,t,r,i){return Qb(t)||i.isEqual(J.min())?M.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?M.resolve(null):(Hi()<=te.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(t)),this.os(e,s,t,GR(i,-1)).next(c=>c))})}rs(e,t){let r=new Ye(Pw(e));return t.forEach((i,o)=>{Ol(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Hi()<=te.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Ki(t)),this.Zi.getDocumentsMatchingQuery(e,t,ni.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Fm=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Pe(oe),this.cs=new Nn(o=>gp(o),_p),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Em(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function zD(n,e,t,r){return new Fm(n,e,t,r)}function Yw(n,e){return g(this,null,function*(){let t=Y(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=re();for(let d of i){s.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of o){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(d=>({Ts:d,removedBatchIds:s,addedBatchIds:c}))})})})}function $D(n,e){let t=Y(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let p=d.batch,b=p.keys(),S=M.resolve();return b.forEach(k=>{S=S.next(()=>f.getEntry(l,k)).next(L=>{let N=d.docVersions.get(k);de(N!==null),L.version.compareTo(N)<0&&(p.applyToRemoteDocument(L,d),L.isValidDocument()&&(L.setReadTime(d.commitVersion),f.addEntry(L)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=re();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Jw(n){let e=Y(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function qD(n,e){let t=Y(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let c=[];e.targetChanges.forEach((f,p)=>{let b=i.get(p);if(!b)return;c.push(t.Gr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Gr.addMatchingKeys(o,f.addedDocuments,p)));let S=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(lt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),i=i.insert(p,S),function(L,N,K){return L.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(b,S,f)&&c.push(t.Gr.updateTargetData(o,S))});let l=On(),d=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(GD(o,s,e.documentUpdates).next(f=>{l=f.Is,d=f.Es})),!r.isEqual(J.min())){let f=t.Gr.getLastRemoteSnapshotVersion(o).next(p=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,d)).next(()=>l)}).then(o=>(t.us=i,o))}function GD(n,e,t){let r=re(),i=re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=On();return t.forEach((c,l)=>{let d=o.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):j("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{Is:s,Es:i}})}function WD(n,e){let t=Y(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HD(n,e){let t=Y(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new Xs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function Vm(n,e,t){return g(this,null,function*(){let r=Y(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!go(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function aw(n,e,t){let r=Y(n),i=J.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,d,f){let p=Y(l),b=p.cs.get(f);return b!==void 0?M.resolve(p.us.get(b)):p.Gr.getTargetData(d,f)}(r,s,on(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:re())).next(c=>(KD(r,cD(e),c),{documents:c,ds:o})))}function KD(n,e,t){let r=n.ls.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var hl=class{constructor(){this.activeTargetIds=mD()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lm=class{constructor(){this._o=new hl,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new hl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Um=class{uo(e){}shutdown(){}};var fl=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hc=null;function Rf(){return Hc===null?Hc=function(){return 268435456+Math.round(2147483648*Math.random())}():Hc++,"0x"+Hc.toString(16)}var QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var jm=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var at="WebChannelConnection",Bm=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let c=Rf(),l=this.No(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(d,o,s),this.Bo(t,l,d,i).then(f=>(j("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw eo("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",i),f})}ko(t,r,i,o,s,c){return this.Oo(t,r,i,o,s)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=QD[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){let o=Rf();return new Promise((s,c)=>{let l=new Ef;l.setWithCredentials(!0),l.listenOnce(Tf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bs.NO_ERROR:let f=l.getResponseJson();j(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Bs.TIMEOUT:j(at,`RPC '${e}' ${o} timed out`),c(new B(P.DEADLINE_EXCEEDED,"Request time out"));break;case Bs.HTTP_ERROR:let p=l.getStatus();if(j(at,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let S=b?.error;if(S&&S.status&&S.message){let k=function(N){let K=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(K)>=0?K:P.UNKNOWN}(S.status);c(new B(k,S.message))}else c(new B(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(P.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{j(at,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);j(at,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",d,r,15)})}qo(e,t,r){let i=Rf(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Sf(),c=Cf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=o.join("");j(at,`Creating RPC '${e}' stream ${i}: ${f}`,l);let p=s.createWebChannel(f,l),b=!1,S=!1,k=new jm({Eo:N=>{S?j(at,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(b||(j(at,`Opening RPC '${e}' stream ${i} transport.`),p.open(),b=!0),j(at,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Ao:()=>p.close()}),L=(N,K,ee)=>{N.listen(K,Z=>{try{ee(Z)}catch(ve){setTimeout(()=>{throw ve},0)}})};return L(p,Wi.EventType.OPEN,()=>{S||(j(at,`RPC '${e}' stream ${i} transport opened.`),k.So())}),L(p,Wi.EventType.CLOSE,()=>{S||(S=!0,j(at,`RPC '${e}' stream ${i} transport closed`),k.Do())}),L(p,Wi.EventType.ERROR,N=>{S||(S=!0,eo(at,`RPC '${e}' stream ${i} transport errored:`,N),k.Do(new B(P.UNAVAILABLE,"The operation could not be completed")))}),L(p,Wi.EventType.MESSAGE,N=>{var K;if(!S){let ee=N.data[0];de(!!ee);let Z=ee,ve=Z?.error||((K=Z[0])===null||K===void 0?void 0:K.error);if(ve){j(at,`RPC '${e}' stream ${i} received error:`,ve);let dt=ve.status,he=function(y){let w=Fe[y];if(w!==void 0)return zw(w)}(dt),I=ve.message;he===void 0&&(he=P.INTERNAL,I="Unknown error status: "+dt+" with message "+ve.message),S=!0,k.Do(new B(he,I)),p.close()}else j(at,`RPC '${e}' stream ${i} received:`,ee),k.vo(ee)}}),L(c,Af.STAT_EVENT,N=>{N.stat===qc.PROXY?j(at,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===qc.NOPROXY&&j(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.bo()},0),k}};function Df(){return typeof document<"u"?document:null}function Fl(n){return new um(n,!0)}var ml=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var pl=class{constructor(e,t,r,i,o,s,c,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ml(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return g(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return g(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return g(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Pn(t.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new B(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>g(this,null,function*(){this.state=0,this.start()}))}E_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zm=class extends pl{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=RD(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?an(s.readTime):J.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=mm(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=Zf(l)?{documents:MD(o,l)}:{query:kD(o,l).ct},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=$w(o,s.resumeToken);let d=dm(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(J.min())>0){c.readTime=cl(o,s.snapshotVersion.toTimestamp());let d=dm(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=OD(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=mm(this.serializer),t.removeTarget=e,this.c_(t)}},$m=class extends pl{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=PD(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=mm(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>DD(this.serializer,r))};this.c_(t)}};var qm=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new B(P.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,hm(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(P.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.ko(e,hm(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(P.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},Gm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Pn(t),this.C_=!1):j("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var Wm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>g(this,null,function*(){ci(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(l){return g(this,null,function*(){let d=Y(l);d.k_.add(4),yield la(d),d.K_.set("Unknown"),d.k_.delete(4),yield Vl(d)})}(this))}))}),this.K_=new Gm(r,i)}};function Vl(n){return g(this,null,function*(){if(ci(n))for(let e of n.q_)yield e(!0)})}function la(n){return g(this,null,function*(){for(let e of n.q_)yield e(!1)})}function Xw(n,e){let t=Y(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Ep(t)?Ip(t):_o(t).s_()&&wp(t,e))}function bp(n,e){let t=Y(n),r=_o(t);t.B_.delete(e),r.s_()&&Zw(t,e),t.B_.size===0&&(r.s_()?r.a_():ci(t)&&t.K_.set("Unknown"))}function wp(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_o(n).V_(e)}function Zw(n,e){n.U_.xe(e),_o(n).m_(e)}function Ip(n){n.U_=new lm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),_o(n).start(),n.K_.F_()}function Ep(n){return ci(n)&&!_o(n).i_()&&n.B_.size>0}function ci(n){return Y(n).k_.size===0}function eI(n){n.U_=void 0}function YD(n){return g(this,null,function*(){n.K_.set("Online")})}function JD(n){return g(this,null,function*(){n.B_.forEach((e,t)=>{wp(n,e)})})}function XD(n,e){return g(this,null,function*(){eI(n),Ep(n)?(n.K_.O_(e),Ip(n)):n.K_.set("Unknown")})}function ZD(n,e,t){return g(this,null,function*(){if(n.K_.set("Online"),e instanceof sl&&e.state===2&&e.cause)try{yield function(i,o){return g(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.B_.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.B_.delete(c),i.U_.removeTarget(c))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gl(n,r)}else if(e instanceof Xi?n.U_.$e(e):e instanceof ol?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(J.min()))try{let r=yield Jw(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.U_.it(s);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.B_.get(d);f&&o.B_.set(d,f.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,d)=>{let f=o.B_.get(l);if(!f)return;o.B_.set(l,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),Zw(o,l);let p=new Xs(f.target,l,d,f.sequenceNumber);wp(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield gl(n,r)}})}function gl(n,e,t){return g(this,null,function*(){if(!go(e))throw e;n.k_.add(1),yield la(n),n.K_.set("Offline"),t||(t=()=>Jw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Vl(n)}))})}function tI(n,e){return e().catch(t=>gl(n,t,e))}function Ll(n){return g(this,null,function*(){let e=Y(n),t=mr(e),r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;eP(e);)try{let i=yield WD(e.localStore,r);if(i===null){e.L_.length===0&&t.a_();break}r=i.batchId,tP(e,i)}catch(i){yield gl(e,i)}nI(e)&&rI(e)})}function eP(n){return ci(n)&&n.L_.length<10}function tP(n,e){n.L_.push(e);let t=mr(n);t.s_()&&t.f_&&t.g_(e.mutations)}function nI(n){return ci(n)&&!mr(n).i_()&&n.L_.length>0}function rI(n){mr(n).start()}function nP(n){return g(this,null,function*(){mr(n).w_()})}function rP(n){return g(this,null,function*(){let e=mr(n);for(let t of n.L_)e.g_(t.mutations)})}function iP(n,e,t){return g(this,null,function*(){let r=n.L_.shift(),i=om.from(r,e,t);yield tI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ll(n)})}function oP(n,e){return g(this,null,function*(){e&&mr(n).f_&&(yield function(r,i){return g(this,null,function*(){if(function(s){return wD(s)&&s!==P.ABORTED}(i.code)){let o=r.L_.shift();mr(r).__(),yield tI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ll(r)}})}(n,e)),nI(n)&&rI(n)})}function cw(n,e){return g(this,null,function*(){let t=Y(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=ci(t);t.k_.add(3),yield la(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Vl(t)})}function sP(n,e){return g(this,null,function*(){let t=Y(n);e?(t.k_.delete(2),yield Vl(t)):e||(t.k_.add(2),yield la(t),t.K_.set("Unknown"))})}function _o(n){return n.W_||(n.W_=function(t,r,i){let o=Y(t);return o.b_(),new zm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:YD.bind(null,n),mo:JD.bind(null,n),po:XD.bind(null,n),R_:ZD.bind(null,n)}),n.q_.push(e=>g(this,null,function*(){e?(n.W_.__(),Ep(n)?Ip(n):n.K_.set("Unknown")):(yield n.W_.stop(),eI(n))}))),n.W_}function mr(n){return n.G_||(n.G_=function(t,r,i){let o=Y(t);return o.b_(),new $m(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:nP.bind(null,n),po:oP.bind(null,n),p_:rP.bind(null,n),y_:iP.bind(null,n)}),n.q_.push(e=>g(this,null,function*(){e?(n.G_.__(),yield Ll(n)):(yield n.G_.stop(),n.L_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))}))),n.G_}var Hm=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tp(n,e){if(Pn("AsyncQueue",`${e}: ${n}`),go(n))return new B(P.UNAVAILABLE,`${e}: ${n}`);throw n}var _l=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=zs(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var vl=class{constructor(){this.z_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):W():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},uo=class n{constructor(e,t,r,i,o,s,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,_l.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Km=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},Qm=class{constructor(){this.queries=lw(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=Y(t),o=i.queries;i.queries=lw(),o.forEach((s,c)=>{for(let l of c.J_)l.onError(r)})})(this,new B(P.ABORTED,"Firestore shutting down"))}};function lw(){return new Nn(n=>Dw(n),Nl)}function Ap(n,e){return g(this,null,function*(){let t=Y(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new Km,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=Tp(s,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&Sp(t)})}function Cp(n,e){return g(this,null,function*(){let t=Y(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function aP(n,e){let t=Y(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.J_)c.ta(i)&&(r=!0);s.H_=i}}r&&Sp(t)}function cP(n,e,t){let r=Y(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function Sp(n){n.X_.forEach(e=>{e.next()})}var Ym,uw;(uw=Ym||(Ym={})).na="default",uw.Cache="cache";var ta=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Ym.Cache}};var yl=class{constructor(e){this.key=e}},bl=class{constructor(e){this.key=e}},Jm=class{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=re(),this.mutatedKeys=re(),this.Va=Pw(e),this.ma=new _l(this.Va)}get fa(){return this.da}ga(e,t){let r=t?t.pa:new vl,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let b=i.get(f),S=Ol(this.query,p)?p:null,k=!!b&&this.mutatedKeys.has(b.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),N=!1;b&&S?b.data.isEqual(S.data)?k!==L&&(r.track({type:3,doc:S}),N=!0):this.ya(b,S)||(r.track({type:2,doc:S}),N=!0,(l&&this.Va(S,l)>0||d&&this.Va(S,d)<0)&&(c=!0)):!b&&S?(r.track({type:0,doc:S}),N=!0):b&&!S&&(r.track({type:1,doc:b}),N=!0,(l||d)&&(c=!0)),N&&(S?(s=s.add(S),o=L?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{ma:s,pa:r,ss:c,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((f,p)=>function(S,k){let L=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return L(S)-L(k)}(f.type,p.type)||this.Va(f.doc,p.doc)),this.wa(r),i=i!=null&&i;let c=t&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,d=l!==this.Aa;return this.Aa=l,s.length!==0||d?{snapshot:new uo(this.query,e.ma,o,s,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new vl,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=re(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new bl(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new yl(r))}),t}va(e){this.da=e.ds,this.Ra=re();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return uo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},Xm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Zm=class{constructor(e){this.key=e,this.Fa=!1}},ep=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Nn(c=>Dw(c),Nl),this.Oa=new Map,this.Na=new Set,this.La=new Pe($.comparator),this.Ba=new Map,this.ka=new ea,this.qa={},this.Qa=new Map,this.Ka=Zs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function lP(n,e,t=!0){return g(this,null,function*(){let r=lI(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield iI(r,e,t,!0),i})}function uP(n,e){return g(this,null,function*(){let t=lI(n);yield iI(t,e,!0,!1)})}function iI(n,e,t,r){return g(this,null,function*(){let i=yield HD(n.localStore,on(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield dP(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Xw(n.remoteStore,i),c})}function dP(n,e,t,r,i){return g(this,null,function*(){n.Ua=(p,b,S)=>function(L,N,K,ee){return g(this,null,function*(){let Z=N.view.ga(K);Z.ss&&(Z=yield aw(L.localStore,N.query,!1).then(({documents:I})=>N.view.ga(I,Z)));let ve=ee&&ee.targetChanges.get(N.targetId),dt=ee&&ee.targetMismatches.get(N.targetId)!=null,he=N.view.applyChanges(Z,L.isPrimaryClient,ve,dt);return hw(L,N.targetId,he.ba),he.snapshot})}(n,p,b,S);let o=yield aw(n.localStore,e,!0),s=new Jm(e,o.ds),c=s.ga(o.documents),l=Js.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,l);hw(n,t,d.ba);let f=new Xm(e,t,s);return n.xa.set(e,f),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),d.snapshot})}function hP(n,e,t){return g(this,null,function*(){let r=Y(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!Nl(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bp(r.remoteStore,i.targetId),tp(r,i.targetId)}).catch(po))):(tp(r,i.targetId),yield Vm(r.localStore,i.targetId,!0))})}function fP(n,e){return g(this,null,function*(){let t=Y(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bp(t.remoteStore,r.targetId))})}function mP(n,e,t){return g(this,null,function*(){let r=wP(n);try{let i=yield function(s,c){let l=Y(s),d=qe.now(),f=c.reduce((S,k)=>S.add(k.key),re()),p,b;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let k=On(),L=re();return l.hs.getEntries(S,f).next(N=>{k=N,k.forEach((K,ee)=>{ee.isValidDocument()||(L=L.add(K))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,k)).next(N=>{p=N;let K=[];for(let ee of c){let Z=bD(ee,p.get(ee.key).overlayedDocument);Z!=null&&K.push(new ln(ee.key,Z,Ew(Z.value.mapValue),sn.exists(!0)))}return l.mutationQueue.addMutationBatch(S,d,K,c)}).next(N=>{b=N;let K=N.applyToLocalDocumentSet(p,L);return l.documentOverlayCache.saveOverlays(S,N.batchId,K)})}).then(()=>({batchId:b.batchId,changes:kw(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let d=s.qa[s.currentUser.toKey()];d||(d=new Pe(oe)),d=d.insert(c,l),s.qa[s.currentUser.toKey()]=d}(r,i.batchId,t),yield ua(r,i.changes),yield Ll(r.remoteStore)}catch(i){let o=Tp(i,"Failed to persist write");t.reject(o)}})}function oI(n,e){return g(this,null,function*(){let t=Y(n);try{let r=yield qD(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ba.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?de(s.Fa):i.removedDocuments.size>0&&(de(s.Fa),s.Fa=!1))}),yield ua(t,r,e)}catch(r){yield po(r)}})}function dw(n,e,t){let r=Y(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let c=s.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=Y(s);l.onlineState=c;let d=!1;l.queries.forEach((f,p)=>{for(let b of p.J_)b.ea(c)&&(d=!0)}),d&&Sp(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pP(n,e,t){return g(this,null,function*(){let r=Y(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ba.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,Ht.newNoDocument(o,J.min()));let c=re().add(o),l=new il(J.min(),new Map,new Pe(oe),s,c);yield oI(r,l),r.La=r.La.remove(o),r.Ba.delete(e),xp(r)}else yield Vm(r.localStore,e,!1).then(()=>tp(r,e,t)).catch(po)})}function gP(n,e){return g(this,null,function*(){let t=Y(n),r=e.batch.batchId;try{let i=yield $D(t.localStore,e);aI(t,r,null),sI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ua(t,i)}catch(i){yield po(i)}})}function _P(n,e,t){return g(this,null,function*(){let r=Y(n);try{let i=yield function(s,c){let l=Y(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(p=>(de(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(r.localStore,e);aI(r,e,t),sI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ua(r,i)}catch(i){yield po(i)}})}function sI(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function aI(n,e,t){let r=Y(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function tp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||cI(n,r)})}function cI(n,e){n.Na.delete(e.path.canonicalString());let t=n.La.get(e);t!==null&&(bp(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),xp(n))}function hw(n,e,t){for(let r of t)r instanceof yl?(n.ka.addReference(r.key,e),vP(n,r)):r instanceof bl?(j("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||cI(n,r.key)):W()}function vP(n,e){let t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(j("SyncEngine","New document in limbo: "+t),n.Na.add(r),xp(n))}function xp(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new $(Ce.fromString(e)),r=n.Ka.next();n.Ba.set(r,new Zm(t)),n.La=n.La.insert(t,r),Xw(n.remoteStore,new Xs(on(kl(t.path)),r,"TargetPurposeLimboResolution",fp.oe))}}function ua(n,e,t){return g(this,null,function*(){let r=Y(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((c,l)=>{s.push(r.Ua(l,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){i.push(d);let p=km.zi(l.targetId,d);o.push(p)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(l,d){return g(this,null,function*(){let f=Y(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(d,b=>M.forEach(b.Wi,S=>f.persistence.referenceDelegate.addReference(p,b.targetId,S)).next(()=>M.forEach(b.Gi,S=>f.persistence.referenceDelegate.removeReference(p,b.targetId,S)))))}catch(p){if(!go(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let b=p.targetId;if(!p.fromCache){let S=f.us.get(b),k=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(k);f.us=f.us.insert(b,L)}}})}(r.localStore,o))})}function yP(n,e){return g(this,null,function*(){let t=Y(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield Yw(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(c=>{c.forEach(l=>{l.reject(new B(P.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ua(t,r.Ts)}})}function bP(n,e){let t=Y(n),r=t.Ba.get(e);if(r&&r.Fa)return re().add(r.key);{let i=re(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let c=t.xa.get(s);i=i.unionWith(c.view.fa)}return i}}function lI(n){let e=Y(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pP.bind(null,e),e.Ma.R_=aP.bind(null,e.eventManager),e.Ma.Wa=cP.bind(null,e.eventManager),e}function wP(n){let e=Y(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_P.bind(null,e),e}var uI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=Fl(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return zD(this.persistence,new Om,t.initialUser,this.serializer)}ja(t){return new ul(Mm.ei,this.serializer)}za(t){return new Lm}terminate(){return g(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),np=class extends uI{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){de(this.persistence.referenceDelegate instanceof dl);let r=this.persistence.referenceDelegate.garbageCollector;return new ym(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new ul(r=>dl.ei(r,t),this.serializer)}};var IP=(()=>{class n{initialize(t,r){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yP.bind(null,this.syncEngine),yield sP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Qm}()}createDatastore(t){let r=Fl(t.databaseInfo.databaseId),i=function(s){return new Bm(s)}(t.databaseInfo);return function(s,c,l,d){return new qm(s,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new Wm(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>dw(this.syncEngine,r,0),function(){return fl.p()?new fl:new Um}())}createSyncEngine(t,r){return function(o,s,c,l,d,f,p){let b=new ep(o,s,c,l,d,f);return p&&(b.$a=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return g(this,null,function*(){var t,r;yield function(o){return g(this,null,function*(){let s=Y(o);j("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield la(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var na=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rp=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>g(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Tp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pf(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>g(this,null,function*(){r.isEqual(i)||(yield Yw(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function fw(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield EP(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cw(e.remoteStore,i)),n._onlineComponents=e})}function EP(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;eo("Error using user provided cache. Falling back to memory cache: "+t),yield Pf(n,new uI)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Pf(n,new np(void 0));return n._offlineComponents})}function dI(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield fw(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield fw(n,new IP))),n._onlineComponents})}function TP(n){return dI(n).then(e=>e.syncEngine)}function wl(n){return g(this,null,function*(){let e=yield dI(n),t=e.eventManager;return t.onListen=lP.bind(null,e.syncEngine),t.onUnlisten=hP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fP.bind(null,e.syncEngine),t})}function AP(n,e,t={}){let r=new Wt;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,c,l,d){let f=new na({next:b=>{f.eu(),s.enqueueAndForget(()=>Cp(o,p));let S=b.docs.has(c);!S&&b.fromCache?d.reject(new B(P.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&b.fromCache&&l&&l.source==="server"?d.reject(new B(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(b)},error:b=>d.reject(b)}),p=new ta(kl(c.path),f,{includeMetadataChanges:!0,ua:!0});return Ap(o,p)}(yield wl(n),n.asyncQueue,e,t,r)})),r.promise}function CP(n,e,t={}){let r=new Wt;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,c,l,d){let f=new na({next:b=>{f.eu(),s.enqueueAndForget(()=>Cp(o,p)),b.fromCache&&l.source==="server"?d.reject(new B(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),p=new ta(c,f,{includeMetadataChanges:!0,ua:!0});return Ap(o,p)}(yield wl(n),n.asyncQueue,e,t,r)})),r.promise}function hI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mw=new Map;function fI(n,e,t){if(!t)throw new B(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SP(n,e,t,r){if(e===!0&&r===!0)throw new B(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pw(n){if(!$.isDocumentKey(n))throw new B(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gw(n){if($.isDocumentKey(n))throw new B(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ul(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W()}function _t(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ul(n);throw new B(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Il=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ho=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Il({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Il(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Mf;switch(r.type){case"firstParty":return new Ff(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=mw.get(t);r&&(j("ComponentProvider","Removing Datastore"),mw.delete(t),r.terminate())}(this),Promise.resolve()}};function mI(n,e,t,r={}){var i;let o=(n=_t(n,ho))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Qe.MOCK_USER;else{c=uy(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new B(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Qe(d)}n._authCredentials=new kf(new Jc(c,l))}}var ai=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},hr=class n extends ai{constructor(e,t,r){super(e,t,kl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pI(n,e,...t){if(n=Ne(n),fI("collection","path",e),n instanceof ho){let r=Ce.fromString(e,...t);return gw(r),new hr(n,null,r)}{if(!(n instanceof ct||n instanceof hr))throw new B(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return gw(r),new hr(n.firestore,null,r)}}function Rp(n,e,...t){if(n=Ne(n),arguments.length===1&&(e=Xc.newId()),fI("doc","path",e),n instanceof ho){let r=Ce.fromString(e,...t);return pw(r),new ct(n,null,new $(r))}{if(!(n instanceof ct||n instanceof hr))throw new B(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return pw(r),new ct(n.firestore,n instanceof hr?n.converter:null,new $(r))}}var El=class{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ml(this,"async_queue_retry"),this.fu=()=>{let r=Df();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=Df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;let t=Df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});let t=new Wt;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return g(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!go(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(r);throw Pn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=Hm.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&W()}verifyOperationInProgress(){}bu(){return g(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.du.indexOf(e);this.du.splice(t,1)}};function _w(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Qt=class extends ho{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new El,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new El(e),this._firestoreClient=void 0,yield e}})}};function gI(n,e){let t=typeof n=="object"?n:Bi(),r=typeof n=="string"?n:e||"(default)",i=Ss(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ly("firestore");o&&mI(i,...o)}return i}function jl(n){if(n._terminated)throw new B(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xP(n),n._firestoreClient}function xP(n){var e,t,r;let i=n._freezeSettings(),o=function(c,l,d,f){return new Bf(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,hI(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rp(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var ra=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(lt.fromBase64String(e))}catch(t){throw new B(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ia=class{constructor(e){this._methodName=e}};var oa=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var sa=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var RP=/^__.*__$/,ip=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new si(e,this.data,t,this.fieldTransforms)}},Tl=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ln(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function _I(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var op=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Cl(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(_I(this.Mu)&&RP.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},sp=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fl(e)}$u(e,t,r,i=!1){return new op({Mu:e,methodName:t,Ku:r,path:Rt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bl(n){let e=n._freezeSettings(),t=Fl(n._databaseId);return new sp(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vI(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);Dp("Data must be an object, but it was:",s,r);let c=yI(r,s),l,d;if(o.merge)l=new Ft(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let b=ap(e,p,t);if(!s.contains(b))throw new B(P.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);wI(f,b)||f.push(b)}l=new Ft(f),d=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=s.fieldTransforms;return new ip(new xt(c),l,d)}var Al=class n extends ia{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function DP(n,e,t,r){let i=n.$u(1,e,t);Dp("Data must be an object, but it was:",i,r);let o=[],s=xt.empty();pr(r,(l,d)=>{let f=Pp(e,l,t);d=Ne(d);let p=i.Bu(f);if(d instanceof Al)o.push(f);else{let b=da(d,p);b!=null&&(o.push(f),s.set(f,b))}});let c=new Ft(o);return new Tl(s,c,i.fieldTransforms)}function PP(n,e,t,r,i,o){let s=n.$u(1,e,t),c=[ap(e,r,t)],l=[i];if(o.length%2!=0)throw new B(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(ap(e,o[b])),l.push(o[b+1]);let d=[],f=xt.empty();for(let b=c.length-1;b>=0;--b)if(!wI(d,c[b])){let S=c[b],k=l[b];k=Ne(k);let L=s.Bu(S);if(k instanceof Al)d.push(S);else{let N=da(k,L);N!=null&&(d.push(S),f.set(S,N))}}let p=new Ft(d);return new Tl(f,p,s.fieldTransforms)}function MP(n,e,t,r=!1){return da(t,n.$u(r?4:3,e))}function da(n,e){if(bI(n=Ne(n)))return Dp("Unsupported field value:",e,n),yI(n,e);if(n instanceof ia)return function(r,i){if(!_I(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=da(c,i.ku(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:cl(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,o)}}if(r instanceof oa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ra)return{bytesValue:$w(i.serializer,r._byteString)};if(r instanceof ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sa)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.qu("VectorValues must only contain numeric values.");return vp(c.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Ul(r)}`)}(n,e)}function yI(n,e){let t={};return bw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(n,(r,i)=>{let o=da(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function bI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof oa||n instanceof ra||n instanceof ct||n instanceof ia||n instanceof sa)}function Dp(n,e,t){if(!bI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ul(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function ap(n,e,t){if((e=Ne(e))instanceof fo)return e._internalPath;if(typeof e=="string")return Pp(n,e);throw Cl("Field path arguments must be of type string or ",n,!1,void 0,t)}var kP=new RegExp("[~\\*/\\[\\]]");function Pp(n,e,t){if(e.search(kP)>=0)throw Cl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fo(...e.split("."))._internalPath}catch{throw Cl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cl(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new B(P.INVALID_ARGUMENT,c+n+l)}function wI(n,e){return n.some(t=>t.isEqual(e))}var Sl=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Mp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cp=class extends Sl{data(){return super.data()}};function Mp(n,e){return typeof e=="string"?Pp(n,e):e instanceof fo?e._internalPath:e._delegate._internalPath}function II(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aa=class{},lp=class extends aa{};function EI(n,e,...t){let r=[];e instanceof aa&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof up).length,c=o.filter(l=>l instanceof xl).length;if(s>1||s>0&&c>0)throw new B(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var xl=class n extends lp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AI(e._query,t),new ai(e.firestore,e.converter,em(e._query,t))}_parse(e){let t=Bl(e.firestore);return function(o,s,c,l,d,f,p){let b;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){yw(p,f);let S=[];for(let k of p)S.push(vw(l,o,k));b={arrayValue:{values:S}}}else b=vw(l,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||yw(p,f),b=MP(c,s,p,f==="in"||f==="not-in");return Le.create(d,f,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function TI(n,e,t){let r=e,i=Mp("where",n);return xl._create(i,r,t)}var up=class n extends aa{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Kt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let l of c)AI(s,l),s=em(s,l)}(e._query,t),new ai(e.firestore,e.converter,em(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function vw(n,e,t){if(typeof(t=Ne(t))=="string"){if(t==="")throw new B(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rw(e)&&t.indexOf("/")!==-1)throw new B(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ce.fromString(t));if(!$.isDocumentKey(r))throw new B(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $b(n,new $(r))}if(t instanceof ct)return $b(n,t._key);throw new B(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ul(t)}.`)}function yw(n,e){if(!Array.isArray(n)||n.length===0)throw new B(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AI(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var dp=class{convertValue(e,t="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return pr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ie(s.doubleValue));return new sa(o)}convertGeoPoint(e){return new oa(Ie(e.latitude),Ie(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ml(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ks(e));default:return null}}convertTimestamp(e){let t=Mn(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ce.fromString(e);de(Qw(r));let i=new nl(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Pn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function CI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ei=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rl=class extends Sl{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Zi=class extends Rl{data(e={}){return super.data(e)}},Dl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zi(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new Zi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new Zi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:NP(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function NP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function SI(n){n=_t(n,ct);let e=_t(n.firestore,Qt);return AP(jl(e),n._key).then(t=>kI(e,n,t))}var ca=class extends dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function xI(n){n=_t(n,ai);let e=_t(n.firestore,Qt),t=jl(e),r=new ca(e);return II(n._query),CP(t,n._query).then(i=>new Dl(e,r,n,i))}function RI(n,e,t){n=_t(n,ct);let r=_t(n.firestore,Qt),i=CI(n.converter,e,t);return zl(r,[vI(Bl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,sn.none())])}function DI(n,e,t,...r){n=_t(n,ct);let i=_t(n.firestore,Qt),o=Bl(i),s;return s=typeof(e=Ne(e))=="string"||e instanceof fo?PP(o,"updateDoc",n._key,e,t,r):DP(o,"updateDoc",n._key,e),zl(i,[s.toMutation(n._key,sn.exists(!0))])}function PI(n){return zl(_t(n.firestore,Qt),[new Ys(n._key,sn.none())])}function MI(n,e){let t=_t(n.firestore,Qt),r=Rp(n),i=CI(n.converter,e);return zl(t,[vI(Bl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function kp(n,...e){var t,r,i;n=Ne(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_w(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(_w(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,d,f;if(n instanceof ct)d=_t(n.firestore,Qt),f=kl(n._key.path),l={next:p=>{e[s]&&e[s](kI(d,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_t(n,ai);d=_t(p.firestore,Qt),f=p._query;let b=new ca(d);l={next:S=>{e[s]&&e[s](new Dl(d,b,p,S))},error:e[s+1],complete:e[s+2]},II(n._query)}return function(b,S,k,L){let N=new na(L),K=new ta(S,N,k);return b.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Ap(yield wl(b),K)})),()=>{N.eu(),b.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Cp(yield wl(b),K)}))}}(jl(d),f,c,l)}function zl(n,e){return function(r,i){let o=new Wt;return r.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return mP(yield TP(r),i,o)})),o.promise}(jl(n),e)}function kI(n,e,t){let r=t.docs.get(e._key),i=new ca(n);return new Rl(n,i,e._key,r,new ei(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){mo=i})(sr),or(new Nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Qt(new Nf(r.getProvider("auth-internal")),new Lf(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(d.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),$e(Lb,"4.7.5",e),$e(Lb,"4.7.5","esm2017")})();var $l=function(){return $l=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$l.apply(this,arguments)};var VP={includeMetadataChanges:!1};function NI(n,e){return e===void 0&&(e=VP),new Yt(function(t){var r=kp(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function OI(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:$l($l({},r),(t={},t[e.idField]=n.id,t))}function FI(n){return NI(n,{includeMetadataChanges:!0}).pipe(G(function(e){return e.docs}))}function VI(n,e){return e===void 0&&(e={}),FI(n).pipe(G(function(t){return t.map(function(r){return OI(r,e)})}))}var li=class{constructor(e){return e}},LI="firestore",Np=class{constructor(){return Rs(LI)}};var Op=new Q("angularfire2.firestore-instances");function LP(n,e){let t=Ec(LI,n,e);return t&&new li(t)}function UP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new li(r)}}var jP={provide:Np,deps:[[new pt,Op]]},BP={provide:li,useFactory:LP,deps:[[new pt,Op],Cn]};function UI(n,...e){return $e("angularfire",Wr.full,"fst"),Ut([BP,jP,{provide:Op,useFactory:UP(n),multi:!0,deps:[_e,It,$i,Hr,[new pt,js],[new pt,zi],...e]}])}var Fp=Oe(VI,!0);var jI=Oe(MI,!0);var vo=Oe(pI,!0);var BI=Oe(PI,!0);var yo=Oe(Rp,!0);var ql=Oe(SI,!0);var bo=Oe(xI,!0);var zI=Oe(gI,!0);var gr=Oe(EI,!0);var $I=Oe(RI,!0);var ui=Oe(DI,!0);var wo=Oe(TI,!0);var Ue=class n{firestore=D(li);router=D(Ct);auth=zc();user=null;currentAccount=null;toolCollection;accountCollection;tools$;communityTools$;accounts$;constructor(){this.toolCollection=vo(this.firestore,"Tools");var e=gr(this.toolCollection);this.tools$=Fp(e),this.accountCollection=vo(this.firestore,"Accounts"),e=gr(this.accountCollection),this.accounts$=Fp(e),kb(this.auth,t=>{this.user=t,console.log("Auth state changed, user is now:",this.user)}),this.communityTools$=Gn([this.tools$,this.accounts$]).pipe(G(([t,r])=>{if(this.currentAccount){let i=this.currentAccount.communityCode;return t.filter(o=>o.communityCode===i)}return[]}))}fetchTool(e){return g(this,null,function*(){try{return(yield Ku(this.tools$)).find(r=>r.id===e)}catch(t){console.error("Error fetching tool:",t);return}})}fetchCommunityTools(){return g(this,null,function*(){try{if(!this.currentAccount)throw new Error("No current account is logged in");let e=this.currentAccount.communityCode,t=gr(this.toolCollection,wo("communityCode","==",e)),r=yield bo(t);return r.empty?[]:r.docs.map(o=>o.data())}catch(e){throw console.error("Error fetching community tools:",e),e}})}fetchAccount(e){return g(this,null,function*(){try{let r=(yield Ku(this.accounts$)).find(i=>i.email===e);if(!r)throw new Error(`Account with email ${e} not found`);return r}catch(t){throw console.error("Error fetching account:",t),t}})}addTool(e){return g(this,null,function*(){try{let t=yo(this.toolCollection),r=t.id;if(yield $I(t,ie(V({},e),{ownerPublicName:this.currentAccount?.publicName,communityCode:this.currentAccount?.communityCode,id:r})),console.log("Tool successfully added with ID:",r),this.currentAccount){let i=gr(vo(this.firestore,"Accounts"),wo("email","==",this.currentAccount.email)),o=yield bo(i);if(o.empty)throw new Error(`No account found with email: ${this.currentAccount.email}`);let s=o.docs[0].ref;yield ui(s,{ownedTools:[...this.currentAccount.ownedTools,r]}),console.log("Owner's 'ownedTools' updated successfully"),this.currentAccount=ie(V({},this.currentAccount),{ownedTools:[...this.currentAccount.ownedTools,r]}),console.log("Local currentAccount updated successfully")}return r}catch(t){console.error("Error adding tool:",t)}return"Failed to add tool"})}updateTool(e,t){return g(this,null,function*(){try{let r=yo(this.firestore,"Tools",e);if(!(yield ql(r)).exists())throw new Error(`Tool with ID ${e} does not exist`);yield ui(r,t),console.log(`Tool with ID ${e} updated successfully.`)}catch(r){throw console.error("Error updating tool:",r),r}})}deleteTool(e){return g(this,null,function*(){try{if(!this.currentAccount)throw new Error("No current account is logged in");let t=yo(this.firestore,"Tools",e);yield BI(t),console.log(`Tool with ID ${e} deleted successfully.`);let r=gr(vo(this.firestore,"Accounts"),wo("email","==",this.currentAccount.email)),i=yield bo(r);if(i.empty)throw new Error(`No account found with email: ${this.currentAccount.email}`);let o=i.docs[0].ref,s=this.currentAccount.ownedTools.filter(c=>c!==e);yield ui(o,{ownedTools:s}),console.log(`Owner's ownedTools updated successfully after deleting tool ${e}`),this.currentAccount=ie(V({},this.currentAccount),{ownedTools:s}),console.log("Local currentAccount updated successfully")}catch(t){throw console.error("Error deleting tool:",t),t}})}fetchAccountTools(){return g(this,null,function*(){try{if(!this.currentAccount)throw new Error("No current account is logged in");console.log(this.currentAccount);let e=this.currentAccount.ownedTools;if(e.length===0)return[];let t=gr(this.toolCollection,wo("id","in",e)),r=yield bo(t);return r.empty?[]:r.docs.map(o=>o.data())}catch(e){throw console.error("Error fetching account tools:",e),e}})}createUser(e,t,r){return g(this,null,function*(){Mb(this.auth,e,t).then(i=>{this.user=i.user,console.log("User successfully created:",this.user),this._createAccount(r)}).catch(i=>{let o=i.code,s=i.message;console.log(o,s)})})}_createAccount(e){return g(this,null,function*(){try{let t=yield jI(this.accountCollection,e);console.log("Account created with ID:",t.id)}catch(t){throw console.error("Error creating account:",t),t}})}updateAccount(e,t){return g(this,null,function*(){try{let r=vo(this.firestore,"Accounts"),i=gr(r,wo("email","==",e)),o=yield bo(i);if(o.empty)throw new Error(`Account with email ${e} does not exist`);let s=o.docs[0].ref;yield ui(s,t),console.log("Account updated successfully"),"communityCode"in t&&(console.log("Community code is changing, logging out the user..."),yield this.logout())}catch(r){throw console.error("Error updating account:",r),r}})}enterWaitlist(e,t){return g(this,null,function*(){try{let r=yo(this.firestore,"Tools",e),i=yield ql(r);if(!i.exists())throw new Error(`Tool with ID ${e} does not exist`);let o=i.data();if(o.waitlist&&o.waitlist.includes(t.publicName)){console.log("User is already in the waitlist or no waitlist exists."),alert("You are already in the waitlist.");return}let s=o.waitlist?[...o.waitlist,t.publicName]:[t.publicName];yield ui(r,{waitlist:s}),console.log("Waitlist updated successfully")}catch(r){console.error("Error entering waitlist:",r)}})}exitWaitlist(e,t){return g(this,null,function*(){try{let r=yo(this.firestore,"Tools",e),i=yield ql(r);if(!i.exists())throw new Error(`Tool with ID ${e} does not exist`);let o=i.data();if(!o.waitlist||!o.waitlist.includes(t.publicName)){console.log("User is not in the waitlist or no waitlist exists."),alert("You are not in the waitlist.");return}let s=o.waitlist.filter(c=>c!==t.publicName);yield ui(r,{waitlist:s}),console.log("Waitlist updated successfully")}catch(r){console.error("Error exiting waitlist:",r)}})}login(e,t){return g(this,null,function*(){try{let r=yield Nb(this.auth,e,t);return this.user=r.user,console.log("User logged in:",this.user),this.currentAccount=yield this.fetchAccount(e),!0}catch(r){if(r instanceof Error&&"code"in r){let i=r,o=i.code,s=i.message;console.log("Firebase Error Code:",o,"Message:",s)}else console.log("An unknown error occurred",r);return!1}})}logout(){return g(this,null,function*(){Ob(this.auth).then(()=>{console.log("User logged out"),this.currentAccount=null,this.router.navigate(["/"])})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vp;try{Vp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Vp=!1}var _r=(()=>{class n{_platformId=D(vn);isBrowser=this._platformId?X_(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Vp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GI(n){return n!=null&&`${n}`!="false"}function Lp(n){return Array.isArray(n)?n:[n]}var zP=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({providers:[zP]})}return n})();var HI=new Set,di,$P=(()=>{class n{_platform=D(_r);_nonce=D(Qo,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):GP}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&qP(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qP(n,e){if(!HI.has(n))try{di||(di=document.createElement("style"),e&&di.setAttribute("nonce",e),di.setAttribute("type","text/css"),document.head.appendChild(di)),di.sheet&&(di.sheet.insertRule(`@media ${n} {body{ }}`,0),HI.add(n))}catch(t){console.error(t)}}function GP(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var QI=(()=>{class n{_mediaMatcher=D($P);_zone=D(_e);_queries=new Map;_destroySubject=new Xe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return KI(Lp(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let i=KI(Lp(t)).map(s=>this._registerQuery(s).observable),o=Gn(i);return o=La(o.pipe(Jt(1)),o.pipe(u_(1),o_(0))),o.pipe(G(s=>{let c={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),o={observable:new Yt(s=>{let c=l=>this._zone.run(()=>s.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(kr(r),G(({matches:s})=>({query:t,matches:s})),gn(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KI(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var hi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(hi||{}),YI="cdk-high-contrast-black-on-white",JI="cdk-high-contrast-white-on-black",Up="cdk-high-contrast-active",XI=(()=>{class n{_platform=D(_r);_hasCheckedHighContrastMode;_document=D(De);_breakpointSubscription;constructor(){this._breakpointSubscription=D(QI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return hi.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return hi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return hi.BLACK_ON_WHITE}return hi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Up,YI,JI),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===hi.BLACK_ON_WHITE?t.add(Up,YI):r===hi.WHITE_ON_BLACK&&t.add(Up,JI)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jp={},Gl=(()=>{class n{_appId=D(Ho);getId(t){return this._appId!=="ng"&&(t+=this._appId),jp.hasOwnProperty(t)||(jp[t]=0),`${t}${jp[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HP=new Q("cdk-dir-doc",{providedIn:"root",factory:KP});function KP(){return D(De)}var QP=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function YP(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?QP.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var ZI=(()=>{class n{value="ltr";change=new gt;constructor(){let t=D(HP,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.value=YP(r||i||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({})}return n})();var Vt=(()=>{class n{constructor(){D(XI)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[Bp,Bp]})}return n})();var JP=["*",[["mat-toolbar-row"]]],XP=["*","mat-toolbar-row"],ZP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),eE=(()=>{class n{_elementRef=D(st);_platform=D(_r);_document=D(De);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,o){if(r&1&&bn(o,ZP,5),r&2){let s;je(s=Be())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){r&2&&(qa(i.color?"mat-"+i.color:""),Ze("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",i._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:XP,decls:2,vars:0,template:function(r,i){r&1&&(Bt(JP),Re(0),Re(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})();var vt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[Vt,Vt]})}return n})();var tM=["*"],Wl;function nM(){if(Wl===void 0&&(Wl=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Wl=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Wl}function ha(n){return nM()?.createHTML(n)||n}function tE(n){return Error(`Unable to find icon with the name "${n}"`)}function rM(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function nE(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function rE(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Fn=class{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}},iM=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Fn(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){let s=this._sanitizer.sanitize(Et.HTML,i);if(!s)throw rE(i);let c=ha(s);return this._addSvgIconConfig(t,r,new Fn("",c,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Fn(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){let o=this._sanitizer.sanitize(Et.HTML,r);if(!o)throw rE(r);let s=ha(o);return this._addSvgIconSetConfig(t,new Fn("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(Et.RESOURCE_URL,t);if(!r)throw nE(t);let i=this._cachedIconsByUrl.get(r);return i?q(Hl(i)):this._loadSvgIconFromConfig(new Fn(t,null)).pipe(Ee(o=>this._cachedIconsByUrl.set(r,o)),G(o=>Hl(o)))}getNamedSvgIcon(t,r=""){let i=iE(r,t),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(t,s):Dr(tE(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?q(Hl(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(G(r=>Hl(r)))}_getSvgFromIconSetConfigs(t,r){let i=this._extractIconWithNameFromAnySet(t,r);if(i)return q(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Wn(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(Et.RESOURCE_URL,s.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),q(null)})));return Ua(o).pipe(G(()=>{let s=this._extractIconWithNameFromAnySet(t,r);if(!s)throw tE(t);return s}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(s,t,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ee(r=>t.svgText=r),G(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?q(null):this._fetchIcon(t).pipe(Ee(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){let o=t.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let c=this._svgElementFromString(ha("<svg></svg>"));return c.appendChild(s),this._setSvgAttributes(c,i)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let r=this._svgElementFromString(ha("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){let{name:s,value:c}=i[o];s!=="id"&&r.setAttribute(s,c)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw rM();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(Et.RESOURCE_URL,r);if(!s)throw nE(r);let c=this._inProgressUrlFetches.get(s);if(c)return c;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(G(d=>ha(d)),Mr(()=>this._inProgressUrlFetches.delete(s)),c_());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(iE(t,r),i),this}_addSvgIconSetConfig(t,r){let i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,t);if(o)return oM(o)?new Fn(o.url,null,o.options):new Fn(o,null)}}static \u0275fac=function(r){return new(r||n)(ne(lv,8),ne(Td),ne(De,8),ne(Fr))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hl(n){return n.cloneNode(!0)}function iE(n,e){return n+":"+e}function oM(n){return!!(n.url&&n.options)}var sM=new Q("MAT_ICON_DEFAULT_OPTIONS"),aM=new Q("mat-icon-location",{providedIn:"root",factory:cM});function cM(){let n=D(De),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var oE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],lM=oE.map(n=>`[${n}]`).join(", "),uM=/^url\(['"]?#(.*?)['"]?\)$/,sE=(()=>{class n{_elementRef=D(st);_iconRegistry=D(iM);_location=D(aM);_errorHandler=D(Fr);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=_i.EMPTY;constructor(){let t=D(new td("aria-hidden"),{optional:!0}),r=D(sM,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=t.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(lM),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)oE.forEach(s=>{let c=r[o],l=c.getAttribute(s),d=l?l.match(uM):null;if(d){let f=i.get(c);f||(f=[],i.set(c,f)),f.push({name:s,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Jt(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(jt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),qa(i.color?"mat-"+i.color:""),Ze("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",$t],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Vr],ngContentSelectors:tM,decls:1,vars:0,template:function(r,i){r&1&&(Bt(),Re(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),ut=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[Vt,Vt]})}return n})();var hM=["*"];var fM=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],mM=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],pM=new Q("MAT_CARD_CONFIG"),un=(()=>{class n{appearance;constructor(){let t=D(pM,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){r&2&&Ze("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:hM,decls:1,vars:0,template:function(r,i){r&1&&(Bt(),Re(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),vr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var dn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),Kl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return n})();var yr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:mM,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,i){r&1&&(Bt(fM),Re(0),R(1,"div",0),Re(2,1),x(),Re(3,2))},encapsulation:2,changeDetection:0})}return n})();var Ql=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"]})}return n})();var yt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[Vt,Vt]})}return n})();var gM=n=>({grayscale:n}),_M=(n,e)=>({available:n,unavailable:e});function vM(n,e){if(n&1&&(R(0,"a",4)(1,"mat-card",5)(2,"mat-card-header"),pe(3,"img",6),x(),R(4,"mat-card-content")(5,"mat-card-title",7),O(6),x(),R(7,"mat-card-subtitle",8),O(8),x(),R(9,"p"),O(10),x()()()()),n&2){let t=e.$implicit;xe("routerLink","/tooldetail/"+t.id),U(3),Ci("alt",t.name),xe("src",t.image,wi)("ngClass",V_(8,gM,!t.availabilityStatus)),U(3),wn(t.name),U(),xe("ngClass",Wa(10,_M,t.availabilityStatus,!t.availabilityStatus)),U(),ze(" ",t.availabilityStatus?"Available":"Unavailable",""),U(2),ze("Owner: ",t.ownerPublicName,"")}}var Yl=class n{title="toolshed";tools=[];toolshedService=D(Ue);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-shed"]],decls:14,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"item-grid"],[1,"item-link",3,"routerLink"],[1,"item-card"],["mat-card-image","",1,"tool-image",3,"src","alt","ngClass"],[1,"card-title"],[1,"status",3,"ngClass"]],template:function(t,r){t&1&&(R(0,"html",0)(1,"head"),pe(2,"meta",1)(3,"meta",2),R(4,"title"),O(5,"Tool List"),x()(),R(6,"body")(7,"ul",3),Ei(8,vM,11,13,"a",4,N_),Ha(10,"async"),R(11,"li"),O(12,"No more products available"),x()(),pe(13,"router-outlet"),x()()),t&2&&(U(8),Ti(L_(10,0,r.toolshedService.communityTools$)))},dependencies:[ws,Q_,vt,ut,yt,un,dn,yr,Ql,Kl,vr,nr,Zo,Qa],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f4f4f4;color:#333;margin:0;padding:0}.tool-image[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;object-position:center;transition:opacity .3s ease}.item-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:16px;list-style:none;padding:10px;margin:0}.status[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.available[_ngcontent-%COMP%]{color:#6b8e23}.unavailable[_ngcontent-%COMP%]{color:#8b4513}.item-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.card-title[_ngcontent-%COMP%]{color:#6b8e23;font-size:1.4rem}.item-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-width:100%;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease}.item-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}mat-card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}.grayscale[_ngcontent-%COMP%]{filter:grayscale(80%);opacity:.6}@media (max-width: 1200px){.item-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 900px){.item-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 600px){.item-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var pE=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(be(Xo),be(st))};static \u0275dir=ce({type:n})}return n})(),gE=(()=>{class n extends pE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})();static \u0275dir=ce({type:n,features:[yn]})}return n})(),$p=new Q(""),yM={provide:$p,useExisting:vi(()=>qp),multi:!0},qp=(()=>{class n extends gE{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})();static \u0275dir=ce({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&we("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Xt([yM]),yn]})}return n})(),bM={provide:$p,useExisting:vi(()=>hn),multi:!0};function wM(){let n=xi()?xi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var IM=new Q(""),hn=(()=>{class n extends pE{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!wM())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(be(Xo),be(st),be(IM,8))};static \u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&we("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xt([bM]),yn]})}return n})();function EM(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Gp=new Q(""),_E=new Q("");function TM(n){return EM(n.value)?{required:!0}:null}function aE(n){return null}function vE(n){return n!=null}function yE(n){return $a(n)?mt(n):n}function bE(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function wE(n,e){return e.map(t=>t(n))}function AM(n){return!n.validate}function IE(n){return n.map(e=>AM(e)?e:t=>e.validate(t))}function CM(n){if(!n)return null;let e=n.filter(vE);return e.length==0?null:function(t){return bE(wE(t,e))}}function Wp(n){return n!=null?CM(IE(n)):null}function SM(n){if(!n)return null;let e=n.filter(vE);return e.length==0?null:function(t){let r=wE(t,e).map(yE);return Ua(r).pipe(G(bE))}}function Hp(n){return n!=null?SM(IE(n)):null}function cE(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xM(n){return n._rawValidators}function RM(n){return n._rawAsyncValidators}function zp(n){return n?Array.isArray(n)?n:[n]:[]}function Xl(n,e){return Array.isArray(n)?n.includes(e):n===e}function lE(n,e){let t=zp(e);return zp(n).forEach(i=>{Xl(t,i)||t.push(i)}),t}function uE(n,e){return zp(e).filter(t=>!Xl(n,t))}var Zl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Wp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},To=class extends Zl{name;get formDirective(){return null}get path(){return null}},ya=class extends Zl{_parent=null;name=null;valueAccessor=null},eu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},DM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DU=ie(V({},DM),{"[class.ng-submitted]":"isSubmitted"}),wr=(()=>{class n extends eu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(be(ya,2))};static \u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[yn]})}return n})(),iu=(()=>{class n extends eu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(be(To,10))};static \u0275dir=ce({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[yn]})}return n})();var ma="VALID",Jl="INVALID",Io="PENDING",pa="DISABLED",Ao=class{},tu=class extends Ao{value;source;constructor(e,t){super(),this.value=e,this.source=t}},_a=class extends Ao{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},va=class extends Ao{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Eo=class extends Ao{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function EE(n){return(ou(n)?n.validators:n)||null}function PM(n){return Array.isArray(n)?Wp(n):n||null}function TE(n,e){return(ou(e)?e.asyncValidators:n)||null}function MM(n){return Array.isArray(n)?Hp(n):n||null}function ou(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new me(1e3,"");if(!r[t])throw new me(1001,"")}function NM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new me(1002,"")})}var nu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xn(this.statusReactive)}set status(e){Xn(()=>this.statusReactive.set(e))}_status=Jn(()=>this.statusReactive());statusReactive=Ii(void 0);get valid(){return this.status===ma}get invalid(){return this.status===Jl}get pending(){return this.status==Io}get disabled(){return this.status===pa}get enabled(){return this.status!==pa}errors;get pristine(){return Xn(this.pristineReactive)}set pristine(e){Xn(()=>this.pristineReactive.set(e))}_pristine=Jn(()=>this.pristineReactive());pristineReactive=Ii(!0);get dirty(){return!this.pristine}get touched(){return Xn(this.touchedReactive)}set touched(e){Xn(()=>this.touchedReactive.set(e))}_touched=Jn(()=>this.touchedReactive());touchedReactive=Ii(!1);get untouched(){return!this.touched}_events=new Xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uE(e,this._rawAsyncValidators))}hasValidator(e){return Xl(this._rawValidators,e)}hasAsyncValidator(e){return Xl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new va(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new va(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _a(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new _a(!0,r))}markAsPending(e={}){this.status=Io;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this.errors=null,this._forEachChild(i=>{i.disable(ie(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new tu(this.value,r)),this._events.next(new Eo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ma,this._forEachChild(r=>{r.enable(ie(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ma||this.status===Io)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new tu(this.value,t)),this._events.next(new Eo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pa:ma}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Io,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=yE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Eo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?pa:this.errors?Jl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Io)?Io:this._anyControlsHaveStatus(Jl)?Jl:ma}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new _a(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new va(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ou(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=PM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=MM(this._rawAsyncValidators)}},ru=class extends nu{constructor(e,t,r){super(EE(t),TE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NM(this,!0,e),Object.keys(e).forEach(r=>{kM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Kp=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Qp}),Qp="always";function OM(n,e){return[...e.path,n]}function AE(n,e,t=Qp){CE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),VM(n,e),UM(n,e),LM(n,e),FM(n,e)}function dE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function FM(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function CE(n,e){let t=xM(n);e.validator!==null?n.setValidators(cE(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=RM(n);e.asyncValidator!==null?n.setAsyncValidators(cE(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();dE(e._rawValidators,i),dE(e._rawAsyncValidators,i)}function VM(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&SE(n,e)})}function LM(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&SE(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function SE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UM(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function jM(n,e){n==null,CE(n,e)}function BM(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zM(n){return Object.getPrototypeOf(n.constructor)===gE}function $M(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qM(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===hn?t=o:zM(o)?r=o:i=o}),i||r||t||null}var GM={provide:To,useExisting:vi(()=>ba)},ga=Promise.resolve(),ba=(()=>{class n extends To{callSetDisabledState;get submitted(){return Xn(this.submittedReactive)}_submitted=Jn(()=>this.submittedReactive());submittedReactive=Ii(!1);_directives=new Set;form;ngSubmit=new gt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new ru({},Wp(t),Hp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ga.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),AE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ga.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ga.then(()=>{let r=this._findContainer(t.path),i=new ru({});jM(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ga.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ga.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$M(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(be(Gp,10),be(_E,10),be(Kp,8))};static \u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&we("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xt([GM]),yn]})}return n})();function hE(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fE(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var WM=class extends nu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(EE(t),TE(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ou(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HM={provide:ya,useExisting:vi(()=>Vn)},mE=Promise.resolve(),Vn=(()=>{class n extends ya{_changeDetectorRef;callSetDisabledState;control=new WM;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new gt;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qM(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),BM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){AE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){mE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&$t(r);mE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?OM(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(be(To,9),be(Gp,10),be(_E,10),be($p,10),be(Yn,8),be(Kp,8))};static \u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xt([HM]),yn,Nr]})}return n})(),su=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var KM=(()=>{class n{_validator=aE;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):aE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,features:[Nr]})}return n})();var QM={provide:Gp,useExisting:vi(()=>Ln),multi:!0};var Ln=(()=>{class n extends KM{required;inputName="required";normalizeInput=$t;createValidator=t=>TM;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})();static \u0275dir=ce({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&jt("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Xt([QM]),yn]})}return n})();var YM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({})}return n})();var Ir=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kp,useValue:t.callSetDisabledState??Qp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[YM]})}return n})();var cu=class n{toolshedService=D(Ue);toolName="";toolDescription="";toolImage="";toolAvailabilityStatus=!0;handleImageUpload(e){let t=e.target?.files?.[0];if(t){let r=new FileReader;r.onload=()=>{this.toolImage=r.result,console.log("Image converted to Base64:",this.toolImage)},r.onerror=i=>{console.error("Error converting image to Base64:",i)},r.readAsDataURL(t)}}addToolFromInput(){if(this.toolName&&this.toolDescription){let e={name:this.toolName,description:this.toolDescription,image:this.toolImage,availabilityStatus:this.toolAvailabilityStatus,waitlist:[],timestamp:qe.fromDate(new Date)};this.toolshedService.addTool(e).then(()=>{console.log("Tool added successfully")}).catch(t=>{console.error("Error adding tool:",t)}),this.toolshedService.fetchAccount(this.toolshedService.currentAccount.email),this.clearInputs()}else console.error("All fields must be filled out.")}clearInputs(){this.toolName="",this.toolDescription="",this.toolImage="",this.toolAvailabilityStatus=!0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-upload-page"]],decls:25,vars:4,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"upload"],[1,"form-contents"],[3,"ngSubmit"],["for","toolName"],["id","toolName","name","toolName","type","text","placeholder","Enter tool name","required","",3,"ngModelChange","ngModel"],["for","toolDescription"],["id","toolDescription","name","toolDescription","placeholder","Enter tool description","required","",3,"ngModelChange","ngModel"],["for","toolImage"],["type","file","id","toolImage",3,"change"],["for","toolAvailabilityStatus"],["id","toolAvailabilityStatus","name","toolAvailabilityStatus","type","checkbox",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(t,r){t&1&&(R(0,"html",0)(1,"head"),pe(2,"meta",1)(3,"meta",2),R(4,"title"),O(5,"Tool Upload"),x()(),R(6,"body")(7,"h1",3),O(8,"Upload Tool"),x(),R(9,"div",4)(10,"form",5),we("ngSubmit",function(){return r.addToolFromInput()}),R(11,"label",6),O(12,"Tool Name:"),x(),R(13,"input",7),He("ngModelChange",function(o){return We(r.toolName,o)||(r.toolName=o),o}),x(),R(14,"label",8),O(15,"Description:"),x(),R(16,"textarea",9),He("ngModelChange",function(o){return We(r.toolDescription,o)||(r.toolDescription=o),o}),x(),R(17,"label",10),O(18,"Upload Tool Image:"),x(),R(19,"input",11),we("change",function(o){return r.handleImageUpload(o)}),x(),R(20,"label",12)(21,"input",13),He("ngModelChange",function(o){return We(r.toolAvailabilityStatus,o)||(r.toolAvailabilityStatus=o),o}),x(),O(22," Available "),x(),R(23,"button",14),O(24,"Add Tool"),x()()()()()),t&2&&(U(13),Ge("ngModel",r.toolName),U(3),Ge("ngModel",r.toolDescription),U(5),Ge("ngModel",r.toolAvailabilityStatus),U(2),xe("disabled",!r.toolName||!r.toolDescription))},dependencies:[Ir,su,hn,qp,wr,iu,Ln,Vn,ba,vt,ut,yt],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f4f4f9;margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column}.upload[_ngcontent-%COMP%]{color:#6b8e23}.form-contents[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:400px;width:100%;flex:1;margin-bottom:10px;box-sizing:border-box}h1[_ngcontent-%COMP%]{text-align:center;color:#333}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:1rem;color:#555;font-weight:500}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:1px solid #ddd;border-radius:6px;font-size:1rem;color:#8b4513;transition:border .3s;box-sizing:border-box}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;color:#fff;font-size:1.1rem;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:silver;cursor:not-allowed}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}button[_ngcontent-%COMP%]{margin-top:10px}"]})};function JM(n,e){if(n&1&&(R(0,"li"),O(1),x()),n&2){let t=e.$implicit;U(),ze(" \u2014 ",t,"")}}function XM(n,e){if(n&1){let t=Ai();R(0,"div",0)(1,"h2"),O(2),x(),pe(3,"img",1),R(4,"div",2)(5,"p")(6,"strong"),O(7,"Description:"),x(),O(8),x(),R(9,"p")(10,"strong"),O(11,"Owner:"),x(),O(12),x(),R(13,"p")(14,"strong"),O(15,"Status:"),x(),O(16),x(),R(17,"p")(18,"strong"),O(19,"Community Code:"),x(),O(20),x(),R(21,"p")(22,"strong"),O(23,"Added:"),x(),O(24),Ha(25,"date"),x(),R(26,"p")(27,"strong"),O(28,"Waiting List:"),x()(),R(29,"ul",3),Ei(30,JM,2,1,"li",null,Ga),x(),R(32,"button",4),we("click",function(){Kn(t);let i=et();return Qn(i.enterWaitlist())}),O(33," Enter Waitlist "),x(),R(34,"button",4),we("click",function(){Kn(t);let i=et();return Qn(i.exitWaitlist())}),O(35," Exit Waitlist "),x()()()}if(n&2){let t=et();U(2),wn(t.currTool.name),U(),Ci("alt",t.currTool.name),xe("src",t.currTool.image,wi),U(5),ze(" ",t.currTool.description,""),U(4),ze(" ",t.currTool.ownerPublicName,""),U(4),ze(" ",t.currTool.availabilityStatus?"Available":"Unavailable",""),U(4),ze(" ",t.currTool.communityCode,""),U(4),ze(" ",U_(25,8,t.currTool.timestamp.toDate(),"short"),""),U(6),Ti(t.currTool.waitlist)}}var lu=class n{id=ja("");toolshedService=D(Ue);currTool;currentAccount;constructor(){}ngOnInit(){this.loadTool(),this.loadCurrentAccount()}loadTool(){return g(this,null,function*(){try{this.currTool=yield this.toolshedService.fetchTool(this.id()),this.currTool?(console.log("Fetched tool:",this.currTool),console.log("Current tool waitlist:",this.currTool.waitlist)):console.log("Tool not found.")}catch(e){console.error("Error fetching tool:",e)}})}loadCurrentAccount(){return g(this,null,function*(){try{this.toolshedService.currentAccount?this.currentAccount=this.toolshedService.currentAccount:console.log("No current account found")}catch(e){console.error("Error loading current account:",e)}})}enterWaitlist(){return g(this,null,function*(){if(!this.currTool||!this.currentAccount){console.log("Tool or account not available");return}try{yield this.toolshedService.enterWaitlist(this.currTool.id,this.currentAccount),console.log("Entered waitlist successfully"),this.loadTool()}catch(e){console.error("Error entering waitlist:",e)}})}exitWaitlist(){return g(this,null,function*(){if(!this.currTool||!this.currentAccount){console.log("Tool or account not available");return}try{yield this.toolshedService.exitWaitlist(this.currTool.id,this.currentAccount),console.log("Exited waitlist successfully"),this.loadTool()}catch(e){console.error("Error exiting waitlist:",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-tooldetail"]],inputs:{id:[1,"id"]},decls:2,vars:1,consts:[[1,"card"],[1,"tool-image",3,"src","alt"],[1,"tool-details"],[1,"waitlist-text"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,r){t&1&&(R(0,"body"),Me(1,XM,36,11,"div",0),x()),t&2&&(U(),ke(r.currTool?1:-1))},dependencies:[Y_,vt,ut,yt],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#fff;color:#333;margin:0;padding:0}.item-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:16px;list-style:none;padding:10px;margin:0}.status[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.available[_ngcontent-%COMP%]{color:#6b8e23}.unavailable[_ngcontent-%COMP%]{color:#8b4513}.card-title[_ngcontent-%COMP%]{color:#6b8e23;font-size:1.4rem}.item-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-width:100%;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background-color:#e8e8e8;border-radius:8px;box-shadow:0 2px 5px #00000080;width:90%;max-width:1200px;margin:1em auto}.tool-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:20px;background-color:#e8e8e8;border-radius:8px;box-shadow:0 0 #0000;width:95%;max-width:900px;margin:1em auto}h2[_ngcontent-%COMP%]{font-size:2rem;color:#6b8e23;margin-bottom:15px}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#555;margin:5px 0;text-align:left;word-wrap:break-word;width:100%}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;text-align:left}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;padding:5px;margin:5px 0;background-color:#e8e8e8;border-radius:4px;display:block}.tool-image[_ngcontent-%COMP%]{max-width:100%;max-height:500px;width:auto;height:auto;border-radius:8px;margin-top:10px;object-fit:cover;object-position:center;transition:opacity .3s ease;margin-bottom:15px}button[_ngcontent-%COMP%]{background-color:#6b8e23;color:#fff;font-size:1rem;font-weight:700;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease,transform .2s ease;margin-top:10px;width:100%;max-width:200px}button[_ngcontent-%COMP%]:hover{background-color:#4b703f;transform:scale(1.02)}strong[_ngcontent-%COMP%]{font-weight:700;color:#6b8e23}"]})};var Yp=class{_box;_destroyed=new Xe;_resizeSubject=new Xe;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Yt(t=>{let r=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),r.unsubscribe(),this._elementObservables.delete(e)}}).pipe(wt(t=>t.some(r=>r.target===e)),l_({bufferSize:1,refCount:!0}),gn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},xE=(()=>{class n{_observers=new Map;_ngZone=D(_e);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,r){let i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new Yp(i)),this._observers.get(i).observe(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ZM=["notch"],ek=["matFormFieldNotchedOutline",""],tk=["*"],nk=["textField"],rk=["iconPrefixContainer"],ik=["textPrefixContainer"],ok=["iconSuffixContainer"],sk=["textSuffixContainer"],ak=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ck=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function lk(n,e){n&1&&pe(0,"span",21)}function uk(n,e){if(n&1&&(R(0,"label",20),Re(1,1),Me(2,lk,1,0,"span",21),x()),n&2){let t=et(2);xe("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),jt("for",t._control.disableAutomaticLabeling?null:t._control.id),U(2),ke(!t.hideRequiredMarker&&t._control.required?2:-1)}}function dk(n,e){if(n&1&&Me(0,uk,3,5,"label",20),n&2){let t=et();ke(t._hasFloatingLabel()?0:-1)}}function hk(n,e){n&1&&pe(0,"div",7)}function fk(n,e){}function mk(n,e){if(n&1&&Me(0,fk,0,0,"ng-template",13),n&2){et(2);let t=od(1);xe("ngTemplateOutlet",t)}}function pk(n,e){if(n&1&&(R(0,"div",9),Me(1,mk,1,1,null,13),x()),n&2){let t=et();xe("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),U(),ke(t._forceDisplayInfixLabel()?-1:1)}}function gk(n,e){n&1&&(R(0,"div",10,2),Re(2,2),x())}function _k(n,e){n&1&&(R(0,"div",11,3),Re(2,3),x())}function vk(n,e){}function yk(n,e){if(n&1&&Me(0,vk,0,0,"ng-template",13),n&2){et();let t=od(1);xe("ngTemplateOutlet",t)}}function bk(n,e){n&1&&(R(0,"div",14,4),Re(2,4),x())}function wk(n,e){n&1&&(R(0,"div",15,5),Re(2,5),x())}function Ik(n,e){n&1&&pe(0,"div",16)}function Ek(n,e){if(n&1&&(R(0,"div",18),Re(1,6),x()),n&2){let t=et();xe("@transitionMessages",t._subscriptAnimationState)}}function Tk(n,e){if(n&1&&(R(0,"mat-hint",22),O(1),x()),n&2){let t=et(2);xe("id",t._hintLabelId),U(),wn(t.hintLabel)}}function Ak(n,e){if(n&1&&(R(0,"div",19),Me(1,Tk,2,2,"mat-hint",22),Re(2,7),pe(3,"div",23),Re(4,8),x()),n&2){let t=et();xe("@transitionMessages",t._subscriptAnimationState),U(),ke(t.hintLabel?1:-1)}}var Er=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-label"]]})}return n})(),Ck=new Q("MatError");var RE=(()=>{class n{align="start";id=D(Gl).getId("mat-mdc-hint-");static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){r&2&&(id("id",i.id),jt("align",null),Ze("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),Sk=new Q("MatPrefix");var xk=new Q("MatSuffix");var FE=new Q("FloatingLabelParent"),DE=(()=>{class n{_elementRef=D(st);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=D(xE);_ngZone=D(_e);_parent=D(FE);_resizeSubscription=new _i;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Rk(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){r&2&&Ze("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Rk(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let r=t.scrollWidth;return t.remove(),r}var PE="mdc-line-ripple--active",uu="mdc-line-ripple--deactivating",ME=(()=>{class n{_elementRef=D(st);constructor(){D(_e).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(uu),t.add(PE)}deactivate(){this._elementRef.nativeElement.classList.add(uu)}_handleTransitionEnd=t=>{let r=this._elementRef.nativeElement.classList,i=r.contains(uu);t.propertyName==="opacity"&&i&&r.remove(PE,uu)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),kE=(()=>{class n{_elementRef=D(st);_ngZone=D(_e);open=!1;_notch;constructor(){}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(r&1&&zt(ZM,5),r&2){let o;je(o=Be())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){r&2&&Ze("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:ek,ngContentSelectors:tk,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,i){r&1&&(Bt(),pe(0,"div",1),R(1,"div",2,0),Re(3),x(),pe(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),Dk={transitionMessages:ev("transitionMessages",[nv("enter",ld({opacity:1,transform:"translateY(0%)"})),rv("void => enter",[ld({opacity:0,transform:"translateY(-5px)"}),tv("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Pk=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(r){return new(r||n)};static \u0275dir=ce({type:n})}return n})();var Mk=new Q("MatFormField"),kk=new Q("MAT_FORM_FIELD_DEFAULT_OPTIONS"),NE="fill",Nk="auto",OE="fixed",Ok="translateY(-50%)",Co=(()=>{class n{_elementRef=D(st);_changeDetectorRef=D(Yn);_dir=D(ZI);_platform=D(_r);_idGenerator=D(Gl);_defaults=D(kk,{optional:!0});_animationMode=D(Ko,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=D_(Er);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=GI(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Nk}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(t){let r=this._appearance,i=t||this._defaults?.appearance||NE;this._appearance=i,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=NE;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||OE}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||OE}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new Xe;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=D(It);constructor(){let t=this._defaults;t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Jn(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let r=this._control,i="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(i+t.controlType),r.controlType&&this._elementRef.nativeElement.classList.add(i+r.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=r.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=r.stateChanges.pipe(kr([void 0,void 0]),G(()=>[r.errorState,r.userAriaDescribedBy]),Xu(),wt(([[o,s],[c,l]])=>o!==c||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),r.ngControl&&r.ngControl.valueChanges&&(this._valueChanges=r.ngControl.valueChanges.pipe(gn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),i_(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),b_(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(gn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Jn(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,i=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,c=r?.getBoundingClientRect().width??0,l=i?.getBoundingClientRect().width??0,d=o?.getBoundingClientRect().width??0,f=s?.getBoundingClientRect().width??0,p=this._dir.value==="rtl"?"-1":"1",b=`${c+l}px`,k=`calc(${p} * (${b} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Ok} translateX(${k})
    )`;let L=c+l+d+f;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${L}px)`)}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["mat-form-field"]],contentQueries:function(r,i,o){if(r&1&&(O_(o,i._labelChild,Er,5),bn(o,Pk,5),bn(o,Sk,5),bn(o,xk,5),bn(o,Ck,5),bn(o,RE,5)),r&2){F_();let s;je(s=Be())&&(i._formFieldControl=s.first),je(s=Be())&&(i._prefixChildren=s),je(s=Be())&&(i._suffixChildren=s),je(s=Be())&&(i._errorChildren=s),je(s=Be())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(r&1&&(zt(nk,5),zt(rk,5),zt(ik,5),zt(ok,5),zt(sk,5),zt(DE,5),zt(kE,5),zt(ME,5)),r&2){let o;je(o=Be())&&(i._textField=o.first),je(o=Be())&&(i._iconPrefixContainer=o.first),je(o=Be())&&(i._textPrefixContainer=o.first),je(o=Be())&&(i._iconSuffixContainer=o.first),je(o=Be())&&(i._textSuffixContainer=o.first),je(o=Be())&&(i._floatingLabel=o.first),je(o=Be())&&(i._notchedOutline=o.first),je(o=Be())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){r&2&&Ze("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations",i._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Xt([{provide:Mk,useExisting:n},{provide:FE,useExisting:n}])],ngContentSelectors:ck,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,i){if(r&1){let o=Ai();Bt(ak),Me(0,dk,1,1,"ng-template",null,0,j_),R(2,"div",6,1),we("click",function(c){return Kn(o),Qn(i._control.onContainerClick(c))}),Me(4,hk,1,0,"div",7),R(5,"div",8),Me(6,pk,2,2,"div",9)(7,gk,3,0,"div",10)(8,_k,3,0,"div",11),R(9,"div",12),Me(10,yk,1,1,null,13),Re(11),x(),Me(12,bk,3,0,"div",14)(13,wk,3,0,"div",15),x(),Me(14,Ik,1,0,"div",16),x(),R(15,"div",17),Me(16,Ek,2,1,"div",18)(17,Ak,5,2,"div",19),x()}if(r&2){let o;U(2),Ze("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),U(2),ke(!i._hasOutline()&&!i._control.disabled?4:-1),U(2),ke(i._hasOutline()?6:-1),U(),ke(i._hasIconPrefix?7:-1),U(),ke(i._hasTextPrefix?8:-1),U(2),ke(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),U(2),ke(i._hasTextSuffix?12:-1),U(),ke(i._hasIconSuffix?13:-1),U(),ke(i._hasOutline()?-1:14),U(),Ze("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic"),U(),ke((o=i._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[DE,kE,K_,ME,RE],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Dk.transitionMessages]},changeDetection:0})}return n})(),Tr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ae({type:n});static \u0275inj=Te({imports:[Vt,WI,Vt]})}return n})();var du=class n{constructor(e){this.toolshedService=e}account={ownedTools:[],publicAddress:"",publicName:"",email:"",phoneNumber:"",communityCode:""};ngOnInit(){this.loadAccountData()}loadAccountData(){return g(this,null,function*(){try{this.toolshedService.currentAccount?this.account=V({},this.toolshedService.currentAccount):console.error("No account is currently logged in.")}catch(e){console.error("Error loading account data:",e)}})}updateProfile(){return g(this,null,function*(){try{this.account.email?(yield this.toolshedService.updateAccount(this.account.email,this.account),console.log("Profile updated successfully."),alert("Profile updated successfully.")):(console.error("Account email is missing. Cannot update."),alert("Account email is missing. Cannot update."))}catch(e){console.error("Error updating profile:",e),alert("An error occurred while updating the profile.")}})}static \u0275fac=function(t){return new(t||n)(be(Ue))};static \u0275cmp=le({type:n,selectors:[["app-profile-page"]],decls:46,vars:8,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"profile-container"],[1,"current-info"],[3,"ngSubmit"],["appearance","fill"],["matInput","","name","publicName","type","text","placeholder","Public Name","required","",3,"ngModelChange","ngModel"],["matInput","","name","phoneNumber","placeholder","Phone Number","type","text",3,"ngModelChange","ngModel"],["matInput","","name","communityCode","placeholder","Community Code","type","text",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,r){t&1&&(R(0,"html",0)(1,"head"),pe(2,"meta",1)(3,"meta",2),R(4,"title"),O(5,"Tool List"),x()(),R(6,"body")(7,"div",3)(8,"div",4)(9,"h2"),O(10,"Current Account Information"),x(),R(11,"mat-card")(12,"mat-card-content")(13,"p")(14,"strong"),O(15,"Email:"),x(),O(16),x(),R(17,"p")(18,"strong"),O(19,"Public Name:"),x(),O(20),x(),R(21,"p")(22,"strong"),O(23,"Phone Number:"),x(),O(24),x(),R(25,"p")(26,"strong"),O(27,"Community Code:"),x(),O(28),x()()()(),R(29,"h2"),O(30,"Update Profile"),x(),R(31,"form",5),we("ngSubmit",function(){return r.updateProfile()}),R(32,"mat-form-field",6)(33,"mat-label"),O(34,"Public Name"),x(),R(35,"input",7),He("ngModelChange",function(o){return We(r.account.publicName,o)||(r.account.publicName=o),o}),x()(),R(36,"mat-form-field",6)(37,"mat-label"),O(38,"Phone Number"),x(),R(39,"input",8),He("ngModelChange",function(o){return We(r.account.phoneNumber,o)||(r.account.phoneNumber=o),o}),x()(),R(40,"mat-form-field",6)(41,"mat-label"),O(42,"Community Code"),x(),R(43,"input",9),He("ngModelChange",function(o){return We(r.account.communityCode,o)||(r.account.communityCode=o),o}),x()(),R(44,"button",10),O(45," Update Profile "),x()()()()()),t&2&&(U(16),ze(" ",r.account.email,""),U(4),ze(" ",r.account.publicName,""),U(4),ze(" ",r.account.phoneNumber||"Not provided",""),U(4),ze(" ",r.account.communityCode||"Not provided",""),U(7),Ge("ngModel",r.account.publicName),U(4),Ge("ngModel",r.account.phoneNumber),U(4),Ge("ngModel",r.account.communityCode),U(),xe("disabled",!r.account.publicName||!r.account.phoneNumber))},dependencies:[yt,un,dn,Tr,Co,Er,Ir,su,hn,wr,iu,Ln,Vn,ba],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f4f4f4;color:#333;margin:0;padding:0}h2[_ngcontent-%COMP%]{color:#6b8e23}.profile-container[_ngcontent-%COMP%]{padding:20px}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:1px solid #ddd;border-radius:6px;font-size:1rem;color:#8b4513;transition:border .3s;box-sizing:border-box}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}button[_ngcontent-%COMP%]{background-color:#6b8e23;color:#fff;font-size:1rem;font-weight:700;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease,transform .2s ease;margin-top:10px;width:100%;max-width:200px}button[_ngcontent-%COMP%]:hover{background-color:#4b703f;transform:scale(1.02)}"]})};function Fk(n,e){n&1&&(R(0,"p"),O(1,"Login Failed"),x())}var hu=class n{toolshedService=D(Ue);router=D(Ct);email="";password="";loginSuccess=!0;onLogin(){return g(this,null,function*(){try{this.loginSuccess=yield this.toolshedService.login(this.email,this.password),console.log("Login successful"),this.loginSuccess&&this.router.navigate(["/shed"])}catch(e){console.error("Login failed:",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"login-container"],[1,"login-card"],["appearance","fill",1,"input-field"],["matInput","","placeholder","Enter your email","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],[1,"signup-link"],["routerLink","/signup"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),O(4,"Login"),x()(),R(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),O(8,"Username"),x(),R(9,"input",3),He("ngModelChange",function(o){return We(r.email,o)||(r.email=o),o}),x()(),R(10,"mat-form-field",2)(11,"mat-label"),O(12,"Password"),x(),R(13,"input",4),He("ngModelChange",function(o){return We(r.password,o)||(r.password=o),o}),x()(),R(14,"button",5),we("click",function(){return r.onLogin()}),O(15,"Login"),x(),Me(16,Fk,2,0,"p"),R(17,"div",6)(18,"span"),O(19,"Don't have an account yet? "),x(),R(20,"a",7),O(21,"Sign up"),x()()()()()),t&2&&(U(9),Ge("ngModel",r.email),U(4),Ge("ngModel",r.password),U(3),ke(r.loginSuccess?-1:16))},dependencies:[vt,ut,yt,un,dn,yr,vr,Tr,Co,Er,Ir,hn,wr,Ln,Vn,nr],encapsulation:2})};var fu=class n{toolshedService=D(Ue);router=D(Ct);password="";email="";publicName="";phoneNumber="";publicAddress="";communityCode="";onSignUp(){return g(this,null,function*(){try{let e={ownedTools:[],publicName:this.publicName,email:this.email,phoneNumber:this.phoneNumber,publicAddress:this.publicAddress,communityCode:this.communityCode};yield this.toolshedService.createUser(this.email,this.password,e),console.log("Account successfully created!"),this.router.navigate(["/"])}catch(e){console.error("Error during signup:",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-signup"]],decls:37,vars:6,consts:[[1,"signup-container"],[1,"signup-card"],["appearance","fill",1,"input-field"],["matInput","","type","email","placeholder","Enter your email","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","Enter a password","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Enter a public name","required","",3,"ngModelChange","ngModel"],["matInput","","type","tel","placeholder","Enter your phone number","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Enter your public address","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Enter your community code","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],[1,"login-link"],["routerLink","/"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),O(4,"Sign Up"),x()(),R(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),O(8,"Email"),x(),R(9,"input",3),He("ngModelChange",function(o){return We(r.email,o)||(r.email=o),o}),x()(),R(10,"mat-form-field",2)(11,"mat-label"),O(12,"Password"),x(),R(13,"input",4),He("ngModelChange",function(o){return We(r.password,o)||(r.password=o),o}),x()(),R(14,"mat-form-field",2)(15,"mat-label"),O(16,"Username"),x(),R(17,"input",5),He("ngModelChange",function(o){return We(r.publicName,o)||(r.publicName=o),o}),x()(),R(18,"mat-form-field",2)(19,"mat-label"),O(20,"Phone Number"),x(),R(21,"input",6),He("ngModelChange",function(o){return We(r.phoneNumber,o)||(r.phoneNumber=o),o}),x()(),R(22,"mat-form-field",2)(23,"mat-label"),O(24,"Public Address"),x(),R(25,"input",7),He("ngModelChange",function(o){return We(r.publicAddress,o)||(r.publicAddress=o),o}),x()(),R(26,"mat-form-field",2)(27,"mat-label"),O(28,"Community Code"),x(),R(29,"input",8),He("ngModelChange",function(o){return We(r.communityCode,o)||(r.communityCode=o),o}),x()(),R(30,"button",9),we("click",function(){return r.onSignUp()}),O(31,"Sign Up"),x(),R(32,"div",10)(33,"span"),O(34,"Already have an account? "),x(),R(35,"a",11),O(36,"Login"),x()()()()()),t&2&&(U(9),Ge("ngModel",r.email),U(4),Ge("ngModel",r.password),U(4),Ge("ngModel",r.publicName),U(4),Ge("ngModel",r.phoneNumber),U(4),Ge("ngModel",r.publicAddress),U(4),Ge("ngModel",r.communityCode))},dependencies:[vt,ut,yt,un,dn,yr,vr,Tr,Co,Er,Ir,hn,wr,Ln,Vn,nr],encapsulation:2})};var Vk=(n,e)=>({available:n,unavailable:e});function Lk(n,e){if(n&1){let t=Ai();R(0,"mat-card",4)(1,"mat-card-header"),pe(2,"img",5),x(),R(3,"mat-card-content")(4,"mat-card-title",6),O(5),x(),R(6,"p"),O(7),x(),R(8,"mat-card-subtitle",7),O(9),x()(),R(10,"button",8),we("click",function(){let i=Kn(t).$implicit,o=et();return Qn(o.toggleAvailability(i))}),O(11),x(),R(12,"button",9),we("click",function(){let i=Kn(t).$implicit,o=et();return Qn(o.deleteTool(i.id))}),O(13,"Delete"),x()()}if(n&2){let t=e.$implicit;U(2),Ci("alt",t.name),xe("src",t.image,wi),U(3),wn(t.name),U(2),wn(t.description),U(),xe("ngClass",Wa(7,Vk,t.availabilityStatus,!t.availabilityStatus)),U(),ze(" ",t.availabilityStatus?"Available":"Unavailable",""),U(2),ze(" ",t.availabilityStatus?"Mark Unavailable":"Mark Available"," ")}}var mu=class n{tools=[];toolshedService=D(Ue);router=D(Ct);constructor(){}ngOnInit(){this.loadUserTools()}loadUserTools(){return g(this,null,function*(){try{if(this.toolshedService.currentAccount){this.toolshedService.fetchAccount(this.toolshedService.currentAccount?.email);let e=yield this.toolshedService.fetchAccountTools();console.log("tools: ",e),this.tools=e}}catch(e){console.error("Error loading tools:",e)}})}toggleAvailability(e){return g(this,null,function*(){try{let t=!e.availabilityStatus;yield this.toolshedService.updateTool(e.id,{availabilityStatus:t}),this.tools=this.tools.map(r=>r.id===e.id?ie(V({},r),{availabilityStatus:t}):r),console.log(`Tool ${e.name} marked as ${t?"available":"unavailable"}.`)}catch(t){console.error("Error toggling tool availability:",t)}})}deleteTool(e){return g(this,null,function*(){try{yield this.toolshedService.deleteTool(e),console.log("Tool deleted successfully"),this.loadUserTools()}catch(t){console.error("Error deleting tool:",t)}})}markToolUnavailable(e){return g(this,null,function*(){try{yield this.toolshedService.updateTool(e,{availabilityStatus:!1}),this.tools=this.tools.map(t=>t.id===e?ie(V({},t),{availabilityStatus:!1}):t),console.log("Tool marked as unavailable.")}catch(t){console.error("Error marking tool unavailable:",t)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-tools"]],decls:10,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"item-grid"],[1,"item-card"],["mat-card-image","",1,"tool-image",3,"src","alt"],[1,"card-title"],[1,"status",3,"ngClass"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(t,r){t&1&&(R(0,"html",0)(1,"head"),pe(2,"meta",1)(3,"meta",2),R(4,"title"),O(5,"Tool Upload"),x()(),R(6,"body")(7,"ul",3),Ei(8,Lk,14,10,"mat-card",4,Ga),x()()()),t&2&&(U(8),Ti(r.tools))},dependencies:[ut,yt,un,dn,yr,Ql,Kl,vr,Tr,Zo,Qa],styles:[".item-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:16px;list-style:none;padding:10px;margin:0}.tool-image[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;object-position:center;transition:opacity .3s ease}.status[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.available[_ngcontent-%COMP%]{color:#6b8e23}.unavailable[_ngcontent-%COMP%]{color:#8b4513}.card-title[_ngcontent-%COMP%]{color:#6b8e23;font-size:1.4rem}.item-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-width:100%;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease}button[_ngcontent-%COMP%]{background-color:#6b8e23;color:#fff;font-size:.8rem;font-weight:700;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease,transform .2s ease;margin-top:10px;width:100%;max-width:200px;display:block;margin-left:auto;margin-right:auto}button[_ngcontent-%COMP%]:hover{background-color:#4b703f;transform:scale(1.05)}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}mat-card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}"]})};var Ar=class n{constructor(e,t){this.toolshedService=e;this.router=t}canActivate(e,t){return this.toolshedService.user?!0:(this.router.navigate(["/"]),!1)}static \u0275fac=function(t){return new(t||n)(ne(Ue),ne(Ct))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var VE=[{path:"",component:hu},{path:"shed",component:Yl,canActivate:[Ar]},{path:"upload",component:cu,canActivate:[Ar]},{path:"tooldetail/:id",component:lu,canActivate:[Ar]},{path:"profilepage",component:du,canActivate:[Ar]},{path:"tools",component:mu,canActivate:[Ar]},{path:"signup",component:fu},{path:"**",redirectTo:""}];var Uk="@",jk=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=D(m_,{optional:!0});loadingSchedulerFn=D(Bk,{optional:!0});_engine;constructor(t,r,i,o,s){this.doc=t,this.delegate=r,this.zone=i,this.animationType=o,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-S42GWPPH.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(i=>{throw new me(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(t,r){let i=this.delegate.createRenderer(t,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let o=new Xp(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let c=s.createRenderer(t,r);o.use(c),this.scheduler?.notify(11)}).catch(s=>{o.use(i)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(r){nd()};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),Xp=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,i){this.delegate.insertBefore(e,t,r,i)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(Uk)}},Bk=new Q("");function LE(n="animations"){return y_("NgAsyncAnimations"),Ut([{provide:Ba,useFactory:(e,t,r)=>new jk(e,t,r,n),deps:[De,Xa,_e]},{provide:Ko,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var UE={providers:[z_({eventCoalescing:!0}),iy(VE,oy()),Ny(()=>Oy({projectId:"toolshed-d03f6",appId:"1:1076441728383:web:3972f389a5cce4e223864a",storageBucket:"toolshed-d03f6.firebasestorage.app",apiKey:"AIzaSyBPeR3G-Ai_UZlkHM3Z61ZOg2KEvIIAd18",authDomain:"toolshed-d03f6.firebaseapp.com",messagingSenderId:"1076441728383",measurementId:"G-Q3C67485L5"})),UI(()=>zI()),Pb(()=>zc()),LE()]};var pu=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-taskbar"]],decls:21,vars:0,consts:[[1,"header-container"],[1,"top"],[1,"toolbar"],[1,"bar"],["routerLink","/shed",1,"item-link"],["routerLink","/upload",1,"item-link"],["routerLink","/profilepage",1,"item-link"],["routerLink","/tools",1,"item-link"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h1",1),O(2,"The Tool Shed"),x(),R(3,"mat-toolbar",2)(4,"span",3)(5,"mat-icon"),O(6,"warehouse"),x(),R(7,"a",4),O(8,"Shed"),x(),R(9,"mat-icon"),O(10,"upload"),x(),R(11,"a",5),O(12,"Upload"),x(),R(13,"mat-icon"),O(14,"person"),x(),R(15,"a",6),O(16,"Profile"),x(),R(17,"mat-icon"),O(18,"handyman"),x(),R(19,"a",7),O(20,"Tools"),x()()()())},dependencies:[nr,vt,eE,ut,sE],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#fff;box-shadow:0 2px 5px #0000001a}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#6b8e23;margin:0;font-size:2rem;white-space:nowrap;text-align:center}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin-left:50px}.toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;gap:70px}.toolbar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#6b8e23;margin-right:-60px}.toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-weight:700;font-size:1.2rem}.toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#87ceeb}"]})};function zk(n,e){n&1&&pe(0,"app-taskbar")}var gu=class n{toolshedService=D(Ue);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["app-root"]],decls:7,vars:1,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"]],template:function(t,r){t&1&&(R(0,"html",0)(1,"head"),pe(2,"meta",1)(3,"meta",2),x(),R(4,"body"),Me(5,zk,1,0,"app-taskbar"),pe(6,"router-outlet"),x()()),t&2&&(U(5),ke(r.toolshedService.currentAccount!=null?5:-1))},dependencies:[ws,pu,vt,ut],encapsulation:2})};vv(gu,UE).catch(n=>console.error(n));
